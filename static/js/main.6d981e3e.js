/*! For license information please see main.6d981e3e.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var F,M=Object.assign;function U(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ie(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ee)&&(De(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Fe=!1,Me=null,Ue=!1,Ve=null,ze={onError:function(e){Fe=!0,Me=e}};function Be(e,t,n,r,i,a,o,u,s){Fe=!1,Me=null,Le.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(je(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,Tt=!1,It=[],Ct=null,Dt=null,Nt=null,At=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Dt&&Ut(Dt)&&(Dt=null),null!==Nt&&Ut(Nt)&&(Nt=null),At.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Dt&&Bt(Dt,e),null!==Nt&&Bt(Nt,e),At.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Qt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Xt(e,t,n,r);if(null===i)Kr(e,t,r,Wt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,i),!0;case"dragenter":return Dt=Ft(Dt,e,t,n,r,i),!0;case"mouseover":return Nt=Ft(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Ft(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Ft(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Kr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Wt=null;function Xt(e,t,n,r){if(Wt=null,null!==(e=gi(e=we(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=M({},cn,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(M({},dn,{dataTransfer:0})),yn=an(M({},fn,{relatedTarget:0})),mn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var Tn=M({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Fn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Hn=null;function Wn(e){Ur(e,0)}function Xn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Hn=Qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Hn)){var t=[];Gn(t,Hn,e,we(e)),Ae(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Hn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==W(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Qr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Sr("animationend"),Ir=Sr("animationiteration"),Cr=Sr("animationstart"),Dr=Sr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Pr=Ar[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var l=Me;Fe=!1,Me=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Tr:case Ir:case Cr:s=mn;break;case Dr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Re(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Hr(d))v++;for(d=0,p=h;p;p=Hr(p))d++;for(;0<v-d;)l=Hr(l),v--;for(;0<d-v;)h=Hr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Kn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(g=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,jn=!0)),0<(m=Qr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Fn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Pn&&zn(e,t)?(e=en(),Zt=Jt=Yt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Ii={},Ci=Ei(Ii),Di=Ei(!1),Ni=Ii;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Di),Si(Ci)}function Pi(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Di,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=Ci.current,Ti(Ci,e),Ti(Di,Di.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Di),Si(Ci),Ti(Ci,e)):Si(Di),Ti(Di,n)}var Ui=null,Vi=!1,zi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function ji(){if(!zi&&null!==Ui){zi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,ji),i}finally{kt=t,zi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Hi=[],Wi=0,Xi=null,$i=1,Yi="";function Ji(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function Zi(e,t,n){Hi[Wi++]=$i,Hi[Wi++]=Yi,Hi[Wi++]=Xi,Xi=e;var r=$i;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else $i=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Xi;)Xi=Hi[--Wi],Hi[Wi]=null,Yi=Hi[--Wi],Hi[Wi]=null,$i=Hi[--Wi],Hi[Wi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ds)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=M({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function ja(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Ni:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Qa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Qa(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m,f=y}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),ia&&Ji(i,y),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Fc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Qa(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Xa(!0),Ya=Xa(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function Io(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=po,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&vo)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){Fo(t)&&Mo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Da(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return Io().memoizedState}function Bo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}po.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return jo(2048,8,e,t)}function Go(e,t){return jo(4,2,e,t)}function Qo(e,t){return jo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Ho.bind(null,t,e),n)}function Xo(){}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&vo)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Yo,useReducer:Do,useRef:zo,useState:function(){return Do(Co)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Io(),yo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],Io().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ko,useImperativeHandle:Wo,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Yo,useReducer:No,useRef:zo,useState:function(){return No(Co)},useDebugValue:Xo,useDeferredValue:function(e){var t=Io();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Io().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Qs=r),hu(0,t)},n}function pu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):$a(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ps,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ps,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ps,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ps,Os),Os|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Ai(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Fi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ai(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Di.current||Na?("function"===typeof l&&(za(t,n,l,r),s=t.memoizedState),(u=Na||ja(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ai(t,s=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Di.current||Na?("function"===typeof d&&(za(t,n,d,r),v=t.memoizedState),(c=Na||ja(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Du(e,t,n,r,a,i)}function Du(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Pu,Lu,Fu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Fc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Fu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,zu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Fu,o);if(0===(1&t.mode))return zu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,zu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Da(e,i),rc(r,e,i,-1))}return yc(),zu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Wi++]=$i,Hi[Wi++]=Yi,Hi[Wi++]=Xi,$i=e.id,Yi=e.overflow,Xi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Fc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Fu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zu(e,t,n,r){return null!==r&&va(r),$a(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function ju(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ju(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ju(t,!0,n,null,a);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Di),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":Q(r),Z(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=X(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ou(e,t),null===e&&jr(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Qu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Qu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qs&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Ye()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Di),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),jt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Yu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,ds(e,t,n),Yu=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Sc(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(js=Ye())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,ys(t,e),Yu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==v?(v.return=d,Zu=v):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,$u=u,Yu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Ts=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ds=0,Ns=null,As=null,Rs=0,Os=0,Ps=Ei(0),Ls=0,Fs=null,Ms=0,Us=0,Vs=0,zs=null,Bs=null,js=0,qs=1/0,Ks=null,Gs=!1,Qs=null,Hs=null,Ws=!1,Xs=null,$s=0,Ys=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ds)?Ye():-1!==Zs?Zs:Zs=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ds)&&0!==Rs?Rs&-Rs:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Ds)&&e===Ns||(e===Ns&&(0===(2&Ds)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Ds&&0===(1&t.mode)&&(qs=Ye()+500,Vi&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Ds)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ds))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ds;Ds|=2;var o=pc();for(Ns===e&&Rs===t||(Ks=null,qs=Ye()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}wa(),Ts.current=o,Ds=i,null!==As?t=0:(Ns=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Fs,dc(e,0),sc(e,r),ic(e,Ye()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Fs,dc(e,0),sc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=js+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bs,Ks),t);break}_c(e,Bs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bs,Ks),r);break}_c(e,Bs,Ks);break;default:throw Error(a(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ds))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Fs,dc(e,0),sc(e,t),ic(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bs,Ks),ic(e,Ye()),null}function lc(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(qs=Ye()+500,Vi&&ji())}}function fc(e){null!==Xs&&0===Xs.tag&&0===(6&Ds)&&xc();var t=Ds;Ds|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ds=t))&&ji()}}function hc(){Os=Ps.current,Si(Ps)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Di),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Rs=Os=t,Ls=0,Fs=null,Vs=Us=Ms=0,Bs=zs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function vc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ls=1,Fs=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===zs?zs=[o]:zs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Us)||sc(Ns,Rs)}function mc(e,t){var n=Ds;Ds|=2;var r=pc();for(Ns===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(wa(),Ds=n,Ts.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Ls}function gc(){for(;null!==As;)bc(As)}function kc(){for(;null!==As&&!Xe();)bc(As)}function bc(e){var t=Es(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Is.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Os)))return void(As=n)}else{if(null!==(n=Xu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Xs);if(0!==(6&Ds))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ds;Ds|=4,Is.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ms(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ds=s,kt=u,Cs.transition=o}else e.current=n;if(Ws&&(Ws=!1,Xs=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Qs,Qs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Ys++:(Ys=0,Js=e):Ys=0,ji()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Xs){var e=bt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Xs)var r=!1;else{if(e=Xs,Xs=null,$s=0,0!==(6&Ds))throw Error(a(331));var i=Ds;for(Ds|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Sc(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ds=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Pa(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Pa(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Ye()-js?dc(e,0):Vs|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Da(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Fc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case D:return(e=Rc(13,n,t,i)).elementType=D,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case A:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new zc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function jc(e){if(!e)return Ii;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=jc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Du(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Di.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Fi(t)):e=!1,Ea(t,n),qa(t,r,i),Ga(t,r,i,n),Du(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,jr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,jr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[vi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Ye()),0===(6&Ds)&&(qs=Ye()+500,ji()))}break;case 13:fc((function(){var t=Da(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Da(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,De=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=D(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=D(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!p)if(null!==r(c))p=!0,O(_);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function _(e,n){p=!1,y&&(y=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!D());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,T=-1,I=5,C=-1;function D(){return!(t.unstable_now()-C<I)}function N(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){m(N,0)};function O(e){S=e,E||(E=!0,x())}function P(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,O(_))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".bf655626.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="hidden-paradise:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/hidden-paradise/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkhidden_paradise=self.webpackChunkhidden_paradise||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return V},SDK_VERSION:function(){return Qe},_DEFAULT_ENTRY_NAME:function(){return Oe},_addComponent:function(){return Me},_addOrOverwriteComponent:function(){return Ue},_apps:function(){return Le},_clearComponents:function(){return je},_components:function(){return Fe},_getProvider:function(){return ze},_registerComponent:function(){return Ve},_removeServiceInstance:function(){return Be},deleteApp:function(){return $e},getApp:function(){return We},getApps:function(){return Xe},initializeApp:function(){return He},onLog:function(){return Ze},registerVersion:function(){return Je},setLogLevel:function(){return et}});var t=n(791),r=n(250);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=f;var d={};function v(){}function p(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,u)&&(m=k);var b=y.prototype=v.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function a(r,o,u,s){var c=h(e[r],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,u,s)}),(function(e){a("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return a("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:p,configurable:!0}),p.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),l(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(f(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),l(b,c,"Generator"),l(b,u,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function o(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){o(a,r,i,u,s,"next",e)}function s(e){o(a,r,i,u,s,"throw",e)}u(void 0)}))}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function p(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){var t=w();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function x(e,t,n){return x=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},x.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},E(e)}var S=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(S(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new I;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},I=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return p(n)}(E(Error)),C=function(e){return function(e){var t=S(e);return T.encodeByteArray(t,!0)}(e).replace(/\./g,"")},D=function(e){try{return T.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function N(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=N(e[n],t[n]));return e}var A=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},R=function(){try{return A()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/hidden-paradise",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&D(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},O=function(){var e;return null===(e=R())||void 0===e?void 0:e.config},P=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function L(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[C(JSON.stringify({alg:"none",type:"JWT"})),C(JSON.stringify(a)),""].join(".")}function F(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){var e,t=null===(e=R())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function U(){try{return"object"===typeof indexedDB}catch(e){return!1}}var V=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),z.prototype.create),a}return p(n)}(E(Error)),z=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(B,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new V(n,a,t)}}]),e}();var B=/\{\$([^}]+)}/g;function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function q(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(K(u)&&K(s)){if(!q(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function K(e){return null!==e&&"object"===typeof e}function G(e,t){var n=new Q(e,t);return n.subscribe.bind(n)}var Q=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return p(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=y(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function H(){}function W(e){return e&&e._delegate?e._delegate:e}function X(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Y="[DEFAULT]",J=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new P;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Y})}catch(s){}var t,n=y(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(X(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),X(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=y(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(ay){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Y?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(ay){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.component?this.component.multipleInstances?e:Y:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Z,ee,te=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new J(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ne=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ee||(ee={}));var re={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ie=ee.INFO,ae=(h(Z={},ee.DEBUG,"log"),h(Z,ee.VERBOSE,"log"),h(Z,ee.INFO,"info"),h(Z,ee.WARN,"warn"),h(Z,ee.ERROR,"error"),Z),oe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ae[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ue=function(){function e(t){d(this,e),this.name=t,this._logLevel=ie,this._logHandler=oe,this._userLogHandler=null,ne.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ee))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?re[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ee.DEBUG].concat(t)),this._logHandler.apply(this,[this,ee.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ee.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ee.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ee.INFO].concat(t)),this._logHandler.apply(this,[this,ee.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ee.WARN].concat(t)),this._logHandler.apply(this,[this,ee.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ee.ERROR].concat(t)),this._logHandler.apply(this,[this,ee.ERROR].concat(t))}}]),e}();function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le,fe,he=function(e,t){return t.some((function(t){return e instanceof t}))};var de=new WeakMap,ve=new WeakMap,pe=new WeakMap,ye=new WeakMap,me=new WeakMap;var ge={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return we(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ke(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_e(this),n),we(de.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return we(e.apply(_e(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[_e(this),t].concat(r));return pe.set(a,t.sort?t.sort():[t]),we(a)}}function be(e){return"function"===typeof e?ke(e):(e instanceof IDBTransaction&&function(e){if(!ve.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ve.set(e,t)}}(e),he(e,le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ge):e)}function we(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(we(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&de.set(t,e)})).catch((function(){})),me.set(t,e),t}(e);if(ye.has(e))return ye.get(e);var t=be(e);return t!==e&&(ye.set(e,t),me.set(t,e)),t}var _e=function(e){return me.get(e)};var xe,Ee,Se=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Ie=new Map;function Ce(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ie.get(t))return Ie.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Te.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Se.includes(n))){var o=function(){var e=u(a().mark((function e(t){var o,u,s,c,l,f,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ie.set(t,o),o}}}ge=function(e){return ce(ce({},e),{},{get:function(t,n,r){return Ce(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ce(t,n)||e.has(t,n)}})}(ge);var De=function(){function e(t){d(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ne="@firebase/app",Ae="0.9.9",Re=new ue("@firebase/app"),Oe="[DEFAULT]",Pe=(h(xe={},Ne,"fire-core"),h(xe,"@firebase/app-compat","fire-core-compat"),h(xe,"@firebase/analytics","fire-analytics"),h(xe,"@firebase/analytics-compat","fire-analytics-compat"),h(xe,"@firebase/app-check","fire-app-check"),h(xe,"@firebase/app-check-compat","fire-app-check-compat"),h(xe,"@firebase/auth","fire-auth"),h(xe,"@firebase/auth-compat","fire-auth-compat"),h(xe,"@firebase/database","fire-rtdb"),h(xe,"@firebase/database-compat","fire-rtdb-compat"),h(xe,"@firebase/functions","fire-fn"),h(xe,"@firebase/functions-compat","fire-fn-compat"),h(xe,"@firebase/installations","fire-iid"),h(xe,"@firebase/installations-compat","fire-iid-compat"),h(xe,"@firebase/messaging","fire-fcm"),h(xe,"@firebase/messaging-compat","fire-fcm-compat"),h(xe,"@firebase/performance","fire-perf"),h(xe,"@firebase/performance-compat","fire-perf-compat"),h(xe,"@firebase/remote-config","fire-rc"),h(xe,"@firebase/remote-config-compat","fire-rc-compat"),h(xe,"@firebase/storage","fire-gcs"),h(xe,"@firebase/storage-compat","fire-gcs-compat"),h(xe,"@firebase/firestore","fire-fst"),h(xe,"@firebase/firestore-compat","fire-fst-compat"),h(xe,"fire-js","fire-js"),h(xe,"firebase","fire-js-all"),xe),Le=new Map,Fe=new Map;function Me(e,t){try{e.container.addComponent(t)}catch(n){Re.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ue(e,t){e.container.addOrOverwriteComponent(t)}function Ve(e){var t=e.name;if(Fe.has(t))return Re.debug("There were multiple attempts to register component ".concat(t,".")),!1;Fe.set(t,e);var n,r=y(Le.values());try{for(r.s();!(n=r.n()).done;){Me(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ze(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Be(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oe;ze(e,t).clearInstance(n)}function je(){Fe.clear()}var qe=(h(Ee={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(Ee,"bad-app-name","Illegal App name: '{$appName}"),h(Ee,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(Ee,"app-deleted","Firebase App named '{$appName}' already deleted"),h(Ee,"no-options","Need to provide options, when not being deployed to hosting via source."),h(Ee,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(Ee,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(Ee,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(Ee,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(Ee,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(Ee,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ee),Ke=new z("app","Firebase",qe),Ge=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $("app",(function(){return i}),"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ke.create("app-deleted",{appName:this._name})}}]),e}(),Qe="9.21.0";function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Oe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ke.create("bad-app-name",{appName:String(i)});if(n||(n=O()),!n)throw Ke.create("no-options");var a=Le.get(i);if(a){if(q(n,a.options)&&q(r,a.config))return a;throw Ke.create("duplicate-app",{appName:i})}var o,u=new te(i),s=y(Fe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ge(n,r,u);return Le.set(i,l),l}function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=Le.get(e);if(!t&&e===Oe)return He();if(!t)throw Ke.create("no-app",{appName:e});return t}function Xe(){return Array.from(Le.values())}function $e(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Le.has(n)){e.next=6;break}return Le.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t,n){var r,i=null!==(r=Pe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Re.warn(u.join(" "))}Ve(new $("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ze(e,t){if(null!==e&&"function"!==typeof e)throw Ke.create("invalid-log-argument");!function(e,t){var n,r=y(ne);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=re[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ee[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function et(e){var t;t=e,ne.forEach((function(e){e.setLogLevel(t)}))}var tt="firebase-heartbeat-database",nt=1,rt="firebase-heartbeat-store",it=null;function at(){return it||(it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=we(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(we(u.result),e.oldVersion,e.newVersion,we(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(tt,nt,{upgrade:function(e,t){if(0===t)e.createObjectStore(rt)}}).catch((function(e){throw Ke.create("idb-open",{originalErrorMessage:e.message})}))),it}function ot(e){return ut.apply(this,arguments)}function ut(){return ut=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return n=e.sent,e.abrupt("return",n.transaction(rt).objectStore(rt).get(lt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof V?Re.warn(e.t0.message):(r=Ke.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Re.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ut.apply(this,arguments)}function st(e,t){return ct.apply(this,arguments)}function ct(){return ct=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return r=e.sent,i=r.transaction(rt,"readwrite"),o=i.objectStore(rt),e.next=8,o.put(n,lt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof V?Re.warn(e.t0.message):(u=Ke.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Re.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ct.apply(this,arguments)}function lt(e){return"".concat(e.name,"!").concat(e.options.appId)}var ft=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new yt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return p(e,[{key:"triggerHeartbeat",value:function(){var e=u(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ht(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ht(),n=dt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=C(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ht(){return(new Date).toISOString().substring(0,10)}function dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=y(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),mt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),mt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var vt,pt,yt=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ot(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",st(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",st(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(X(r.heartbeats),X(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function mt(e){return C(JSON.stringify({version:2,heartbeats:e})).length}vt="",Ve(new $("platform-logger",(function(e){return new De(e)}),"PRIVATE")),Ve(new $("heartbeat",(function(e){return new ft(e)}),"PRIVATE")),Je(Ne,Ae,vt),Je(Ne,Ae,"esm2017"),Je("fire-js","");var gt=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Me(t,new $("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),$e(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Me(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ue(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),kt=(h(pt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(pt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),pt),bt=new z("app-compat","Firebase",kt);var wt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=He(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(j(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Je,setLogLevel:et,onLog:Ze,apps:null,SDK_VERSION:Qe,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ve(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw bt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&N(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!j(n,e=e||Oe))throw bt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(gt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){N(n,e)},createSubscribe:G,ErrorFactory:z,deepExtend:N}),n}(),_t=new ue("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){_t.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var xt=self.firebase.SDK_VERSION;xt&&xt.indexOf("LITE")>=0&&_t.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Et=wt;!function(e){Je("@firebase/app-compat","0.2.9",e)}();function St(){return St="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},St.apply(this,arguments)}Et.registerVersion("firebase","9.21.0","app-compat");var Tt,It="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ct={},Dt=Dt||{},Nt=It||self;function At(){}function Rt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ot(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Pt="closure_uid_"+(1e9*Math.random()>>>0),Lt=0;function Ft(e,t,n){return e.call.apply(e.bind,arguments)}function Mt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ut(e,t,n){return(Ut=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ft:Mt).apply(null,arguments)}function Vt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Bt(){this.s=this.s,this.o=this.o}Bt.prototype.s=!1,Bt.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Pt)&&e[Pt]||(e[Pt]=++Lt))},Bt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var jt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function qt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Kt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Rt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Gt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Gt.prototype.h=function(){this.defaultPrevented=!0};var Qt=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Nt.addEventListener("test",At,t),Nt.removeEventListener("test",At,t)}catch(n){}return e}();function Ht(e){return/^[\s\xa0]*$/.test(e)}var Wt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Xt(e,t){return e<t?-1:e>t?1:0}function $t(){var e=Nt.navigator;return e&&(e=e.userAgent)?e:""}function Yt(e){return-1!=$t().indexOf(e)}function Jt(e){return Jt[" "](e),e}function Zt(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}Jt[" "]=At;var en,tn=Yt("Opera"),nn=Yt("Trident")||Yt("MSIE"),rn=Yt("Edge"),an=rn||nn,on=Yt("Gecko")&&!(-1!=$t().toLowerCase().indexOf("webkit")&&!Yt("Edge"))&&!(Yt("Trident")||Yt("MSIE"))&&!Yt("Edge"),un=-1!=$t().toLowerCase().indexOf("webkit")&&!Yt("Edge");function sn(){var e=Nt.document;return e?e.documentMode:void 0}e:{var cn="",ln=function(){var e=$t();return on?/rv:([^\);]+)(\)|;)/.exec(e):rn?/Edge\/([\d\.]+)/.exec(e):nn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):un?/WebKit\/(\S+)/.exec(e):tn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ln&&(cn=ln?ln[1]:""),nn){var fn=sn();if(null!=fn&&fn>parseFloat(cn)){en=String(fn);break e}}en=cn}var hn,dn={};if(Nt.document&&nn){var vn=sn();hn=vn||(parseInt(en,10)||void 0)}else hn=void 0;var pn=hn;function yn(e,t){if(Gt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(on){e:{try{Jt(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:mn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yn.$.h.call(this)}}zt(yn,Gt);var mn={2:"touch",3:"pen",4:"mouse"};yn.prototype.h=function(){yn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var gn="closure_listenable_"+(1e6*Math.random()|0),kn=0;function bn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++kn,this.fa=this.ia=!1}function wn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function _n(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xn(e){var t={};for(var n in e)t[n]=e[n];return t}var En="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<En.length;a++)n=En[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Tn(e){this.src=e,this.g={},this.h=0}function In(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=jt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(wn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Cn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Tn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Cn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new bn(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Dn="closure_lm_"+(1e6*Math.random()|0),Nn={};function An(e,t,n,r,i){if(r&&r.once)return On(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)An(e,t[a],n,r,i);return null}return n=zn(n),e&&e[gn]?e.O(t,n,Ot(r)?!!r.capture:!!r,i):Rn(e,t,n,!1,r,i)}function Rn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ot(i)?!!i.capture:!!i,u=Un(e);if(u||(e[Dn]=u=new Tn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Mn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Fn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function On(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)On(e,t[a],n,r,i);return null}return n=zn(n),e&&e[gn]?e.P(t,n,Ot(r)?!!r.capture:!!r,i):Rn(e,t,n,!0,r,i)}function Pn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Pn(e,t[a],n,r,i);else r=Ot(r)?!!r.capture:!!r,n=zn(n),e&&e[gn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Cn(a=e.g[t],n,r,i))&&(wn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Un(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Cn(t,n,r,i)),(n=-1<e?t[e]:null)&&Ln(n))}function Ln(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[gn])In(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Fn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Un(t))?(In(n,e),0==n.h&&(n.src=null,t[Dn]=null)):wn(e)}}}function Fn(e){return e in Nn?Nn[e]:Nn[e]="on"+e}function Mn(e,t){if(e.fa)e=!0;else{t=new yn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ln(e),e=n.call(r,t)}return e}function Un(e){return(e=e[Dn])instanceof Tn?e:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(e){return"function"===typeof e?e:(e[Vn]||(e[Vn]=function(t){return e.handleEvent(t)}),e[Vn])}function Bn(){Bt.call(this),this.i=new Tn(this),this.S=this,this.J=null}function jn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Gt(t,e);else if(t instanceof Gt)t.target=t.target||e;else{var i=t;Sn(t=new Gt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=qn(o,r,!0,t)&&i}if(i=qn(o=t.g=e,r,!0,t)&&i,i=qn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=qn(o=t.g=n[a],r,!1,t)&&i}function qn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&In(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}zt(Bn,Bt),Bn.prototype[gn]=!0,Bn.prototype.removeEventListener=function(e,t,n,r){Pn(this,e,t,n,r)},Bn.prototype.N=function(){if(Bn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)wn(n[r]);delete t.g[e],t.h--}}this.J=null},Bn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Bn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Kn=Nt.JSON.stringify;function Gn(){var e=Zn,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Qn,Hn=function(){function e(){d(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=Wn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Wn=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Xn}),(function(e){return e.reset()})),Xn=function(){function e(){d(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function $n(e){Nt.setTimeout((function(){throw e}),0)}function Yn(e,t){Qn||function(){var e=Nt.Promise.resolve(void 0);Qn=function(){e.then(er)}}(),Jn||(Qn(),Jn=!0),Zn.add(e,t)}var Jn=!1,Zn=new Hn;function er(){for(var e;e=Gn();){try{e.h.call(e.g)}catch(n){$n(n)}var t=Wn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Jn=!1}function tr(e,t){Bn.call(this),this.h=e||1,this.g=t||Nt,this.j=Ut(this.qb,this),this.l=Date.now()}function nr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function rr(e,t,n){if("function"===typeof e)n&&(e=Ut(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ut(e.handleEvent,e)}return 2147483647<Number(t)?-1:Nt.setTimeout(e,t||0)}function ir(e){e.g=rr((function(){e.g=null,e.i&&(e.i=!1,ir(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}zt(tr,Bn),(Tt=tr.prototype).ga=!1,Tt.T=null,Tt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),jn(this,"tick"),this.ga&&(nr(this),this.start()))}},Tt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.N=function(){tr.$.N.call(this),nr(this),delete this.g};var ar=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ir(this)}},{key:"N",value:function(){St(b(n.prototype),"N",this).call(this),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Bt);function or(e){Bt.call(this),this.h=e,this.g={}}zt(or,Bt);var ur=[];function sr(e,t,n,r){Array.isArray(n)||(n&&(ur[0]=n.toString()),n=ur);for(var i=0;i<n.length;i++){var a=An(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function cr(e){_n(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ln(e)}),e),e.g={}}function lr(){this.g=!0}function fr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Kn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}or.prototype.N=function(){or.$.N.call(this),cr(this)},or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lr.prototype.Ea=function(){this.g=!1},lr.prototype.info=function(){};var hr={},dr=null;function vr(){return dr=dr||new Bn}function pr(e){Gt.call(this,hr.Ta,e)}function yr(e){var t=vr();jn(t,new pr(t))}function mr(e,t){Gt.call(this,hr.STAT_EVENT,e),this.stat=t}function gr(e){var t=vr();jn(t,new mr(t,e))}function kr(e,t){Gt.call(this,hr.Ua,e),this.size=t}function br(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Nt.setTimeout((function(){e()}),t)}hr.Ta="serverreachability",zt(pr,Gt),hr.STAT_EVENT="statevent",zt(mr,Gt),hr.Ua="timingevent",zt(kr,Gt);var wr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_r={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xr(){}function Er(e){return e.h||(e.h=e.i())}function Sr(){}xr.prototype.h=null;var Tr,Ir={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Cr(){Gt.call(this,"d")}function Dr(){Gt.call(this,"c")}function Nr(){}function Ar(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new or(this),this.P=Or,e=an?125:void 0,this.V=new tr(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}zt(Cr,Gt),zt(Dr,Gt),zt(Nr,xr),Nr.prototype.g=function(){return new XMLHttpRequest},Nr.prototype.i=function(){return{}},Tr=new Nr;var Or=45e3,Pr={},Lr={};function Fr(e,t,n){e.L=1,e.v=ti($r(t)),e.s=n,e.S=!0,Mr(e,null)}function Mr(e,t){e.G=Date.now(),Br(e),e.A=$r(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),vi(n.i,"t",r),e.C=0,n=e.l.I,e.h=new Rr,e.g=pa(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ar(Ut(e.Pa,e,e.g),e.O)),sr(e.U,e.g,"readystatechange",e.nb),t=e.I?xn(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),yr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ur(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Vr(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=zr(e,n))==Lr){4==t&&(e.o=4,gr(14),i=!1),fr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Pr){e.o=4,gr(15),fr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}fr(e.j,e.m,r,null),Qr(e,r)}Ur(e)&&r!=Lr&&r!=Pr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,gr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ua(t),t.L=!0,gr(11))):(fr(e.j,e.m,n,"[Invalid Chunked Response]"),Gr(e),Kr(e))}function zr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Lr:(n=Number(t.substring(n,r)),isNaN(n)?Pr:(r+=1)+n>t.length?Lr:(t=t.substr(r,n),e.C=r+n,t))}function Br(e){e.Y=Date.now()+e.P,jr(e,e.P)}function jr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=br(Ut(e.lb,e),t)}function qr(e){e.B&&(Nt.clearTimeout(e.B),e.B=null)}function Kr(e){0==e.l.H||e.J||la(e.l,e)}function Gr(e){qr(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,nr(e.V),cr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function Qr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||_i(n.h,e)))if(!e.K&&_i(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ca(n),Zi(n)}oa(n),gr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=br(Ut(n.ib,n),6e3));if(1>=wi(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else ha(n,11)}else if((e.K||n.g==e)&&ca(n),!Ht(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(xi(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ei(r.G,r.F,h))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=va(r,r.I?r.oa:null,r.Y),d.K){Ei(r.h,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(qr(v),Br(v)),r.g=d}else aa(r);0<n.i.length&&ta(n)}else"stop"!=a[0]&&"close"!=a[0]||ha(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ha(n,7):Ji(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}yr()}catch(a){}}function Hr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Rt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Rt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Rt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Tt=Ar.prototype).setTimeout=function(e){this.P=e},Tt.nb=function(e){e=e.target;var t=this.M;t&&3==Qi(e)?t.l():this.Pa(e)},Tt.Pa=function(e){try{if(e==this.g)e:{var t=Qi(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||an||this.g&&(this.h.h||this.g.ja()||Hi(this.g)))){this.J||4!=t||7==n||yr(),qr(this);var r=this.g.da();this.aa=r;t:if(Ur(this)){var i=Hi(this.g);e="";var a=i.length,o=4==Qi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Gr(this),Kr(this);var u="";break t}this.h.i=new Nt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ht(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,gr(12),Gr(this),Kr(this);break e}fr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qr(this,r)}this.S?(Vr(this,t,u),an&&this.i&&3==t&&(sr(this.U,this.V,"tick",this.mb),this.V.start())):(fr(this.j,this.m,u,null),Qr(this,u)),4==t&&Gr(this),this.i&&!this.J&&(4==t?la(this.l,this):(this.i=!1,Br(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,gr(12)):(this.o=0,gr(13)),Gr(this),Kr(this)}}}catch(t){}},Tt.mb=function(){if(this.g){var e=Qi(this.g),t=this.g.ja();this.C<t.length&&(qr(this),Vr(this,e,t),this.i&&4!=e&&Br(this))}},Tt.cancel=function(){this.J=!0,Gr(this)},Tt.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(yr(),gr(17)),Gr(this),this.o=2,Kr(this)):jr(this,this.Y-e)};var Wr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xr(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xr){this.h=void 0!==t?t:e.h,Yr(this,e.j),this.s=e.s,this.g=e.g,Jr(this,e.m),this.l=e.l,t=e.i;var n=new li;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Zr(this,n),this.o=e.o}else e&&(n=String(e).match(Wr))?(this.h=!!t,Yr(this,n[1]||"",!0),this.s=ni(n[2]||""),this.g=ni(n[3]||"",!0),Jr(this,n[4]),this.l=ni(n[5]||"",!0),Zr(this,n[6]||"",!0),this.o=ni(n[7]||"")):(this.h=!!t,this.i=new li(null,this.h))}function $r(e){return new Xr(e)}function Yr(e,t,n){e.j=n?ni(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Jr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Zr(e,t,n){t instanceof li?(e.i=t,function(e,t){t&&!e.j&&(fi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(hi(this,t),vi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ri(t,si)),e.i=new li(t,e.h))}function ei(e,t,n){e.i.set(t,n)}function ti(e){return ei(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ni(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ri(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ii),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ii(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ri(t,ai,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ri(t,ai,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ri(n,"/"==n.charAt(0)?ui:oi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ri(n,ci)),e.join("")};var ai=/[#\/\?@]/g,oi=/[#\?:]/g,ui=/[#\?]/g,si=/[#\?@]/g,ci=/#/g;function li(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function hi(e,t){fi(e),t=pi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function di(e,t){return fi(e),t=pi(e,t),e.g.has(t)}function vi(e,t,n){hi(e,t),0<n.length&&(e.i=null,e.g.set(pi(e,t),qt(n)),e.h+=n.length)}function pi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Tt=li.prototype).add=function(e,t){fi(this),this.i=null,e=pi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Tt.forEach=function(e,t){fi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Tt.sa=function(){fi(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Tt.Z=function(e){fi(this);var t=[];if("string"===typeof e)di(this,e)&&(t=t.concat(this.g.get(pi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Tt.set=function(e,t){return fi(this),this.i=null,di(this,e=pi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Tt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var yi=p((function e(t,n){d(this,e),this.h=t,this.g=n}));function mi(e){this.l=e||ki,Nt.PerformanceNavigationTiming?e=0<(e=Nt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Nt.g&&Nt.g.Ka&&Nt.g.Ka()&&Nt.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var gi,ki=10;function bi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wi(e){return e.h?1:e.g?e.g.size:0}function _i(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xi(e,t){e.g?e.g.add(t):e.h=t}function Ei(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Si(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=y(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return qt(e.i)}function Ti(){}function Ii(){this.g=new Ti}function Ci(e,t,n){var r=n||"";try{Hr(e,(function(e,n){var i=e;Ot(e)&&(i=Kn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Di(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ni(e){this.l=e.fc||null,this.j=e.ob||!1}function Ai(e,t){Bn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ri,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mi.prototype.cancel=function(){if(this.i=Si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=y(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ti.prototype.stringify=function(e){return Nt.JSON.stringify(e,void 0)},Ti.prototype.parse=function(e){return Nt.JSON.parse(e,void 0)},zt(Ni,xr),Ni.prototype.g=function(){return new Ai(this.l,this.j)},Ni.prototype.i=(gi={},function(){return gi}),zt(Ai,Bn);var Ri=0;function Oi(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Pi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Li(e)}function Li(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Tt=Ai.prototype).open=function(e,t){if(this.readyState!=Ri)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Li(this)},Tt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Nt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pi(this)),this.readyState=Ri},Tt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Nt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oi(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Tt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pi(this):Li(this),3==this.readyState&&Oi(this)}},Tt.Za=function(e){this.g&&(this.response=this.responseText=e,Pi(this))},Tt.Ya=function(e){this.g&&(this.response=e,Pi(this))},Tt.ka=function(){this.g&&Pi(this)},Tt.setRequestHeader=function(e,t){this.v.append(e,t)},Tt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Fi=Nt.JSON.parse;function Mi(e){Bn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ui,this.L=this.M=!1}zt(Mi,Bn);var Ui="",Vi=/^https?$/i,zi=["POST","PUT"];function Bi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ji(e),Ki(e)}function ji(e){e.F||(e.F=!0,jn(e,"complete"),jn(e,"error"))}function qi(e){if(e.h&&"undefined"!=typeof Dt&&(!e.C[1]||4!=Qi(e)||2!=e.da()))if(e.v&&4==Qi(e))rr(e.La,0,e);else if(jn(e,"readystatechange"),4==Qi(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Wr)[1]||null;if(!a&&Nt.self&&Nt.self.location){var o=Nt.self.location.protocol;a=o.substr(0,o.length-1)}i=!Vi.test(a?a.toLowerCase():"")}t=i}if(t)jn(e,"complete"),jn(e,"success");else{e.m=6;try{var u=2<Qi(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.da()+"]",ji(e)}}finally{Ki(e)}}}function Ki(e,t){if(e.g){Gi(e);var n=e.g,r=e.C[0]?At:null;e.g=null,e.C=null,t||jn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Gi(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Nt.clearTimeout(e.A),e.A=null)}function Qi(e){return e.g?e.g.readyState:0}function Hi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ui:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ja){return null}}function Wi(e){var t="";return _n(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Xi(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wi(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ei(e,t,n))}function $i(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yi(e){this.Ga=0,this.i=[],this.j=new lr,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$i("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$i("baseRetryDelayMs",5e3,e),this.hb=$i("retryDelaySeedMs",1e4,e),this.eb=$i("forwardChannelMaxRetries",2,e),this.xa=$i("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new mi(e&&e.concurrentRequestLimit),this.Ja=new Ii,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Ji(e){if(ea(e),3==e.H){var t=e.W++,n=$r(e.G);ei(n,"SID",e.J),ei(n,"RID",t),ei(n,"TYPE","terminate"),ra(e,n),(t=new Ar(e,e.j,t,void 0)).L=2,t.v=ti($r(n)),n=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(n=Nt.navigator.sendBeacon(t.v.toString(),"")),!n&&Nt.Image&&((new Image).src=t.v,n=!0),n||(t.g=pa(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Br(t)}da(e)}function Zi(e){e.g&&(ua(e),e.g.cancel(),e.g=null)}function ea(e){Zi(e),e.u&&(Nt.clearTimeout(e.u),e.u=null),ca(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Nt.clearTimeout(e.m),e.m=null)}function ta(e){bi(e.h)||e.m||(e.m=!0,Yn(e.Na,e),e.C=0)}function na(e,t){var n;n=t?t.m:e.W++;var r=$r(e.G);ei(r,"SID",e.J),ei(r,"RID",n),ei(r,"AID",e.V),ra(e,r),e.o&&e.s&&Xi(r,e.o,e.s),n=new Ar(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=ia(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),xi(e.h,n),Fr(n,r,t)}function ra(e,t){e.ma&&_n(e.ma,(function(e,n){ei(t,n,e)})),e.l&&Hr({},(function(e,n){ei(t,n,e)}))}function ia(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Ut(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Ci(l,o,"req"+c+"_")}catch(co){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function aa(e){e.g||e.u||(e.ba=1,Yn(e.Ma,e),e.A=0)}function oa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=br(Ut(e.Ma,e),fa(e,e.A)),e.A++,!0)}function ua(e){null!=e.B&&(Nt.clearTimeout(e.B),e.B=null)}function sa(e){e.g=new Ar(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=$r(e.wa);ei(t,"RID","rpc"),ei(t,"SID",e.J),ei(t,"CI",e.M?"0":"1"),ei(t,"AID",e.V),ei(t,"TYPE","xmlhttp"),ra(e,t),e.o&&e.s&&Xi(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=ti($r(t)),n.s=null,n.S=!0,Mr(n,e)}function ca(e){null!=e.v&&(Nt.clearTimeout(e.v),e.v=null)}function la(e,t){var n=null;if(e.g==t){ca(e),ua(e),e.g=null;var r=2}else{if(!_i(e.h,t))return;n=t.F,Ei(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;jn(r=vr(),new kr(r,n)),ta(e)}else aa(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(wi(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=br(Ut(e.Na,e,t),fa(e,e.C)),e.C++,!0))}(e,t)||2==r&&oa(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ha(e,5);break;case 4:ha(e,10);break;case 3:ha(e,6);break;default:ha(e,2)}}function fa(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function ha(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Ut(e.pb,e);n||(n=new Xr("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Yr(n,"https"),ti(n)),function(e,t){var n=new lr;if(Nt.Image){var r=new Image;r.onload=Vt(Di,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Vt(Di,n,r,"TestLoadImage: error",!1,t),r.onabort=Vt(Di,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Vt(Di,n,r,"TestLoadImage: timeout",!1,t),Nt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else gr(2);e.H=0,e.l&&e.l.za(t),da(e),ea(e)}function da(e){if(e.H=0,e.pa=[],e.l){var t=Si(e.h);0==t.length&&0==e.i.length||(Kt(e.pa,t),Kt(e.pa,e.i),e.h.i.length=0,qt(e.i),e.i.length=0),e.l.ya()}}function va(e,t,n){var r=n instanceof Xr?$r(n):new Xr(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Jr(r,r.m);else{var i=Nt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Xr(null,void 0);r&&Yr(a,r),t&&(a.g=t),i&&Jr(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ei(r,n,t),ei(r,"VER",e.qa),ra(e,r),r}function pa(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Mi(new Ni({ob:!0})):new Mi(e.va)).Oa(e.I),t}function ya(){}function ma(){if(nn&&!(10<=Number(pn)))throw Error("Environmental error: no available transport.")}function ga(e,t){Bn.call(this),this.g=new Yi(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ht(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ht(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wa(this)}function ka(e){Cr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ba(){Dr.call(this),this.status=1}function wa(e){this.g=e}function _a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xa(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Ea(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Tt=Mi.prototype).Oa=function(e){this.M=e},Tt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Tr.g(),this.C=this.u?Er(this.u):Er(Tr),this.g.onreadystatechange=Ut(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Bi(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=y(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Nt.FormData&&e instanceof Nt.FormData,!(0<=jt(zi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=y(n);try{for(c.s();!(s=c.n()).done;){var f=l(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){c.e(v)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gi(this),0<this.B&&((this.L=function(e){return nn&&Zt(dn,9,(function(){for(var e=0,t=Wt(String(en)).split("."),n=Wt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Xt(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Xt(0==a[2].length,0==o[2].length)||Xt(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ut(this.ua,this)):this.A=rr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Bi(this,u)}},Tt.ua=function(){"undefined"!=typeof Dt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jn(this,"timeout"),this.abort(8))},Tt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,jn(this,"complete"),jn(this,"abort"),Ki(this))},Tt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ki(this,!0)),Mi.$.N.call(this)},Tt.La=function(){this.s||(this.G||this.v||this.l?qi(this):this.kb())},Tt.kb=function(){qi(this)},Tt.da=function(){try{return 2<Qi(this)?this.g.status:-1}catch(gi){return-1}},Tt.ja=function(){try{return this.g?this.g.responseText:""}catch(gi){return""}},Tt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Fi(t)}},Tt.Ia=function(){return this.m},Tt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Tt=Yi.prototype).qa=8,Tt.H=1,Tt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Ar(this,this.j,e,void 0),n=this.s;if(this.U&&(n?Sn(n=xn(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ia(this,t,r),ei(i=$r(this.G),"RID",e),ei(i,"CVER",22),this.F&&ei(i,"X-HTTP-Session-Id",this.F),ra(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Wi(n)))+"&"+r:this.o&&Xi(i,this.o,n)),xi(this.h,t),this.bb&&ei(i,"TYPE","init"),this.P?(ei(i,"$req",r),ei(i,"SID","null"),t.ba=!0,Fr(t,i,null)):Fr(t,i,r),this.H=2}}else 3==this.H&&(e?na(this,e):0==this.i.length||bi(this.h)||na(this))},Tt.Ma=function(){if(this.u=null,sa(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=br(Ut(this.jb,this),e)}},Tt.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,gr(10),Zi(this),sa(this))},Tt.ib=function(){null!=this.v&&(this.v=null,Zi(this),oa(this),gr(19))},Tt.pb=function(e){e?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))},(Tt=ya.prototype).Ba=function(){},Tt.Aa=function(){},Tt.za=function(){},Tt.ya=function(){},Tt.Va=function(){},ma.prototype.g=function(e,t){return new ga(e,t)},zt(ga,Bn),ga.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;gr(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=va(e,null,e.Y),ta(e)},ga.prototype.close=function(){Ji(this.g)},ga.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Kn(e),e=n);t.i.push(new yi(t.fb++,e)),3==t.H&&ta(t)},ga.prototype.N=function(){this.g.l=null,delete this.j,Ji(this.g),delete this.g,ga.$.N.call(this)},zt(ka,Cr),zt(ba,Dr),zt(wa,ya),wa.prototype.Ba=function(){jn(this.g,"a")},wa.prototype.Aa=function(e){jn(this.g,new ka(e))},wa.prototype.za=function(e){jn(this.g,new ba)},wa.prototype.ya=function(){jn(this.g,"b")},zt(_a,(function(){this.blockSize=-1})),_a.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_a.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)xa(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){xa(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){xa(this,r),i=0;break}}this.h=i,this.i+=t},_a.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Sa={};function Ta(e){return-128<=e&&128>e?Zt(Sa,e,(function(e){return new Ea([0|e],0>e?-1:0)})):new Ea([0|e],0>e?-1:0)}function Ia(e){if(isNaN(e)||!isFinite(e))return Da;if(0>e)return Pa(Ia(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ca;return new Ea(t,0)}var Ca=4294967296,Da=Ta(0),Na=Ta(1),Aa=Ta(16777216);function Ra(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Oa(e){return-1==e.h}function Pa(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ea(n,~e.h).add(Na)}function La(e,t){return e.add(Pa(t))}function Fa(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ma(e,t){this.g=e,this.h=t}function Ua(e,t){if(Ra(t))throw Error("division by zero");if(Ra(e))return new Ma(Da,Da);if(Oa(e))return t=Ua(Pa(e),t),new Ma(Pa(t.g),Pa(t.h));if(Oa(t))return t=Ua(e,Pa(t)),new Ma(Pa(t.g),t.h);if(30<e.g.length){if(Oa(e)||Oa(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Na,r=t;0>=r.X(e);)n=Va(n),r=Va(r);var i=za(n,1),a=za(r,1);for(r=za(r,2),n=za(n,2);!Ra(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=za(r,1),n=za(n,1)}return t=La(e,i.R(t)),new Ma(i,t)}for(i=Da;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Ia(n)).R(t);Oa(o)||0<o.X(e);)o=(a=Ia(n-=r)).R(t);Ra(a)&&(a=Na),i=i.add(a),e=La(e,o)}return new Ma(i,e)}function Va(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ea(n,e.h)}function za(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Ea(i,e.h)}(Tt=Ea.prototype).ea=function(){if(Oa(this))return-Pa(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ca+r)*t,t*=Ca}return e},Tt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ra(this))return"0";if(Oa(this))return"-"+Pa(this).toString(e);for(var t=Ia(Math.pow(e,6)),n=this,r="";;){var i=Ua(n,t).g,a=((0<(n=La(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ra(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Tt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Tt.X=function(e){return Oa(e=La(this,e))?-1:Ra(e)?0:1},Tt.abs=function(){return Oa(this)?Pa(this):this},Tt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Ea(n,-2147483648&n[n.length-1]?-1:0)},Tt.R=function(e){if(Ra(this)||Ra(e))return Da;if(Oa(this))return Oa(e)?Pa(this).R(Pa(e)):Pa(Pa(this).R(e));if(Oa(e))return Pa(this.R(Pa(e)));if(0>this.X(Aa)&&0>e.X(Aa))return Ia(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Fa(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Fa(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Fa(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Fa(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ea(n,0)},Tt.gb=function(e){return Ua(this,e).h},Tt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ea(n,this.h&e.h)},Tt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ea(n,this.h|e.h)},Tt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ea(n,this.h^e.h)},ma.prototype.createWebChannel=ma.prototype.g,ga.prototype.send=ga.prototype.u,ga.prototype.open=ga.prototype.m,ga.prototype.close=ga.prototype.close,wr.NO_ERROR=0,wr.TIMEOUT=8,wr.HTTP_ERROR=6,_r.COMPLETE="complete",Sr.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",Bn.prototype.listen=Bn.prototype.O,Mi.prototype.listenOnce=Mi.prototype.P,Mi.prototype.getLastError=Mi.prototype.Sa,Mi.prototype.getLastErrorCode=Mi.prototype.Ia,Mi.prototype.getStatus=Mi.prototype.da,Mi.prototype.getResponseJson=Mi.prototype.Wa,Mi.prototype.getResponseText=Mi.prototype.ja,Mi.prototype.send=Mi.prototype.ha,Mi.prototype.setWithCredentials=Mi.prototype.Oa,_a.prototype.digest=_a.prototype.l,_a.prototype.reset=_a.prototype.reset,_a.prototype.update=_a.prototype.j,Ea.prototype.add=Ea.prototype.add,Ea.prototype.multiply=Ea.prototype.R,Ea.prototype.modulo=Ea.prototype.gb,Ea.prototype.compare=Ea.prototype.X,Ea.prototype.toNumber=Ea.prototype.ea,Ea.prototype.toString=Ea.prototype.toString,Ea.prototype.getBits=Ea.prototype.D,Ea.fromNumber=Ia,Ea.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Pa(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ia(Math.pow(n,8)),i=Da,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Ia(Math.pow(n,o)),i=i.R(o).add(Ia(u))):i=(i=i.R(r)).add(Ia(u))}return i};var Ba=Ct.createWebChannelTransport=function(){return new ma},ja=Ct.getStatEventTarget=function(){return vr()},qa=Ct.ErrorCode=wr,Ka=Ct.EventType=_r,Ga=Ct.Event=hr,Qa=Ct.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ha=Ct.FetchXmlHttpFactory=Ni,Wa=Ct.WebChannel=Sr,Xa=Ct.XhrIo=Mi,$a=Ct.Md5=_a,Ya=Ct.Integer=Ea,Ja="@firebase/firestore",Za=function(){function e(t){d(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Za.UNAUTHENTICATED=new Za(null),Za.GOOGLE_CREDENTIALS=new Za("google-credentials-uid"),Za.FIRST_PARTY=new Za("first-party-uid"),Za.MOCK_USER=new Za("mock-user");var eo="9.21.0",to=new ue("@firebase/firestore");function no(){return to.logLevel}function ro(e){if(to.logLevel<=ee.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.debug.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(X(i)))}}function io(e){if(to.logLevel<=ee.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.error.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(X(i)))}}function ao(e){if(to.logLevel<=ee.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(oo);to.warn.apply(to,["Firestore (".concat(eo,"): ").concat(e)].concat(X(i)))}}function oo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(eo,") INTERNAL ASSERTION FAILED: ")+e;throw io(t),new Error(t)}function so(e,t){e||uo()}function co(e,t){return e}var lo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fo=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(V),ho=p((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vo=p((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),po=function(){function e(){d(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Za.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),yo=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),mo=function(){function e(t){d(this,e),this.t=t,this.currentUser=Za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new ho;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new ho,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){ro("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(ro("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ho)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ro("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(so("string"==typeof n.accessToken),new vo(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return so(null===e||"string"==typeof e),new Za(e)}}]),e}(),go=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Za.FIRST_PARTY,this.g=new Map}return p(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),ko=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new go(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Za.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bo=p((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wo=function(){function e(t){d(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ro("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,ro("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ro("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):ro("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(so("string"==typeof t.token),e.T=t.token,new bo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function _o(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var xo=function(){function e(){d(this,e)}return p(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=_o(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Eo(e,t){return e<t?-1:e>t?1:0}function So(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function To(e){return e+"\0"}var Io=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fo(lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fo(lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fo(lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fo(lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Eo(this.nanoseconds,e.nanoseconds):Eo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Co=function(){function e(t){d(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Io(0,0))}},{key:"max",value:function(){return new e(new Io(253402300799,999999999))}}]),e}(),Do=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&uo(),void 0===r?r=t.length-n:r>t.length-n&&uo(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),No=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new fo(lo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,X(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Do),Ao=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ro=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ao.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fo(lo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new fo(lo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new fo(lo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new fo(lo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Do),Oo=function(){function e(t){d(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===No.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(No.fromString(t))}},{key:"fromName",value:function(t){return new e(No.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(No.emptyPath())}},{key:"comparator",value:function(e,t){return No.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new No(t.slice()))}}]),e}(),Po=p((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Lo(e){return e.fields.find((function(e){return 2===e.kind}))}function Fo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Po.UNKNOWN_ID=-1;var Mo=p((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Uo=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,Bo.min())}}]),e}();function Vo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Co.fromTimestamp(1e9===r?new Io(n+1,0):new Io(n,r));return new Bo(i,Oo.empty(),t)}function zo(e){return new Bo(e.readTime,e.key,-1)}var Bo=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(Co.min(),Oo.empty(),-1)}},{key:"max",value:function(){return new e(Co.max(),Oo.empty(),-1)}}]),e}();function jo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Oo.comparator(e.documentKey,t.documentKey))?n:Eo(e.largestBatchId,t.largestBatchId)}var qo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ko=function(){function e(){d(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Go(e){return Qo.apply(this,arguments)}function Qo(){return(Qo=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===lo.FAILED_PRECONDITION&&t.message===qo){e.next=2;break}throw t;case 2:ro("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ho=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&uo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=y(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Wo=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new ho,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Yo(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=nu(e.target.error);r.R.reject(new Yo(t,n))}}return p(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(ro("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zo(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Yo(n,t)}}}]),e}(),Xo=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(F())&&io("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"O",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ro("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Yo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fo(lo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fo(lo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Yo(t,n))},i.onupgradeneeded=function(e){ro("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.$(t,i.transaction,e.oldVersion,n.version).next((function(){ro("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s,c,l=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,u=0,s=a().mark((function e(){var n,s,c,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,l.O(t);case 4:return l.db=e.sent,n=Wo.open(l.db,t,o?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Ho.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.v;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,f="FirebaseError"!==c.name&&u<3,ro("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),l.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ro("SimpleDb","Removing database:",e),eu(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!U())return!1;if(e.C())return!0;var t=F(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/hidden-paradise",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),$o=function(){function e(t){d(this,e),this.L=t,this.q=!1,this.U=null}return p(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return eu(this.L.delete())}}]),e}(),Yo=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,lo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}(fo);function Jo(e){return"IndexedDbTransactionError"===e.name}var Zo=function(){function e(t){d(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ro("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ro("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eu(n)}},{key:"add",value:function(e){return ro("SimpleDb","ADD",this.store.name,e,e),eu(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eu(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ro("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ro("SimpleDb","DELETE",this.store.name,e),eu(this.store.delete(e))}},{key:"count",value:function(){return ro("SimpleDb","COUNT",this.store.name),eu(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ho((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ho((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){ro("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Ho((function(n,r){t.onerror=function(e){var t=nu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Ho((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new $o(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ho){var u=o.catch((function(e){return a.done(),Ho.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Ho.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eu(e){return new Ho((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nu(e.target.error);n(t)}}))}var tu=!1;function nu(e){var t=Xo.S(F());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tu||(tu=!0,setTimeout((function(){throw r}),0)),r}}return e}var ru=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return p(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;ro("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ro,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Jo(e.t4)){e.next=17;break}ro("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Go(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),iu=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return p(e,[{key:"nt",value:function(){var e=u(a().mark((function e(){var t,n=this,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ho.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ro("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return ro("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=zo(t);jo(r,n)>0&&(n=r)})),new Bo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),au=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function ou(e){return null==e}function uu(e){return 0===e&&1/e==-1/0}function su(e){return"number"==typeof e&&Number.isInteger(e)&&!uu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function cu(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=fu(t)),t=lu(e.get(n),t);return fu(t)}function lu(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function fu(e){return e+"\x01\x01"}function hu(e){var t=e.length;if(so(t>=2),2===t)return so("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),No.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&uo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:uo()}a=o+2}return new No(r)}au.ct=-1;var du=["userId","batchId"];function vu(e,t){return[e,cu(t)]}function pu(e,t,n){return[e,cu(t),n]}var yu={},mu=["prefixPath","collectionGroup","readTime","documentId"],gu=["prefixPath","collectionGroup","documentId"],ku=["collectionGroup","readTime","prefixPath","documentId"],bu=["canonicalId","targetId"],wu=["targetId","path"],_u=["path","targetId"],xu=["collectionId","parent"],Eu=["indexId","uid"],Su=["uid","sequenceNumber"],Tu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Iu=["indexId","uid","orderedDocumentKey"],Cu=["userId","collectionPath","documentId"],Du=["userId","collectionPath","largestBatchId"],Nu=["userId","collectionGroup","largestBatchId"],Au=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ru=[].concat(X(Au),["documentOverlays"]),Ou=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pu=Ou,Lu=[].concat(Pu,["indexConfiguration","indexState","indexEntries"]),Fu=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return p(n)}(Ko);function Mu(e,t){var n=co(e);return Xo.M(n.at,t)}function Uu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Bu=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||qu.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ju(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ju(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ju(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ju(this.root,e,this.comparator,!0)}}]),e}(),ju=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),qu=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw uo();if(this.right.isRed())throw uo();var e=this.left.check();if(e!==this.right.check())throw uo();return e+(this.isRed()?0:1)}}]),e}();qu.EMPTY=null,qu.RED=!0,qu.BLACK=!1,qu.EMPTY=new(function(){function e(){d(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw uo()}},{key:"value",get:function(){throw uo()}},{key:"color",get:function(){throw uo()}},{key:"left",get:function(){throw uo()}},{key:"right",get:function(){throw uo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ku=function(){function e(t){d(this,e),this.comparator=t,this.data=new Bu(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Gu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Gu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Gu=function(){function e(t){d(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Qu(e){return e.hasNext()?e.getNext():void 0}var Hu=function(){function e(t){d(this,e),this.fields=t,t.sort(Ro.comparator)}return p(e,[{key:"unionWith",value:function(t){var n,r=new Ku(Ro.comparator),i=y(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=y(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=y(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return So(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Wu=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return p(n)}(E(Error));var Xu=function(e){function t(e){d(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Eo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Wu("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Xu.EMPTY_BYTE_STRING=new Xu("");var $u=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yu(e){if(so(!!e),"string"==typeof e){var t=0,n=$u.exec(e);if(so(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ju(e.seconds),nanos:Ju(e.nanos)}}function Ju(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zu(e){return"string"==typeof e?Xu.fromBase64String(e):Xu.fromUint8Array(e)}function es(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ts(e){var t=e.mapValue.fields.__previous_value__;return es(t)?ts(t):t}function ns(e){var t=Yu(e.mapValue.fields.__local_write_time__.timestampValue);return new Io(t.seconds,t.nanos)}var rs=p((function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),is=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),as={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},os={nullValue:"NULL_VALUE"};function us(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?es(e)?4:ws(e)?9007199254740991:10:uo()}function ss(e,t){if(e===t)return!0;var n=us(e);if(n!==us(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ns(e).isEqual(ns(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Yu(e.timestampValue),r=Yu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zu(e.bytesValue).isEqual(Zu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ju(e.geoPointValue.latitude)===Ju(t.geoPointValue.latitude)&&Ju(e.geoPointValue.longitude)===Ju(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ju(e.integerValue)===Ju(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ju(e.doubleValue),r=Ju(t.doubleValue);return n===r?uu(n)===uu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return So(e.arrayValue.values||[],t.arrayValue.values||[],ss);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uu(n)!==Uu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ss(n[i],r[i])))return!1;return!0}(e,t);default:return uo()}}function cs(e,t){return void 0!==(e.values||[]).find((function(e){return ss(e,t)}))}function ls(e,t){if(e===t)return 0;var n=us(e),r=us(t);if(n!==r)return Eo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Eo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ju(e.integerValue||e.doubleValue),r=Ju(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fs(e.timestampValue,t.timestampValue);case 4:return fs(ns(e),ns(t));case 5:return Eo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Zu(e),r=Zu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Eo(n[i],r[i]);if(0!==a)return a}return Eo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Eo(Ju(e.latitude),Ju(t.latitude));return 0!==n?n:Eo(Ju(e.longitude),Ju(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ls(n[i],r[i]);if(a)return a}return Eo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===as.mapValue&&t===as.mapValue)return 0;if(e===as.mapValue)return 1;if(t===as.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Eo(r[o],a[o]);if(0!==u)return u;var s=ls(n[r[o]],i[a[o]]);if(0!==s)return s}return Eo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw uo()}}function fs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Eo(e,t);var n=Yu(e),r=Yu(t),i=Eo(n.seconds,r.seconds);return 0!==i?i:Eo(n.nanos,r.nanos)}function hs(e){return ds(e)}function ds(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Yu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Zu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Oo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=y(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ds(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=y(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ds(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):uo();var t,n}function vs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ps(e){return!!e&&"integerValue"in e}function ys(e){return!!e&&"arrayValue"in e}function ms(e){return!!e&&"nullValue"in e}function gs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ks(e){return!!e&&"mapValue"in e}function bs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Vu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bs(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ws(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function _s(e){return"nullValue"in e?os:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?vs(is.empty(),Oo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:uo()}function xs(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?vs(is.empty(),Oo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?as:uo()}function Es(e,t){var n=ls(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ss(e,t){var n=ls(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ts=function(){function e(t){d(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ks(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bs(t)}},{key:"setAll",value:function(e){var t=this,n=Ro.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ks(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ss(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ks(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Vu(t,(function(t,n){return e[t]=n}));var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Is(e){var t=[];return Vu(e.fields,(function(e,n){var r=new Ro([e]);if(ks(n)){var i=Is(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=y(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Hu(t)}var Cs=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Co.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Co.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Co.min(),Co.min(),Co.min(),Ts.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Co.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Co.min(),Co.min(),Ts.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Co.min(),Co.min(),Ts.empty(),2)}}]),e}(),Ds=p((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function Ns(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Oo.comparator(Oo.fromName(o.referenceValue),n.key):ls(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function As(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ss(e.position[n],t.position[n]))return!1;return!0}var Rs=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Os(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ps=p((function e(){d(this,e)})),Ls=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ls(t,this.value)):null!==t&&us(this.value)===us(t)&&this.matchesComparison(ls(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return uo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Gs(e,t,r):"array-contains"===t?new Xs(e,r):"in"===t?new $s(e,r):"not-in"===t?new Ys(e,r):"array-contains-any"===t?new Js(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Qs(e,n):new Hs(e,n)}}]),n}(Ps),Fs=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return p(n,[{key:"matches",value:function(e){return Ms(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=y(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ps);function Ms(e){return"and"===e.op}function Us(e){return"or"===e.op}function Vs(e){return zs(e)&&Ms(e)}function zs(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Fs)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Bs(e){if(e instanceof Ls)return e.field.canonicalString()+e.op.toString()+hs(e.value);if(Vs(e))return e.filters.map((function(e){return Bs(e)})).join(",");var t=e.filters.map((function(e){return Bs(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function js(e,t){return e instanceof Ls?function(e,t){return t instanceof Ls&&e.op===t.op&&e.field.isEqual(t.field)&&ss(e.value,t.value)}(e,t):e instanceof Fs?function(e,t){return t instanceof Fs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&js(n,t.filters[r])}),!0)}(e,t):void uo()}function qs(e,t){var n=e.filters.concat(t);return Fs.create(n,e.op)}function Ks(e){return e instanceof Ls?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(hs(e.value))}(e):e instanceof Fs?function(e){return e.op.toString()+" {"+e.getFilters().map(Ks).join(" ,")+"}"}(e):"Filter"}var Gs=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=Oo.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=Oo.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ls),Qs=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Ws("in",r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ls),Hs=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Ws("not-in",r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ls);function Ws(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Oo.fromName(e.referenceValue)}))}var Xs=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ys(t)&&cs(t.arrayValue,this.value)}}]),n}(Ls),$s=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cs(this.value.arrayValue,t)}}]),n}(Ls),Ys=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(cs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cs(this.value.arrayValue,t)}}]),n}(Ls),Js=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ys(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return cs(t.value.arrayValue,e)}))}}]),n}(Ls),Zs=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function ec(e){return new Zs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function tc(e){var t=co(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Bs(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ou(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return hs(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return hs(e)})).join(",")),t.ft=n}return t.ft}function nc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Os(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!js(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!As(e.startAt,t.startAt)&&As(e.endAt,t.endAt)}function rc(e){return Oo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ic(e,t){return e.filters.filter((function(e){return e instanceof Ls&&e.field.isEqual(t)}))}function ac(e,t,n){var r,i=os,a=!0,o=y(ic(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=os,c=!0;switch(u.op){case"<":case"<=":s=_s(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=os}Es({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Es({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function oc(e,t,n){var r,i=as,a=!0,o=y(ic(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=as,c=!0;switch(u.op){case">=":case">":s=xs(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=as}Ss({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ss({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var uc=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function sc(e,t,n,r,i,a,o,u){return new uc(e,t,n,r,i,a,o,u)}function cc(e){return new uc(e)}function lc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function hc(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function dc(e){return null!==e.collectionGroup}function vc(e){var t=co(e);if(null===t.dt){t.dt=[];var n=hc(t),r=fc(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Rs(n)),t.dt.push(new Rs(Ro.keyField(),"asc"));else{var i,a=!1,o=y(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Rs(Ro.keyField(),s))}}}return t.dt}function pc(e){var t=co(e);if(!t._t)if("F"===t.limitType)t._t=ec(t.path,t.collectionGroup,vc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=y(vc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Rs(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ds(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ds(t.startAt.position,t.startAt.inclusive):null;t._t=ec(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function yc(e,t){t.getFirstInequalityField(),hc(e);var n=e.filters.concat([t]);return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function mc(e,t,n){return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gc(e,t){return nc(pc(e),pc(t))&&e.limitType===t.limitType}function kc(e){return"".concat(tc(pc(e)),"|lt:").concat(e.limitType)}function bc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ks(e)})).join(", "),"]")),ou(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return hs(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return hs(e)})).join(",")),"Target(".concat(t,")")}(pc(e)),"; limitType=").concat(e.limitType,")")}function wc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Oo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=y(vc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ns(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vc(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ns(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vc(e),t))}(e,t)}function _c(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xc(e){return function(t,n){var r,i=!1,a=y(vc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ec(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Ec(e,t,n){var r=e.field.isKeyField()?Oo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ls(r,i):uo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return uo()}}var Sc=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Vu(this.inner,(function(t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return zu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Tc=new Bu(Oo.comparator);function Ic(){return Tc}var Cc=new Bu(Oo.comparator);function Dc(){for(var e=Cc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Nc(e){var t=Cc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ac(){return Oc()}function Rc(){return Oc()}function Oc(){return new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Pc=new Bu(Oo.comparator),Lc=new Ku(Oo.comparator);function Fc(){for(var e=Lc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Mc=new Ku(Eo);function Uc(){return Mc}function Vc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(t)?"-0":t}}function zc(e){return{integerValue:""+e}}function Bc(e,t){return su(t)?zc(t):Vc(e,t)}var jc=p((function e(){d(this,e),this._=void 0}));function qc(e,t,n){return e instanceof Qc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&es(t)&&(t=ts(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hc?Wc(e,t):e instanceof Xc?$c(e,t):function(e,t){var n=Gc(e,t),r=Jc(n)+Jc(e.wt);return ps(n)&&ps(e.wt)?zc(r):Vc(e.serializer,r)}(e,t)}function Kc(e,t,n){return e instanceof Hc?Wc(e,t):e instanceof Xc?$c(e,t):n}function Gc(e,t){return e instanceof Yc?ps(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Qc=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(jc),Hc=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return p(n)}(jc);function Wc(e,t){var n,r=Zc(t),i=y(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ss(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Xc=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return p(n)}(jc);function $c(e,t){var n,r=Zc(t),i=y(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ss(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Yc=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.wt=r,i}return p(n)}(jc);function Jc(e){return Ju(e.integerValue||e.doubleValue)}function Zc(e){return ys(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var el=p((function e(t,n){d(this,e),this.field=t,this.transform=n}));var tl=p((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),nl=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function rl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var il=p((function e(){d(this,e)}));function al(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ml(e.key,nl.none()):new ll(e.key,e.data,nl.none());var n,r=e.data,i=Ts.empty(),a=new Ku(Ro.comparator),o=y(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new fl(e.key,i,new Hu(a.toArray()),nl.none())}function ol(e,t,n){e instanceof ll?function(e,t,n){var r=e.value.clone(),i=dl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof fl?function(e,t,n){if(rl(e.precondition,t)){var r=dl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(hl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ul(e,t,n,r){return e instanceof ll?function(e,t,n,r){if(!rl(e.precondition,t))return n;var i=e.value.clone(),a=vl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof fl?function(e,t,n,r){if(!rl(e.precondition,t))return n;var i=vl(e.fieldTransforms,r,t),a=t.data;return a.setAll(hl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return rl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function sl(e,t){var n,r=null,i=y(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Gc(a.transform,o||null);null!=u&&(null===r&&(r=Ts.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function cl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&So(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hc&&t instanceof Hc||e instanceof Xc&&t instanceof Xc?So(e.elements,t.elements,ss):e instanceof Yc&&t instanceof Yc?ss(e.wt,t.wt):e instanceof Qc&&t instanceof Qc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ll=function(e){k(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(il),fl=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return p(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(il);function hl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function dl(e,t,n){var r=new Map;so(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Kc(o,u,n[i]))}return r}function vl(e,t,n){var r,i=new Map,a=y(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,qc(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var pl,yl,ml=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(il),gl=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(il),kl=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ol(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=y(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ul(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=y(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=ul(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Rc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=al(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Co.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Fc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(function(e,t){return cl(e,t)}))&&So(this.baseMutations,e.baseMutations,(function(e,t){return cl(e,t)}))}}]),e}(),bl=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){so(t.mutations.length===r.length);for(var i=Pc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),wl=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),_l=p((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function xl(e){switch(e){default:return uo();case lo.CANCELLED:case lo.UNKNOWN:case lo.DEADLINE_EXCEEDED:case lo.RESOURCE_EXHAUSTED:case lo.INTERNAL:case lo.UNAVAILABLE:case lo.UNAUTHENTICATED:return!1;case lo.INVALID_ARGUMENT:case lo.NOT_FOUND:case lo.ALREADY_EXISTS:case lo.PERMISSION_DENIED:case lo.FAILED_PRECONDITION:case lo.ABORTED:case lo.OUT_OF_RANGE:case lo.UNIMPLEMENTED:case lo.DATA_LOSS:return!0}}function El(e){if(void 0===e)return io("GRPC error has no .code"),lo.UNKNOWN;switch(e){case pl.OK:return lo.OK;case pl.CANCELLED:return lo.CANCELLED;case pl.UNKNOWN:return lo.UNKNOWN;case pl.DEADLINE_EXCEEDED:return lo.DEADLINE_EXCEEDED;case pl.RESOURCE_EXHAUSTED:return lo.RESOURCE_EXHAUSTED;case pl.INTERNAL:return lo.INTERNAL;case pl.UNAVAILABLE:return lo.UNAVAILABLE;case pl.UNAUTHENTICATED:return lo.UNAUTHENTICATED;case pl.INVALID_ARGUMENT:return lo.INVALID_ARGUMENT;case pl.NOT_FOUND:return lo.NOT_FOUND;case pl.ALREADY_EXISTS:return lo.ALREADY_EXISTS;case pl.PERMISSION_DENIED:return lo.PERMISSION_DENIED;case pl.FAILED_PRECONDITION:return lo.FAILED_PRECONDITION;case pl.ABORTED:return lo.ABORTED;case pl.OUT_OF_RANGE:return lo.OUT_OF_RANGE;case pl.UNIMPLEMENTED:return lo.UNIMPLEMENTED;case pl.DATA_LOSS:return lo.DATA_LOSS;default:return uo()}}(yl=pl||(pl={}))[yl.OK=0]="OK",yl[yl.CANCELLED=1]="CANCELLED",yl[yl.UNKNOWN=2]="UNKNOWN",yl[yl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yl[yl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yl[yl.NOT_FOUND=5]="NOT_FOUND",yl[yl.ALREADY_EXISTS=6]="ALREADY_EXISTS",yl[yl.PERMISSION_DENIED=7]="PERMISSION_DENIED",yl[yl.UNAUTHENTICATED=16]="UNAUTHENTICATED",yl[yl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yl[yl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yl[yl.ABORTED=10]="ABORTED",yl[yl.OUT_OF_RANGE=11]="OUT_OF_RANGE",yl[yl.UNIMPLEMENTED=12]="UNIMPLEMENTED",yl[yl.INTERNAL=13]="INTERNAL",yl[yl.UNAVAILABLE=14]="UNAVAILABLE",yl[yl.DATA_LOSS=15]="DATA_LOSS";var Sl=function(){function e(){d(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return p(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Tl}},{key:"getOrCreateInstance",value:function(){return null===Tl&&(Tl=new e),Tl}}]),e}(),Tl=null;function Il(){return new TextEncoder}var Cl=new Ya([4294967295,4294967295],0);function Dl(e){var t=Il().encode(e),n=new $a;return n.update(t),new Uint8Array(n.digest())}function Nl(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Ya([n,r],0),new Ya([i,a],0)]}var Al=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl("Invalid padding: ".concat(n));if(r<0)throw new Rl("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Rl("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Rl("Invalid padding when bitmap length is 0: ".concat(n));this.yt=8*t.length-n,this.It=Ya.fromNumber(this.yt)}return p(e,[{key:"Tt",value:function(e,t,n){var r=e.add(t.multiply(Ya.fromNumber(n)));return 1===r.compare(Cl)&&(r=new Ya([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}},{key:"Et",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"At",value:function(e){if(0===this.yt)return!1;for(var t=l(Nl(Dl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);if(!this.Et(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.yt)for(var t=l(Nl(Dl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Rl=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return p(n)}(E(Error)),Ol=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Pl.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Co.min(),i,new Bu(Eo),Ic(),Fc())}}]),e}(),Pl=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Fc(),Fc(),Fc())}}]),e}(),Ll=p((function e(t,n,r,i){d(this,e),this.vt=t,this.removedTargetIds=n,this.key=r,this.Pt=i})),Fl=p((function e(t,n){d(this,e),this.targetId=t,this.bt=n})),Ml=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ul=function(){function e(){d(this,e),this.Vt=0,this.St=Bl(),this.Dt=Xu.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}return p(e,[{key:"current",get:function(){return this.Ct}},{key:"resumeToken",get:function(){return this.Dt}},{key:"Nt",get:function(){return 0!==this.Vt}},{key:"kt",get:function(){return this.xt}},{key:"Mt",value:function(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}},{key:"Ot",value:function(){var e=Fc(),t=Fc(),n=Fc();return this.St.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:uo()}})),new Pl(this.Dt,this.Ct,e,t,n)}},{key:"$t",value:function(){this.xt=!1,this.St=Bl()}},{key:"Ft",value:function(e,t){this.xt=!0,this.St=this.St.insert(e,t)}},{key:"Bt",value:function(e){this.xt=!0,this.St=this.St.remove(e)}},{key:"Lt",value:function(){this.Vt+=1}},{key:"qt",value:function(){this.Vt-=1}},{key:"Ut",value:function(){this.xt=!0,this.Ct=!0}}]),e}(),Vl=function(){function e(t){d(this,e),this.Kt=t,this.Gt=new Map,this.Qt=Ic(),this.jt=zl(),this.zt=new Bu(Eo)}return p(e,[{key:"Wt",value:function(e){var t,n=y(e.vt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Pt&&e.Pt.isFoundDocument()?this.Ht(r,e.Pt):this.Jt(r,e.key,e.Pt)}}catch(u){n.e(u)}finally{n.f()}var i,a=y(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Jt(o,e.key,e.Pt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Yt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Xt(n);switch(e.state){case 0:t.Zt(n)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||t.removeTarget(n);break;case 3:t.Zt(n)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:t.Zt(n)&&(t.te(n),r.Mt(e.resumeToken));break;default:uo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((function(e,r){n.Zt(r)&&t(r)}))}},{key:"ee",value:function(e){var t,n=e.targetId,r=e.bt.count,i=this.ne(n);if(i){var a=i.target;if(rc(a))if(0===r){var o=new Oo(a.path);this.Jt(n,o,Cs.newNoDocument(o,Co.min()))}else so(1===r);else{var u=this.se(n);if(u!==r){var s=this.ie(e,u);if(0!==s){this.te(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(n,c)}null===(t=Sl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.bt))}}}}},{key:"ie",value:function(e,t){var n=e.bt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Zu(c).toUint8Array()}catch(e){if(e instanceof Wu)return ao("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Al(a,f,d)}catch(e){return ao(e instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.yt?1:i!==t-this.re(e.targetId,o)?2:0}},{key:"re",value:function(e,t){var n=this,r=this.Kt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Kt.oe(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.At(o)||(n.Jt(e,r,null),i++)})),i}},{key:"ue",value:function(e){var t=this,n=new Map;this.Gt.forEach((function(r,i){var a=t.ne(i);if(a){if(r.current&&rc(a.target)){var o=new Oo(a.target.path);null!==t.Qt.get(o)||t.ce(i,o)||t.Jt(i,o,Cs.newNoDocument(o,e))}r.kt&&(n.set(i,r.Ot()),r.$t())}}));var r=Fc();this.jt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ne(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ol(e,n,this.zt,this.Qt,r);return this.Qt=Ic(),this.jt=zl(),this.zt=new Bu(Eo),i}},{key:"Ht",value:function(e,t){if(this.Zt(e)){var n=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,n),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}}},{key:"Jt",value:function(e,t,n){if(this.Zt(e)){var r=this.Xt(e);this.ce(e,t)?r.Ft(t,1):r.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),n&&(this.Qt=this.Qt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Gt.delete(e)}},{key:"se",value:function(e){var t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Lt",value:function(e){this.Xt(e).Lt()}},{key:"Xt",value:function(e){var t=this.Gt.get(e);return t||(t=new Ul,this.Gt.set(e,t)),t}},{key:"ae",value:function(e){var t=this.jt.get(e);return t||(t=new Ku(Eo),this.jt=this.jt.insert(e,t)),t}},{key:"Zt",value:function(e){var t=null!==this.ne(e);return t||ro("WatchChangeAggregator","Detected inactive target",e),t}},{key:"ne",value:function(e){var t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}},{key:"te",value:function(e){var t=this;this.Gt.set(e,new Ul),this.Kt.getRemoteKeysForTarget(e).forEach((function(n){t.Jt(e,n,null)}))}},{key:"ce",value:function(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}]),e}();function zl(){return new Bu(Oo.comparator)}function Bl(){return new Bu(Oo.comparator)}var jl={asc:"ASCENDING",desc:"DESCENDING"},ql={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kl={and:"AND",or:"OR"},Gl=p((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function Ql(e,t){return e.useProto3Json||ou(t)?t:{value:t}}function Hl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Wl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xl(e,t){return Hl(e,t.toTimestamp())}function $l(e){return so(!!e),Co.fromTimestamp(function(e){var t=Yu(e);return new Io(t.seconds,t.nanos)}(e))}function Yl(e,t){return function(e){return new No(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jl(e){var t=No.fromString(e);return so(_f(t)),t}function Zl(e,t){return Yl(e.databaseId,t.path)}function ef(e,t){var n=Jl(t);if(n.get(1)!==e.databaseId.projectId)throw new fo(lo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fo(lo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Oo(af(n))}function tf(e,t){return Yl(e.databaseId,t)}function nf(e){var t=Jl(e);return 4===t.length?No.emptyPath():af(t)}function rf(e){return new No(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function af(e){return so(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function of(e,t,n){return{name:Zl(e,t),fields:n.value.mapValue.fields}}function uf(e,t,n){var r=ef(e,t.name),i=$l(t.updateTime),a=t.createTime?$l(t.createTime):Co.min(),o=new Ts({mapValue:{fields:t.fields}}),u=Cs.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function sf(e,t){return"found"in t?function(e,t){so(!!t.found),t.found.name,t.found.updateTime;var n=ef(e,t.found.name),r=$l(t.found.updateTime),i=t.found.createTime?$l(t.found.createTime):Co.min(),a=new Ts({mapValue:{fields:t.found.fields}});return Cs.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){so(!!t.missing),so(!!t.readTime);var n=ef(e,t.missing),r=$l(t.readTime);return Cs.newNoDocument(n,r)}(e,t):uo()}function cf(e,t){var n;if(t instanceof ll)n={update:of(e,t.key,t.value)};else if(t instanceof ml)n={delete:Zl(e,t.key)};else if(t instanceof fl)n={update:of(e,t.key,t.data),updateMask:wf(t.fieldMask)};else{if(!(t instanceof gl))return uo();n={verify:Zl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Qc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yc)return{fieldPath:t.field.canonicalString(),increment:n.wt};throw uo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Xl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:uo()}(e,t.precondition)),n}function lf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?nl.updateTime($l(e.updateTime)):void 0!==e.exists?nl.exists(e.exists):nl.none()}(t.currentDocument):nl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)so("REQUEST_TIME"===t.setToServerValue),n=new Qc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Hc(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Xc(i)}else"increment"in t?n=new Yc(e,t.increment):uo();var a=Ro.fromServerFormat(t.fieldPath);return new el(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ef(e,t.update.name),a=new Ts({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Hu(t.map((function(e){return Ro.fromServerFormat(e)})))}(t.updateMask);return new fl(i,a,o,n,r)}return new ll(i,a,n,r)}if(t.delete){var u=ef(e,t.delete);return new ml(u,n)}if(t.verify){var s=ef(e,t.verify);return new gl(s,n)}return uo()}function ff(e,t){return{documents:[tf(e,t.path)]}}function hf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=tf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=tf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return bf(Fs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:gf(e.field),direction:pf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Ql(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function df(e){var t=nf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){so(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=vf(e);return t instanceof Fs&&Vs(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Rs(kf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return ou(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ds(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ds(n,t)}(n.endAt)),sc(t,i,u,o,s,"F",c,l)}function vf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=kf(e.unaryFilter.field);return Ls.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=kf(e.unaryFilter.field);return Ls.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=kf(e.unaryFilter.field);return Ls.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=kf(e.unaryFilter.field);return Ls.create(i,"!=",{nullValue:"NULL_VALUE"});default:return uo()}}(e):void 0!==e.fieldFilter?function(e){return Ls.create(kf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return uo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Fs.create(e.compositeFilter.filters.map((function(e){return vf(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return uo()}}(e.compositeFilter.op))}(e):uo()}function pf(e){return jl[e]}function yf(e){return ql[e]}function mf(e){return Kl[e]}function gf(e){return{fieldPath:e.canonicalString()}}function kf(e){return Ro.fromServerFormat(e.fieldPath)}function bf(e){return e instanceof Ls?function(e){if("=="===e.op){if(gs(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NAN"}};if(ms(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gs(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NOT_NAN"}};if(ms(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gf(e.field),op:yf(e.op),value:e.value}}}(e):e instanceof Fs?function(e){var t=e.getFilters().map((function(e){return bf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:mf(e.op),filters:t}}}(e):uo()}function wf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function _f(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var xf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Co.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Co.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Xu.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Ef=p((function e(t){d(this,e),this.le=t}));function Sf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Tf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Zl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Hl(e,t.version.toTimestamp()),createTime:Hl(e,t.createTime.toTimestamp())}}(e.le,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:If(t.version)};else{if(!t.isUnknownDocument())return uo();r.unknownDocument={path:n.path.toArray(),version:If(t.version)}}return r}function Tf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function If(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Cf(e){var t=new Io(e.seconds,e.nanoseconds);return Co.fromTimestamp(t)}function Df(e,t){for(var n=(t.baseMutations||[]).map((function(t){return lf(e.le,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return lf(e.le,t)})),u=Io.fromMillis(t.localWriteTimeMs);return new kl(t.batchId,u,n,o)}function Nf(e){var t,n,r=Cf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Cf(e.lastLimboFreeSnapshotVersion):Co.min();return void 0!==e.query.documents?(so(1===(n=e.query).documents.length),t=pc(cc(nf(n.documents[0])))):t=function(e){return pc(df(e))}(e.query),new xf(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Xu.fromBase64String(e.resumeToken))}function Af(e,t){var n,r=If(t.snapshotVersion),i=If(t.lastLimboFreeSnapshotVersion);n=rc(t.target)?ff(e.le,t.target):hf(e.le,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:tc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Rf(e){var t=df({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?mc(t,t.limit,"L"):t}function Of(e,t){return new wl(t.largestBatchId,lf(e.le,t.overlayMutation))}function Pf(e,t){var n=t.path.lastSegment();return[e,cu(t.path.popLast()),n]}function Lf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:If(r.readTime),documentKey:cu(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ff=function(){function e(){d(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Mf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Cf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Mf(e).put({bundleId:(n=t).id,createTime:If($l(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Uf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Rf(t.bundledQuery),readTime:Cf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Uf(e).put(function(e){return{name:e.name,readTime:If($l(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Mf(e){return Mu(e,"bundles")}function Uf(e){return Mu(e,"namedQueries")}var Vf=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return zf(e).get(Pf(this.userId,t)).next((function(e){return e?Of(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ac();return Ho.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new wl(t,a);i.push(r.de(e,o))})),Ho.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(cu(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(zf(e).J("collectionPathOverlayIndex",i))})),Ho.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Ac(),a=cu(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return zf(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Of(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Ac(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zf(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Of(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"de",value:function(e,t){return zf(e).put(function(e,t,n){var r=l(Pf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:cf(e.le,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"fe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function zf(e){return Mu(e,"documentOverlays")}var Bf=function(){function e(){d(this,e)}return p(e,[{key:"_e",value:function(e,t){this.we(e,t),t.me()}},{key:"we",value:function(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Ju(e.integerValue));else if("doubleValue"in e){var n=Ju(e.doubleValue);isNaN(n)?this.ge(t,13):(this.ge(t,15),uu(n)?t.ye(0):t.ye(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe("".concat(r.seconds||"")),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Zu(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ge(t,45),t.ye(i.latitude||0),t.ye(i.longitude||0)}else"mapValue"in e?ws(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):uo()}},{key:"Ie",value:function(e,t){this.ge(t,25),this.Pe(e,t)}},{key:"Pe",value:function(e,t){t.pe(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ge(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Ie(a,t),this.we(n[a],t)}}},{key:"ve",value:function(e,t){var n=e.values||[];this.ge(t,50);var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.we(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"Ae",value:function(e,t){var n=this;this.ge(t,37),Oo.fromName(e).path.forEach((function(e){n.ge(t,60),n.Pe(e,t)}))}},{key:"ge",value:function(e,t){e.ye(t)}},{key:"Te",value:function(e){e.ye(2)}}]),e}();function jf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function qf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=jf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Bf.be=new Bf;var Kf=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"Ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Se(n.value),n=t.next();this.De()}},{key:"Ce",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.xe(n.value),n=t.next();this.Ne()}},{key:"ke",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Se(i);else if(i<2048)this.Se(960|i>>>6),this.Se(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Se(480|i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i);else{var a=r.codePointAt(0);this.Se(240|a>>>18),this.Se(128|63&a>>>12),this.Se(128|63&a>>>6),this.Se(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.De()}},{key:"Me",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.xe(i);else if(i<2048)this.xe(960|i>>>6),this.xe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.xe(480|i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i);else{var a=r.codePointAt(0);this.xe(240|a>>>18),this.xe(128|63&a>>>12),this.xe(128|63&a>>>6),this.xe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ne()}},{key:"Oe",value:function(e){var t=this.$e(e),n=qf(t);this.Fe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Be",value:function(e){var t=this.$e(e),n=qf(t);this.Fe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Le",value:function(){this.qe(255),this.qe(255)}},{key:"Ue",value:function(){this.Ke(255),this.Ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ge",value:function(){return this.buffer.slice(0,this.position)}},{key:"$e",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Se",value:function(e){var t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}},{key:"xe",value:function(e){var t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}},{key:"De",value:function(){this.qe(0),this.qe(1)}},{key:"Ne",value:function(){this.Ke(0),this.Ke(1)}},{key:"qe",value:function(e){this.Fe(1),this.buffer[this.position++]=e}},{key:"Ke",value:function(e){this.Fe(1),this.buffer[this.position++]=~e}},{key:"Fe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Gf=function(){function e(t){d(this,e),this.Qe=t}return p(e,[{key:"Ee",value:function(e){this.Qe.Ve(e)}},{key:"pe",value:function(e){this.Qe.ke(e)}},{key:"ye",value:function(e){this.Qe.Oe(e)}},{key:"me",value:function(){this.Qe.Le()}}]),e}(),Qf=function(){function e(t){d(this,e),this.Qe=t}return p(e,[{key:"Ee",value:function(e){this.Qe.Ce(e)}},{key:"pe",value:function(e){this.Qe.Me(e)}},{key:"ye",value:function(e){this.Qe.Be(e)}},{key:"me",value:function(){this.Qe.Ue()}}]),e}(),Hf=function(){function e(){d(this,e),this.Qe=new Kf,this.je=new Gf(this.Qe),this.ze=new Qf(this.Qe)}return p(e,[{key:"seed",value:function(e){this.Qe.seed(e)}},{key:"We",value:function(e){return 0===e?this.je:this.ze}},{key:"Ge",value:function(){return this.Qe.Ge()}},{key:"reset",value:function(){this.Qe.reset()}}]),e}(),Wf=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"He",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Xf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=$f(e.arrayValue,t.arrayValue))?n:0!==(n=$f(e.directionalValue,t.directionalValue))?n:Oo.comparator(e.documentKey,t.documentKey)}function $f(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Yf=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Je=t.orderBy,this.Ye=[];var n,r=y(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xe=i:this.Ye.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"Ze",value:function(e){so(e.collectionGroup===this.collectionId);var t=Lo(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Fo(e),r=0,i=0;r<n.length&&this.tn(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Xe){var a=n[r];if(!this.en(this.Xe,a)||!this.nn(this.Je[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Je.length||!this.nn(this.Je[i++],o))return!1}return!0}},{key:"tn",value:function(e){var t,n=y(this.Ye);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.en(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"en",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"nn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Jf(e){var t,n;if(so(e instanceof Ls||e instanceof Fs),e instanceof Ls){if(e instanceof $s){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ls.create(e.field,"==",t)})))||[];return Fs.create(r,"or")}return e}var i=e.filters.map((function(e){return Jf(e)}));return Fs.create(i,e.op)}function Zf(e){if(0===e.getFilters().length)return[];var t=rh(Jf(e));return so(nh(t)),eh(t)||th(t)?[t]:t.getFilters()}function eh(e){return e instanceof Ls}function th(e){return e instanceof Fs&&Vs(e)}function nh(e){return eh(e)||th(e)||function(e){if(e instanceof Fs&&Us(e)){var t,n=y(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!eh(r)&&!th(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function rh(e){if(so(e instanceof Ls||e instanceof Fs),e instanceof Ls)return e;if(1===e.filters.length)return rh(e.filters[0]);var t=e.filters.map((function(e){return rh(e)})),n=Fs.create(t,e.op);return nh(n=oh(n))?n:(so(n instanceof Fs),so(Ms(n)),so(n.filters.length>1),n.filters.reduce((function(e,t){return ih(e,t)})))}function ih(e,t){var n;return so(e instanceof Ls||e instanceof Fs),so(t instanceof Ls||t instanceof Fs),n=e instanceof Ls?t instanceof Ls?function(e,t){return Fs.create([e,t],"and")}(e,t):ah(e,t):t instanceof Ls?ah(t,e):function(e,t){if(so(e.filters.length>0&&t.filters.length>0),Ms(e)&&Ms(t))return qs(e,t.getFilters());var n=Us(e)?e:t,r=Us(e)?t:e,i=n.filters.map((function(e){return ih(e,r)}));return Fs.create(i,"or")}(e,t),oh(n)}function ah(e,t){if(Ms(t))return qs(t,e.getFilters());var n=t.filters.map((function(t){return ih(e,t)}));return Fs.create(n,"or")}function oh(e){if(so(e instanceof Ls||e instanceof Fs),e instanceof Ls)return e;var t=e.getFilters();if(1===t.length)return oh(t[0]);if(zs(e))return e;var n=t.map((function(e){return oh(e)})),r=[];return n.forEach((function(t){t instanceof Ls?r.push(t):t instanceof Fs&&(t.op===e.op?r.push.apply(r,X(t.filters)):r.push(t))})),1===r.length?r[0]:Fs.create(r,e.op)}var uh=function(){function e(){d(this,e),this.sn=new sh}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),Ho.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ho.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ho.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ho.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ho.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ho.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ho.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ho.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ho.resolve(Bo.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ho.resolve(Bo.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ho.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ho.resolve()}}]),e}(),sh=function(){function e(){d(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ku(No.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ku(No.comparator)).toArray()}}]),e}(),ch=new Uint8Array(0),lh=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.rn=new sh,this.on=new Sc((function(e){return tc(e)}),(function(e,t){return nc(e,t)})),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.rn.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.rn.add(t)}));var a={collectionId:r,parent:cu(i)};return fh(e).put(a)}return Ho.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[To(t),""],!1,!0);return fh(e).j(r).next((function(e){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(hu(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=dh(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=vh(e);return a.next((function(e){o.put(Lf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=dh(e),r=vh(e),i=hh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=hh(e),i=!0,a=new Map;return Ho.forEach(this.un(t),(function(t){return n.cn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Fc(),o=[];return Ho.forEach(a,(function(i,a){var u;ro("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(tc(t)));var s=function(e,t){var n=Lo(t);if(void 0===n)return null;var r,i=y(ic(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=y(Fo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=y(ic(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=y(Fo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ac(e,o.fieldPath,e.startAt):oc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ds(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=y(Fo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?oc(e,o.fieldPath,e.endAt):ac(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ds(r,i)}(a,i),h=n.an(i,a,l),d=n.an(i,a,f),v=n.hn(i,a,c),p=n.ln(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return Ho.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Oo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ho.resolve(null)}))}},{key:"un",value:function(e){var t=this.on.get(e);return t||(t=0===e.filters.length?[e]:Zf(Fs.create(e.filters,"and")).map((function(t){return ec(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.on.set(e,t),t)}},{key:"ln",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.fn(t[h/c]):ch,f=u.dn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),v=o.map((function(t){return u.dn(e,s,t,!0)}));l.push.apply(l,X(u.createRange(f,d,v)))},h=0;h<s;++h)f();return l}},{key:"dn",value:function(e,t,n,r){var i=new Wf(e,Oo.empty(),t,n);return r?i:i.He()}},{key:"_n",value:function(e,t,n,r){var i=new Wf(e,Oo.empty(),t,n);return r?i.He():i}},{key:"cn",value:function(e,t){var n=new Yf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ze(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.un(t);return Ho.forEach(i,(function(t){return n.cn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ku(Ro.comparator),r=!1,i=y(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=y(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=y(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"wn",value:function(e,t){var n,r=new Hf,i=y(Fo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.We(a.kind);Bf.be._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ge()}},{key:"fn",value:function(e){var t=new Hf;return Bf.be._e(e,t.We(0)),t.Ge()}},{key:"mn",value:function(e,t){var n=new Hf;return Bf.be._e(vs(this.databaseId,t),n.We(function(e){var t=Fo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ge()}},{key:"hn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Hf);var i,a=0,o=y(Fo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=y(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.gn(t,s.fieldPath)&&ys(c))r=this.yn(r,s,c);else{var h=f.We(s.kind);Bf.be._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.pn(r)}},{key:"an",value:function(e,t,n){return this.hn(e,t,n.position)}},{key:"pn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Ge();return t}},{key:"yn",value:function(e,t,n){var r,i=X(e),a=[],o=y(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=y(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Hf;f.seed(l.Ge()),Bf.be._e(s,f.We(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"gn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ls&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=dh(e),i=vh(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Ho.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Uo(t.sequenceNumber,new Bo(Cf(t.readTime),new Oo(hu(t.documentKey)),t.largestBatchId)):Uo.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new Mo(Ro.fromServerFormat(n),r)}));return new Po(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Eo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=dh(e),a=vh(e);return this.In(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ho.forEach(t,(function(t){return a.put(Lf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ho.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ho.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ho.forEach(a,(function(r){return n.Tn(e,t,r).next((function(t){var a=n.En(i,r);return t.isEqual(a)?Ho.resolve():n.An(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return hh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"vn",value:function(e,t,n,r){return hh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}},{key:"Tn",value:function(e,t,n){var r=hh(e),i=new Ku(Xf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(function(e,r){i=i.add(new Wf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"En",value:function(e,t){var n=new Ku(Xf),r=this.wn(t,e);if(null==r)return n;var i=Lo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ys(a)){var o,u=y(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Wf(t.indexId,e.key,this.fn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Wf(t.indexId,e.key,ch,r));return n}},{key:"An",value:function(e,t,n,r,i){var a=this;ro("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Qu(a),s=Qu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Qu(o)):l?(i(u),u=Qu(a)):(u=Qu(a),s=Qu(o))}}(r,i,Xf,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.vn(e,t,n,r))})),Ho.waitFor(o)}},{key:"In",value:function(e){var t=1;return vh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Xf(e,t)})).filter((function(e,t,n){return!t||0!==Xf(e,n[t-1])}));var r=[];r.push(e);var i,a=y(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Xf(o,e),s=Xf(o,t);if(0===u)r[0]=e.He();else if(u>0&&s<0)r.push(o),r.push(o.He());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,ch,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,ch,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Pn",value:function(e,t){return Xf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ph)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ho.mapArray(this.un(t),(function(t){return n.cn(e,t).next((function(e){return e||uo()}))})).next(ph)}}]),e}();function fh(e){return Mu(e,"collectionParents")}function hh(e){return Mu(e,"indexEntries")}function dh(e){return Mu(e,"indexConfiguration")}function vh(e){return Mu(e,"indexState")}function ph(e){so(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;jo(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bo(t.readTime,t.documentKey,n)}var yh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mh=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function gh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){so(1===u)})));var c,l=[],f=y(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=pu(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Ho.waitFor(a).next((function(){return l}))}function kh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw uo();t=e.noDocument}return JSON.stringify(t).length}mh.DEFAULT_COLLECTION_PERCENTILE=10,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mh.DEFAULT=new mh(41943040,mh.DEFAULT_COLLECTION_PERCENTILE,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mh.DISABLED=new mh(-1,0,0);var bh=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _h(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=xh(e),o=_h(e);return o.add({}).next((function(u){so("number"==typeof u);var s,c=new kl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return cf(e.le,t)})),i=n.mutations.map((function(t){return cf(e.le,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Ku((function(e,t){return Eo(e.canonicalString(),t.canonicalString())})),d=y(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=pu(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,yu))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),Ho.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return _h(e).get(t).next((function(e){return e?(so(e.userId===n.userId),Df(n.serializer,e)):null}))}},{key:"Vn",value:function(e,t){var n=this;return this.bn[t]?Ho.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return _h(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(so(t.batchId>=r),a=Df(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return _h(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _h(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Df(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=vu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return xh(e).X({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=hu(c);if(s===n.userId&&t.path.isEqual(h))return _h(e).get(f).next((function(e){if(!e)throw uo();so(e.userId===n.userId),a.push(Df(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ku(Eo),i=[];return t.forEach((function(t){var a=vu(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=xh(e).X({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=hu(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),Ho.waitFor(i).next((function(){return n.Sn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=vu(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ku(Eo);return xh(e).X({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=hu(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Sn(e,u)}))}},{key:"Sn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(_h(e).get(t).next((function(e){if(null===e)throw uo();so(e.userId===n.userId),r.push(Df(n.serializer,e))})))})),Ho.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return gh(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Dn(t.batchId)})),Ho.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Dn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ho.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return xh(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=hu(e[1]);i.push(a)}else r.done()})).next((function(){so(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return wh(e,this.userId,t)}},{key:"Cn",value:function(e){var t=this;return Eh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"fe",value:function(t,n,r,i){return so(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function wh(e,t,n){var r=vu(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return xh(e).X({range:a,Y:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function _h(e){return Mu(e,"mutations")}function xh(e){return Mu(e,"documentMutations")}function Eh(e){return Mu(e,"mutationQueues")}var Sh=function(){function e(t){d(this,e),this.xn=t}return p(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"Nn",value:function(){return new e(0)}},{key:"kn",value:function(){return new e(-1)}}]),e}(),Th=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Mn(e).next((function(n){var r=new Sh(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Mn(e).next((function(e){return Co.fromTimestamp(new Io(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Mn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Mn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.$n(e,t).next((function(){return n.Mn(e).next((function(r){return r.targetCount+=1,n.Fn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.$n(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ih(e).delete(t.targetId)})).next((function(){return n.Mn(e)})).next((function(t){return so(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ih(e).X((function(o,u){var s=Nf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ho.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ih(e).X((function(e,n){var r=Nf(n);t(r)}))}},{key:"Mn",value:function(e){return Ch(e).get("targetGlobalKey").next((function(e){return so(null!==e),e}))}},{key:"On",value:function(e,t){return Ch(e).put("targetGlobalKey",t)}},{key:"$n",value:function(e,t){return Ih(e).put(Af(this.serializer,t))}},{key:"Fn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Mn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ih(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Nf(n);nc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Dh(e);return t.forEach((function(t){var o=cu(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ho.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Dh(e);return Ho.forEach(t,(function(t){var a=cu(t.path);return Ho.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Dh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Dh(e),i=Fc();return r.X({range:n,Y:!0},(function(e,t,n){var r=hu(e[1]),a=new Oo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cu(t.path),r=IDBKeyRange.bound([n],[To(n)],!1,!0),i=0;return Dh(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"he",value:function(e,t){return Ih(e).get(t).next((function(e){return e?Nf(e):null}))}}]),e}();function Ih(e){return Mu(e,"targets")}function Ch(e){return Mu(e,"targetGlobal")}function Dh(e){return Mu(e,"targetDocuments")}function Nh(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=Eo(r,o);return 0===s?Eo(i,u):s}var Ah=function(){function e(t){d(this,e),this.Bn=t,this.buffer=new Ku(Nh),this.Ln=0}return p(e,[{key:"qn",value:function(){return++this.Ln}},{key:"Un",value:function(e){var t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Nh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Rh=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Kn=null}return p(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}},{key:"stop",value:function(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}},{key:"started",get:function(){return null!==this.Kn}},{key:"Gn",value:function(e){var t=this;ro("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Kn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Jo(e.t0)){e.next=12;break}ro("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Go(e.t0);case 14:return e.next=16,t.Gn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Oh=function(){function e(t,n){d(this,e),this.Qn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Qn.jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ho.resolve(au.ct);var r=new Ah(t);return this.Qn.forEachTarget(e,(function(e){return r.Un(e.sequenceNumber)})).next((function(){return n.Qn.zn(e,(function(e){return r.Un(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Qn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Qn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ro("LruGarbageCollector","Garbage collection skipped; disabled"),Ho.resolve(yh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ro("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),yh):n.Wn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Qn.getCacheSize(e)}},{key:"Wn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ro("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),no()<=ee.DEBUG&&ro("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ho.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Ph(e,t){return new Oh(e,t)}var Lh=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=Ph(this,n)}return p(e,[{key:"jn",value:function(e){var t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Hn",value:function(e){var t=0;return this.zn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"zn",value:function(e,t){return this.Jn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Fh(e,n)}},{key:"removeReference",value:function(e,t,n){return Fh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Fh(e,t)}},{key:"Yn",value:function(e,t){return function(e,t){var n=!1;return Eh(e).Z((function(r){return wh(e,r,t).next((function(e){return e&&(n=!0),Ho.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Jn(e,(function(o,u){if(u<=t){var s=n.Yn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Co.min()),Dh(e).delete([0,cu(o.path)])}))}));i.push(s)}})).next((function(){return Ho.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Fh(e,t)}},{key:"Jn",value:function(e,t){var n,r=Dh(e),i=au.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==au.ct&&t(new Oo(hu(n)),i),i=s,n=u):i=au.ct})).next((function(){i!==au.ct&&t(new Oo(hu(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Fh(e,t){return Dh(e).put(function(e,t){return{targetId:0,path:cu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Mh=function(){function e(){d(this,e),this.changes=new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Cs.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ho.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Uh=function(){function e(t){d(this,e),this.serializer=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return jh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return jh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Tf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Cs.newInvalidDocument(t);return jh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(qh(t))},(function(e,i){r=n.Zn(t,i)})).next((function(){return r}))}},{key:"ts",value:function(e,t){var n=this,r={size:0,document:Cs.newInvalidDocument(t)};return jh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(qh(t))},(function(e,i){r={document:n.Zn(t,i),size:kh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ic();return this.es(e,t,(function(e,t){var i=n.Zn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ns",value:function(e,t){var n=this,r=Ic(),i=new Bu(Oo.comparator);return this.es(e,t,(function(e,t){var a=n.Zn(e,t);r=r.insert(e,a),i=i.insert(e,kh(t))})).next((function(){return{documents:r,ss:i}}))}},{key:"es",value:function(e,t,n){if(t.isEmpty())return Ho.resolve();var r=new Ku(Gh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(qh(r.first()),qh(r.last())),a=r.getIterator(),o=a.getNext();return jh(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Oo.fromSegments([].concat(X(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Gh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(qh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Tf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jh(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Ic(),o=y(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Zn(Oo.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(wc(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ic(),o=Kh(t,n),u=Kh(t,Bo.max());return jh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Zn(Oo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new zh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Bh(e).get("remoteDocumentGlobalKey").next((function(e){return so(!!e),e}))}},{key:"Xn",value:function(e,t){return Bh(e).put("remoteDocumentGlobalKey",t)}},{key:"Zn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=uf(e.le,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Oo.fromSegments(t.noDocument.path),i=Cf(t.noDocument.readTime);n=Cs.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return uo();var a=Oo.fromSegments(t.unknownDocument.path),o=Cf(t.unknownDocument.version);n=Cs.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Io(e[0],e[1]);return Co.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Co.min()))return n}return Cs.newInvalidDocument(e)}}]),e}();function Vh(e){return new Uh(e)}var zh=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).rs=e,i.trackRemovals=r,i.os=new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ku((function(e,t){return Eo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.os.get(a);if(n.push(t.rs.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Sf(t.rs.serializer,o);i=i.add(a.path.popLast());var c=kh(s);r+=c-u.size,n.push(t.rs.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Sf(t.rs.serializer,o.convertToNoDocument(Co.min()));n.push(t.rs.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.rs.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.rs.updateMetadata(e,r)),Ho.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.rs.ts(e,t).next((function(e){return n.os.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.rs.ns(e,t).next((function(e){var t=e.documents;return e.ss.forEach((function(e,r){n.os.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Mh);function Bh(e){return Mu(e,"remoteDocumentGlobal")}function jh(e){return Mu(e,"remoteDocumentsV14")}function qh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Kh(e,t){var n=t.documentKey.path.toArray();return[e,Tf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Gh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Eo(n[a],r[a]))return i;return(i=Eo(n.length,r.length))||((i=Eo(n[n.length-2],r[r.length-2]))||Eo(n[n.length-1],r[r.length-1]))}var Qh=p((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Hh=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return p(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&ul(r.mutation,e,Hu.empty(),Io.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Fc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fc(),i=Ac();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Dc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ac();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Fc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ic(),a=Oc(),o=Oc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof fl)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),ul(o.mutation,t,o.mutation.getFieldMask(),Io.now())):a.set(t.key,Hu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Qh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Oc(),i=new Bu((function(e,t){return e-t})),a=Fc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=y(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Hu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Fc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Rc();c.forEach((function(e){if(!a.has(e)){var n=al(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ho.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Oo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ho.resolve(Ac()),u=-1,s=a;return o.next((function(t){return Ho.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ho.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Fc())})).next((function(e){return{batchId:u,changes:Nc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Oo(t)).next((function(e){var t=Dc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Dc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ho.forEach(o,(function(o){var u=function(e,t){return new uc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Cs.newInvalidDocument(r)))}));var n=Dc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&ul(a.mutation,i,Hu.empty(),Io.now()),wc(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Wh=function(){function e(t){d(this,e),this.serializer=t,this.us=new Map,this.cs=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Ho.resolve(this.us.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.us.set(t.id,{id:(n=t).id,version:n.version,createTime:$l(n.createTime)}),Ho.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ho.resolve(this.cs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cs.set(t.name,function(e){return{name:e.name,query:Rf(e.bundledQuery),readTime:$l(e.readTime)}}(t)),Ho.resolve()}}]),e}(),Xh=function(){function e(){d(this,e),this.overlays=new Bu(Oo.comparator),this.hs=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return Ho.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ac();return Ho.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.de(e,t,i)})),Ho.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hs.delete(n)),Ho.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ac(),i=t.length+1,a=new Oo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ho.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Bu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ac(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ac(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ho.resolve(s)}},{key:"de",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hs.get(r.largestBatchId).delete(n.key);this.hs.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new wl(t,n));var a=this.hs.get(t);void 0===a&&(a=Fc(),this.hs.set(t,a)),this.hs.set(t,a.add(n.key))}}]),e}(),$h=function(){function e(){d(this,e),this.ls=new Ku(Yh.fs),this.ds=new Ku(Yh._s)}return p(e,[{key:"isEmpty",value:function(){return this.ls.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Yh(e,t);this.ls=this.ls.add(n),this.ds=this.ds.add(n)}},{key:"ws",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.gs(new Yh(e,t))}},{key:"ys",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ps",value:function(e){var t=this,n=new Oo(new No([])),r=new Yh(n,e),i=new Yh(n,e+1),a=[];return this.ds.forEachInRange([r,i],(function(e){t.gs(e),a.push(e.key)})),a}},{key:"Is",value:function(){var e=this;this.ls.forEach((function(t){return e.gs(t)}))}},{key:"gs",value:function(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}},{key:"Ts",value:function(e){var t=new Oo(new No([])),n=new Yh(t,e),r=new Yh(t,e+1),i=Fc();return this.ds.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Yh(e,0),n=this.ls.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Yh=function(){function e(t,n){d(this,e),this.key=t,this.Es=n}return p(e,null,[{key:"fs",value:function(e,t){return Oo.comparator(e.key,t.key)||Eo(e.Es,t.Es)}},{key:"_s",value:function(e,t){return Eo(e.Es,t.Es)||Oo.comparator(e.key,t.key)}}]),e}(),Jh=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Ku(Yh.fs)}return p(e,[{key:"checkEmpty",value:function(e){return Ho.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new kl(i,t,n,r);this.mutationQueue.push(a);var o,u=y(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Yh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ho.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ho.resolve(this.vs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ps(n),i=r<0?0:r;return Ho.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ho.resolve(0===this.mutationQueue.length?-1:this.As-1)}},{key:"getAllMutationBatches",value:function(e){return Ho.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Yh(t,0),i=new Yh(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.vs(e.Es);a.push(t)})),Ho.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ku(Eo);return t.forEach((function(e){var t=new Yh(e,0),i=new Yh(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.Es)}))})),Ho.resolve(this.bs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Oo.isDocumentKey(i)||(i=i.child(""));var a=new Yh(new Oo(i),0),o=new Ku(Eo);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Es)),!0)}),a),Ho.resolve(this.bs(o))}},{key:"bs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.vs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;so(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Ho.forEach(t.mutations,(function(i){var a=new Yh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Yh(t,0),r=this.Rs.firstAfterOrEqual(n);return Ho.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ho.resolve()}},{key:"Vs",value:function(e,t){return this.Ps(e)}},{key:"Ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"vs",value:function(e){var t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Zh=function(){function e(t){d(this,e),this.Ss=t,this.docs=new Bu(Oo.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ss(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ho.resolve(n?n.document.mutableCopy():Cs.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ic();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Cs.newInvalidDocument(e))})),Ho.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Ic(),a=t.path,o=new Oo(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||jo(zo(l),n)<=0||(r.has(l.key)||wc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ho.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){uo()}},{key:"Ds",value:function(e,t){return Ho.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ed(this)}},{key:"getSize",value:function(e){return Ho.resolve(this.size)}}]),e}(),ed=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).rs=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.rs.addEntry(e,i)):t.rs.removeEntry(r)})),Ho.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.rs.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.rs.getEntries(e,t)}}]),n}(Mh),td=function(){function e(t){d(this,e),this.persistence=t,this.Cs=new Sc((function(e){return tc(e)}),nc),this.lastRemoteSnapshotVersion=Co.min(),this.highestTargetId=0,this.xs=0,this.Ns=new $h,this.targetCount=0,this.ks=Sh.Nn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Cs.forEach((function(e,n){return t(n)})),Ho.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ho.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ho.resolve(this.xs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.ks.next(),Ho.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.xs&&(this.xs=t),Ho.resolve()}},{key:"$n",value:function(e){this.Cs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ks=new Sh(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.$n(t),this.targetCount+=1,Ho.resolve()}},{key:"updateTargetData",value:function(e,t){return this.$n(t),Ho.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,Ho.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ho.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ho.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cs.get(t)||null;return Ho.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ns.ws(t,n),Ho.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ns.ys(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ho.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ns.ps(t),Ho.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ns.Ts(t);return Ho.resolve(n)}},{key:"containsKey",value:function(e,t){return Ho.resolve(this.Ns.containsKey(t))}}]),e}(),nd=function(){function e(t,n){var r=this;d(this,e),this.Ms={},this.overlays={},this.Os=new au(0),this.$s=!1,this.$s=!0,this.referenceDelegate=t(this),this.Fs=new td(this),this.indexManager=new uh,this.remoteDocumentCache=new Zh((function(e){return r.referenceDelegate.Bs(e)})),this.serializer=new Ef(n),this.Ls=new Wh(this.serializer)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.$s=!1,Promise.resolve()}},{key:"started",get:function(){return this.$s}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Xh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ms[e.toKey()];return n||(n=new Jh(t,this.referenceDelegate),this.Ms[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;ro("MemoryPersistence","Starting transaction:",e);var i=new rd(this.Os.next());return this.referenceDelegate.qs(),n(i).next((function(e){return r.referenceDelegate.Us(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ks",value:function(e,t){return Ho.or(Object.values(this.Ms).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),rd=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(Ko),id=function(){function e(t){d(this,e),this.persistence=t,this.Gs=new $h,this.Qs=null}return p(e,[{key:"zs",get:function(){if(this.Qs)return this.Qs;throw uo()}},{key:"addReference",value:function(e,t,n){return this.Gs.addReference(n,t),this.zs.delete(n.toString()),Ho.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gs.removeReference(n,t),this.zs.add(n.toString()),Ho.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zs.add(t.toString()),Ho.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gs.ps(t.targetId).forEach((function(e){return n.zs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qs",value:function(){this.Qs=new Set}},{key:"Us",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ho.forEach(this.zs,(function(r){var i=Oo.fromPath(r);return t.Ws(e,i).next((function(e){e||n.removeEntry(i,Co.min())}))})).next((function(){return t.Qs=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ws(e,t).next((function(e){e?n.zs.delete(t.toString()):n.zs.add(t.toString())}))}},{key:"Bs",value:function(e){return 0}},{key:"Ws",value:function(e,t){var n=this;return Ho.or([function(){return Ho.resolve(n.Gs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ks(e,t)}])}}],[{key:"js",value:function(t){return new e(t)}}]),e}(),ad=function(){function e(t){d(this,e),this.serializer=t}return p(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Wo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",du,{unique:!0}),e.createObjectStore("documentMutations")}(e),od(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ho.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),od(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Co.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",du,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ho.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Js(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ys(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Cu});t.createIndex("collectionPathOverlayIndex",Du,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Nu,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:mu});t.createIndex("documentKeyIndex",gu),t.createIndex("collectionGroupIndex",ku)}(e)})).next((function(){return i.ei(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ni(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Eu}).createIndex("sequenceNumberIndex",Su,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Tu}).createIndex("documentKeyIndex",Iu,{unique:!1})}(e)}))),o}},{key:"Ys",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=kh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Js",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Ho.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Ho.forEach(r,(function(r){so(r.userId===n.userId);var i=Df(t.serializer,r);return gh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new No(n),o=function(e){return[0,cu(e)]}(a);r.push(t.get(o).next((function(n){return n?Ho.resolve():function(n){return t.put({targetId:0,path:cu(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ho.waitFor(r)}))}))}},{key:"Zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:xu});var n=t.store("collectionParents"),r=new sh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cu(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new No(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],hu(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Nf(r),a=Af(t.serializer,i);return n.put(a)}))}},{key:"ei",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Oo(No.fromString(i.document.name).popFirst(5)):i.noDocument?Oo.fromSegments(i.noDocument.path):i.unknownDocument?Oo.fromSegments(i.unknownDocument.path):uo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ho.waitFor(r)}))}},{key:"ni",value:function(e,t){var n=this,r=t.store("mutations"),i=Vh(this.serializer),a=new nd(id.js,this.serializer.le);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Fc();Df(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ho.forEach(r,(function(e,r){var o=new Za(r),u=Vf.fe(n.serializer,o),s=a.getIndexManager(o),c=bh.fe(o,n.serializer,s,a.referenceDelegate);return new Hh(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Fu(t,au.ct),e).next()}))}))}}]),e}();function od(e){e.createObjectStore("targetDocuments",{keyPath:wu}).createIndex("documentTargetsIndex",_u,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bu,{unique:!0}),e.createObjectStore("targetGlobal")}var ud="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sd=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.si=a,this.window=o,this.document=u,this.ii=c,this.ri=l,this.oi=f,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=function(e){return Promise.resolve()},!e.D())throw new fo(lo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lh(this,i),this.fi=n+"main",this.serializer=new Ef(s),this.di=new Xo(this.fi,this.oi,new ad(this.serializer)),this.Fs=new Th(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vh(this.serializer),this.Ls=new Ff,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&io("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.wi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fo(lo.FAILED_PRECONDITION,ud);return e.mi(),e.gi(),e.yi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Fs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new au(t,e.ii)})).then((function(){e.$s=!0})).catch((function(t){return e.di&&e.di.close(),Promise.reject(t)}))}},{key:"pi",value:function(e){var t=this;return this.li=function(){var n=u(a().mark((function n(r){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.di.B(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.wi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"wi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ld(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ii(t).next((function(t){t||(e.isPrimary=!1,e.si.enqueueRetryable((function(){return e.li(!1)})))}))})).next((function(){return e.Ti(t)})).next((function(n){return e.isPrimary&&!n?e.Ei(t).next((function(){return!1})):!!n&&e.Ai(t).next((function(){return!0}))}))})).catch((function(t){if(Jo(t))return ro("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ro("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.si.enqueueRetryable((function(){return e.li(t)})),e.isPrimary=t}))}},{key:"Ii",value:function(e){var t=this;return cd(e).get("owner").next((function(e){return Ho.resolve(t.Ri(e))}))}},{key:"vi",value:function(e){return ld(e).delete(this.clientId)}},{key:"Pi",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.hi,18e5)){e.next=6;break}return this.hi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Mu(e,"clientMetadata");return t.j().next((function(e){var n=o.Vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ho.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=y(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Si(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yi",value:function(){var e=this;this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.wi().then((function(){return e.Pi()})).then((function(){return e.yi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ti",value:function(e){var t=this;return this.ri?Ho.resolve(!0):cd(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Di(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new fo(lo.FAILED_PRECONDITION,ud);return!1}}return!(!t.networkEnabled||!t.inForeground)||ld(e).j().next((function(e){return void 0===t.Vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ro("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$s=!1,this.Ci(),this.ai&&(this.ai.cancel(),this.ai=null),this.xi(),this.Ni(),e.next=7,this.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Fu(e,au.ct);return t.Ei(n).next((function(){return t.vi(n)}))}));case 7:this.di.close(),this.ki();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vi",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Di(e.clientId)}))}},{key:"Mi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ld(t).j().next((function(t){return e.Vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.$s}},{key:"getMutationQueue",value:function(e,t){return bh.fe(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new lh(e,this.serializer.le.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Vf.fe(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;ro("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.oi)?Lu:14===i?Pu:13===i?Ou:12===i?Ru:11===i?Au:void uo();return this.di.runTransaction(e,o,u,(function(i){return a=new Fu(i,r.Os?r.Os.next():au.ct),"readwrite-primary"===t?r.Ii(a).next((function(e){return!!e||r.Ti(a)})).next((function(t){if(!t)throw io("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.si.enqueueRetryable((function(){return r.li(!1)})),new fo(lo.FAILED_PRECONDITION,qo);return n(a)})).next((function(e){return r.Ai(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return cd(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Di(e.ownerId)&&!t.Ri(e)&&!(t.ri||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fo(lo.FAILED_PRECONDITION,ud)}))}},{key:"Ai",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cd(e).put("owner",t)}},{key:"Ei",value:function(e){var t=this,n=cd(e);return n.get("owner").next((function(e){return t.Ri(e)?(ro("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ho.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(io("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"mi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=function(){e.si.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.wi()}))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}},{key:"xi",value:function(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}},{key:"gi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=function(){t.Ci();var e=/(?:Version|Mobile)\/1[456]/;!M()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.si.enterRestrictedMode(!0),t.si.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ui))}},{key:"Ni",value:function(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}},{key:"Di",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return ro("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return io("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ci",value:function(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){io("Failed to set zombie client id.",e)}}},{key:"ki",value:function(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(e){}}},{key:"Si",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Xo.D()}}]),e}();function cd(e){return Mu(e,"owner")}function ld(e){return Mu(e,"clientMetadata")}function fd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var hd=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.$i=r,this.Fi=i}return p(e,null,[{key:"Bi",value:function(t,n){var r,i=Fc(),a=Fc(),o=y(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),dd=function(){function e(){d(this,e),this.Li=!1}return p(e,[{key:"initialize",value:function(e,t){this.qi=e,this.indexManager=t,this.Li=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ui(e,t).next((function(a){return a||i.Ki(e,t,r,n)})).next((function(n){return n||i.Gi(e,t)}))}},{key:"Ui",value:function(e,t){var n=this;if(lc(t))return Ho.resolve(null);var r=pc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=mc(t,null,"F"),r=pc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Fc.apply(void 0,X(i));return n.qi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Qi(t,i);return n.ji(t,o,a,r.readTime)?n.Ui(e,mc(t,null,"F")):n.zi(e,o,t,r)}))}))})))}))}},{key:"Ki",value:function(e,t,n,r){var i=this;return lc(t)||r.isEqual(Co.min())?this.Gi(e,t):this.qi.getDocuments(e,n).next((function(a){var o=i.Qi(t,a);return i.ji(t,o,n,r)?i.Gi(e,t):(no()<=ee.DEBUG&&ro("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),bc(t)),i.zi(e,o,t,Vo(r,-1)))}))}},{key:"Qi",value:function(e,t){var n=new Ku(xc(e));return t.forEach((function(t,r){wc(e,r)&&(n=n.add(r))})),n}},{key:"ji",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Gi",value:function(e,t){return no()<=ee.DEBUG&&ro("QueryEngine","Using full collection scan to execute query:",bc(t)),this.qi.getDocumentsMatchingQuery(e,t,Bo.min())}},{key:"zi",value:function(e,t,n,r){return this.qi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),vd=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Wi=n,this.serializer=i,this.Hi=new Bu(Eo),this.Ji=new Sc((function(e){return tc(e)}),nc),this.Yi=new Map,this.Xi=t.getRemoteDocumentCache(),this.Fs=t.getTargetCache(),this.Ls=t.getBundleCache(),this.Zi(r)}return p(e,[{key:"Zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hh(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Hi)}))}}]),e}();function pd(e,t,n,r){return new vd(e,t,n,r)}function yd(e,t){return md.apply(this,arguments)}function md(){return md=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Fc(),s=y(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=y(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,v=y(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var m,g=y(p.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){v.e(b)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{tr:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function gd(e,t){var n=co(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ho.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);so(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Fc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function kd(e){var t=co(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Fs.getLastRemoteSnapshotVersion(e)}))}function bd(e,t){var n=co(e),r=t.snapshotVersion,i=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Hi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Xu.EMPTY_BYTE_STRING,Co.min()).withLastLimboFreeSnapshotVersion(Co.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Fs.updateTargetData(e,c))}}));var u=Ic(),s=Fc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(wd(e,a,t.documentUpdates).next((function(e){u=e.er,s=e.nr}))),!r.isEqual(Co.min())){var c=n.Fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ho.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Hi=i,e}))}function wd(e,t,n){var r=Fc(),i=Fc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ic();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Co.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ro("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{er:r,nr:i}}))}function _d(e,t){var n=co(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function xd(e,t){var n=co(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Fs.getTargetData(e,t).next((function(i){return i?(r=i,Ho.resolve(r)):n.Fs.allocateTargetId(e).next((function(i){return r=new xf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Hi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(e.targetId,e),n.Ji.set(t,e.targetId)),e}))}function Ed(e,t,n){return Sd.apply(this,arguments)}function Sd(){return Sd=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=co(t),o=i.Hi.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jo(e.t1)){e.next=12;break}throw e.t1;case 12:ro("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Hi=i.Hi.remove(n),i.Ji.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Sd.apply(this,arguments)}function Td(e,t,n){var r=co(e),i=Co.min(),a=Fc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=co(e),i=r.Ji.get(n);return void 0!==i?Ho.resolve(r.Hi.get(i)):r.Fs.getTargetData(t,n)}(r,e,pc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Wi.getDocumentsMatchingQuery(e,t,n?i:Co.min(),n?a:Fc())})).next((function(e){return Dd(r,_c(t),e),{documents:e,sr:a}}))}))}function Id(e,t){var n=co(e),r=co(n.Fs),i=n.Hi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.he(e,t).next((function(e){return e?e.target:null}))}))}function Cd(e,t){var n=co(e),r=n.Yi.get(t)||Co.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,Vo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Dd(n,t,e),e}))}function Dd(e,t,n){var r=e.Yi.get(t)||Co.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Yi.set(t,r)}function Nd(e,t,n,r){return Ad.apply(this,arguments)}function Ad(){return Ad=u(a().mark((function e(t,n,r,i){var o,u,s,c,l,f,h,d,v,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=co(t),u=Fc(),s=Ic(),c=y(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.ir(f.metadata.name),f.document&&(u=u.add(h)),(d=n.rr(f)).setReadTime(n.ur(f.metadata.readTime)),s=s.insert(h,d)}catch(a){c.e(a)}finally{c.f()}return v=o.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,xd(o,function(e){return pc(cc(No.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return wd(e,v,s).next((function(t){return v.apply(e),t})).next((function(t){return o.Fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return o.Fs.addMatchingKeys(e,u,p.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.er,t.nr)})).next((function(){return t.er}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Rd(e,t){return Od.apply(this,arguments)}function Od(){return Od=u(a().mark((function e(t,n){var r,i,o,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Fc(),e.next=3,xd(t,pc(Rf(n.bundledQuery)));case 3:return i=e.sent,o=co(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=$l(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ls.saveNamedQuery(e,n);var a=i.withResumeToken(Xu.EMPTY_BYTE_STRING,t);return o.Hi=o.Hi.insert(a.targetId,a),o.Fs.updateTargetData(e,a).next((function(){return o.Fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.Fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.Ls.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Od.apply(this,arguments)}function Pd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ld(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Fd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Md=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(io("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ud=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fo(i.error.code,i.error.message))),a?new e(t,i.state,r):(io("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Vd=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"cr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Uc(),o=0;i&&o<r.activeTargetIds.length;++o)i=su(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(io("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),zd=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"cr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(io("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Bd=function(){function e(){d(this,e),this.activeTargetIds=Uc()}return p(e,[{key:"hr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ar",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),jd=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.si=n,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new Bu(Eo),this.started=!1,this.gr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.yr=Pd(this.persistenceKey,this.dr),this.pr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.mr=this.mr.insert(this.dr,new Bd),this.Ir=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Tr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Er=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ar=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return p(e,[{key:"start",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,u,s,c,l,f,h,d=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Mi();case 2:t=e.sent,n=y(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.dr){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(Pd(this.persistenceKey,i)))&&(u=Vd.cr(i,o))&&(this.mr=this.mr.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.vr(),(s=this.storage.getItem(this.Ar))&&(c=this.Pr(s))&&this.br(c),l=y(this.gr);try{for(l.s();!(f=l.n()).done;)h=f.value,this.wr(h)}catch(a){l.e(a)}finally{l.f()}this.gr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.pr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Vr(this.mr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.mr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Sr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Sr(e,t,n),this.Dr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Fd(this.persistenceKey,e));if(n){var r=Ud.cr(e,n);r&&(t=r.state)}}return this.Cr.hr(e),this.vr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Cr.lr(e),this.vr()}},{key:"isLocalQueryTarget",value:function(e){return this.Cr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Fd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Nr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Dr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.kr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Mr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ro("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ro("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ro("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"wr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ro("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yr)return void io("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(u(a().mark((function e(){var r,i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ir.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.$r(r,null));case 6:if(!(i=t.Fr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.$r(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Tr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.Br(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Lr(o));case 16:e.next=41;break;case 18:if(!t.Er.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.qr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Ur(u));case 23:e.next=41;break;case 25:if(n.key!==t.Ar){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.br(s));case 30:e.next=41;break;case 32:if(n.key!==t.pr){e.next=37;break}c=function(e){var t=au.ct;if(null!=e)try{var n=JSON.parse(e);so("number"==typeof n),t=n}catch(e){io("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==au.ct&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return l=t.Kr(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Gr(e)})));case 41:e.next=44;break;case 43:t.gr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Cr",get:function(){return this.mr.get(this.dr)}},{key:"vr",value:function(){this.setItem(this.yr,this.Cr.ar())}},{key:"Sr",value:function(e,t,n){var r=new Md(this.currentUser,e,t,n),i=Ld(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ar())}},{key:"Dr",value:function(e){var t=Ld(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"kr",value:function(e){var t={clientId:this.dr,onlineState:e};this.storage.setItem(this.Ar,JSON.stringify(t))}},{key:"Nr",value:function(e,t,n){var r=Fd(this.persistenceKey,e),i=new Ud(e,t,n);this.setItem(r,i.ar())}},{key:"Mr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Ir.exec(e);return t?t[1]:null}},{key:"Fr",value:function(e,t){var n=this.Or(e);return Vd.cr(n,t)}},{key:"Br",value:function(e,t){var n=this.Tr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Md.cr(new Za(i),r,t)}},{key:"qr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]);return Ud.cr(r,t)}},{key:"Pr",value:function(e){return zd.cr(e)}},{key:"Kr",value:function(e){return JSON.parse(e)}},{key:"Lr",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Qr(t.batchId,t.state,t.error));case 2:ro("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ur",value:function(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}},{key:"$r",value:function(e,t){var n=this,r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),a=this.Vr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.zr(o,u).then((function(){n.mr=r}))}},{key:"br",value:function(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Vr",value:function(e){var t=Uc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),qd=function(){function e(){d(this,e),this.Wr=new Bd,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Hr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Wr.lr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Hr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Wr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Wr=new Bd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Kd=function(){function e(){d(this,e)}return p(e,[{key:"Jr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Gd=function(){function e(){var t=this;d(this,e),this.Yr=function(){return t.Xr()},this.Zr=function(){return t.eo()},this.no=[],this.so()}return p(e,[{key:"Jr",value:function(e){this.no.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}},{key:"so",value:function(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}},{key:"Xr",value:function(){ro("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=y(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"eo",value:function(){ro("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=y(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Qd=null;function Hd(){return null===Qd?Qd=268435456+Math.round(2147483648*Math.random()):Qd++,"0x"+Qd.toString(16)}var Wd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Xd=function(){function e(t){d(this,e),this.io=t.io,this.ro=t.ro}return p(e,[{key:"oo",value:function(e){this.uo=e}},{key:"co",value:function(e){this.ao=e}},{key:"onMessage",value:function(e){this.ho=e}},{key:"close",value:function(){this.ro()}},{key:"send",value:function(e){this.io(e)}},{key:"lo",value:function(){this.uo()}},{key:"fo",value:function(e){this.ao(e)}},{key:"_o",value:function(e){this.ho(e)}}]),e}(),$d="WebChannelConnection",Yd=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return p(n,[{key:"Eo",value:function(e,t,n,r){var i=Hd();return new Promise((function(a,o){var u=new Xa;u.setWithCredentials(!0),u.listenOnce(Ka.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case qa.NO_ERROR:var t=u.getResponseJson();ro($d,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case qa.TIMEOUT:ro($d,"RPC '".concat(e,"' ").concat(i," timed out")),o(new fo(lo.DEADLINE_EXCEEDED,"Request time out"));break;case qa.HTTP_ERROR:var n=u.getStatus();if(ro($d,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(lo).indexOf(t)>=0?t:lo.UNKNOWN}(s.status);o(new fo(c,s.message))}else o(new fo(lo.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new fo(lo.UNAVAILABLE,"Connection failed."));break;default:uo()}}finally{ro($d,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);ro($d,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=Hd(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ba(),o=ja(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Ha({})),this.To(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");ro($d,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new Xd({io:function(t){f?ro($d,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(ro($d,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),ro($d,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ro:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Wa.EventType.OPEN,(function(){f||ro($d,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Wa.EventType.CLOSE,(function(){f||(f=!0,ro($d,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.fo())})),d(c,Wa.EventType.ERROR,(function(t){f||(f=!0,ao($d,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.fo(new fo(lo.UNAVAILABLE,"The operation could not be completed")))})),d(c,Wa.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];so(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ro($d,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=pl[e];if(void 0!==t)return El(t)}(u),l=o.message;void 0===s&&(s=lo.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.fo(new fo(s,l)),c.close()}else ro($d,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h._o(i)}})),d(o,Ga.STAT_EVENT,(function(t){t.stat===Qa.PROXY?ro($d,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Qa.NOPROXY&&ro($d,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.lo()}),0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.wo=n+"://"+t.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return p(e,[{key:"yo",get:function(){return!1}},{key:"po",value:function(e,t,n,r,i){var a=Hd(),o=this.Io(e,t);ro("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.To(u,r,i),this.Eo(e,o,u,n).then((function(t){return ro("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw ao("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Ao",value:function(e,t,n,r,i,a){return this.po(e,t,n,r,i)}},{key:"To",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+eo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Io",value:function(e,t){var n=Wd[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}}]),e}());function Jd(){return"undefined"!=typeof window?window:null}function Zd(){return"undefined"!=typeof document?document:null}function ev(e){return new Gl(e,!0)}var tv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.si=t,this.timerId=n,this.vo=r,this.Po=i,this.bo=a,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.Vo=0}},{key:"Co",value:function(){this.Vo=this.bo}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,n-r);i>0&&ro("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.So=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Do=Date.now(),e()})),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}},{key:"ko",value:function(){null!==this.So&&(this.So.skipDelay(),this.So=null)}},{key:"cancel",value:function(){null!==this.So&&(this.So.cancel(),this.So=null)}},{key:"No",value:function(){return(Math.random()-.5)*this.Vo}}]),e}(),nv=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.si=t,this.Mo=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new tv(t,n)}return p(e,[{key:"qo",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Ko()}},{key:"stop",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.qo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Lo.reset()}},{key:"Qo",value:function(){var e=this;this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,(function(){return e.jo()})))}},{key:"zo",value:function(e){this.Wo(),this.stream.send(e)}},{key:"jo",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"close",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==t?this.Lo.reset():n&&n.code===lo.RESOURCE_EXHAUSTED?(io(n.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===lo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.co(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.$o===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new fo(lo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Zo(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo((function(){r((function(){return n.state=2,n.Bo=n.si.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener.oo()}))})),this.stream.co((function(e){r((function(){return n.Zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Ko",value:function(){var e=this;this.state=5,this.Lo.xo(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Zo",value:function(e){return ro("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Yo",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.$o===e?n():(ro("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),rv=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return p(n,[{key:"tu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.Lo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:uo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(so(void 0===t||"string"==typeof t),Xu.fromBase64String(t||"")):(so(void 0===t||t instanceof Uint8Array),Xu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?lo.UNKNOWN:El(e.code);return new fo(t,e.message||"")}(o);n=new Ml(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ef(e,s.document.name),l=$l(s.document.updateTime),f=s.document.createTime?$l(s.document.createTime):Co.min(),h=new Ts({mapValue:{fields:s.document.fields}}),d=Cs.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new Ll(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=ef(e,y.document),g=y.readTime?$l(y.readTime):Co.min(),k=Cs.newNoDocument(m,g),b=y.removedTargetIds||[];n=new Ll([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=ef(e,w.document),x=w.removedTargetIds||[];n=new Ll([],x,_,null)}else{if(!("filter"in t))return uo();t.filter;var E=t.filter;E.targetId;var S=E.count,T=void 0===S?0:S,I=E.unchangedNames,C=new _l(T,I),D=E.targetId;n=new Fl(D,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Co.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Co.min():t.readTime?$l(t.readTime):Co.min()}(e);return this.listener.eu(t,n)}},{key:"nu",value:function(e){var t={};t.database=rf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=rc(r)?{documents:ff(e,r)}:{query:hf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Wl(e,t.resumeToken);var i=Ql(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Co.min())>0){n.readTime=Hl(e,t.snapshotVersion.toTimestamp());var a=Ql(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return uo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.zo(t)}},{key:"su",value:function(e){var t={};t.database=rf(this.serializer),t.removeTarget=e,this.zo(t)}}]),n}(nv),iv=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.iu=!1,s}return p(n,[{key:"ru",get:function(){return this.iu}},{key:"start",value:function(){this.iu=!1,this.lastStreamToken=void 0,St(b(n.prototype),"start",this).call(this)}},{key:"Jo",value:function(){this.iu&&this.ou([])}},{key:"tu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(so(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();var t=function(e,t){return e&&e.length>0?(so(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?$l(e.updateTime):$l(t);return n.isEqual(Co.min())&&(n=$l(t)),new tl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=$l(e.commitTime);return this.listener.uu(n,t)}return so(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}},{key:"au",value:function(){var e={};e.database=rf(this.serializer),this.zo(e)}},{key:"ou",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return cf(t.serializer,e)}))};this.zo(n)}}]),n}(nv),av=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.hu=!1,o}return p(n,[{key:"lu",value:function(){if(this.hu)throw new fo(lo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"po",value:function(e,t,n){var r=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.po(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fo(lo.UNKNOWN,e.toString())}))}},{key:"Ao",value:function(e,t,n,r){var i=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection.Ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fo(lo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.hu=!0}}]),n}(function(){return p((function e(){d(this,e)}))}());var ov=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}return p(e,[{key:"mu",value:function(){var e=this;0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.yu("Backend didn't respond within 10 seconds."),e.gu("Offline"),Promise.resolve()})))}},{key:"pu",value:function(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.gu("Offline")))}},{key:"set",value:function(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}},{key:"gu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"yu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.wu?(io(t),this.wu=!1):ro("OnlineStateTracker",t)}},{key:"Iu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),uv=p((function e(t,n,r,i,o){var s=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=o,this.vu.Jr((function(e){r.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=gv(s),!e.t0){e.next=5;break}return ro("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=co(t)).Au.add(4),e.next=4,lv(n);case 4:return n.Pu.set("Unknown"),n.Au.delete(4),e.next=8,sv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.Pu=new ov(r,i)}));function sv(e){return cv.apply(this,arguments)}function cv(){return(cv=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gv(t)){e.next=18;break}n=y(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function lv(e){return fv.apply(this,arguments)}function fv(){return(fv=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function hv(e,t){var n=co(e);n.Eu.has(t.targetId)||(n.Eu.set(t.targetId,t),mv(n)?yv(n):Hv(n).Uo()&&vv(n,t))}function dv(e,t){var n=co(e),r=Hv(n);n.Eu.delete(t),r.Uo()&&pv(n,t),0===n.Eu.size&&(r.Uo()?r.Qo():gv(n)&&n.Pu.set("Unknown"))}function vv(e,t){if(e.bu.Lt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Co.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hv(e).nu(t)}function pv(e,t){e.bu.Lt(t),Hv(e).su(t)}function yv(e){e.bu=new Vl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},he:function(t){return e.Eu.get(t)||null},oe:function(){return e.datastore.serializer.databaseId}}),Hv(e).start(),e.Pu.mu()}function mv(e){return gv(e)&&!Hv(e).qo()&&e.Eu.size>0}function gv(e){return 0===co(e).Au.size}function kv(e){e.bu=void 0}function bv(e){return wv.apply(this,arguments)}function wv(){return(wv=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Eu.forEach((function(e,n){vv(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _v(e,t){return xv.apply(this,arguments)}function xv(){return(xv=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kv(t),mv(t)?(t.Pu.pu(n),yv(t)):t.Pu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ev(e,t,n){return Sv.apply(this,arguments)}function Sv(){return Sv=u(a().mark((function e(t,n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Pu.set("Online"),!(n instanceof Ml&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=y(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(u=o.value,e.t0=t.Eu.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.Eu.delete(u),t.bu.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ro("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Tv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ll?t.bu.Wt(n):n instanceof Fl?t.bu.ee(n):t.bu.Yt(n),r.isEqual(Co.min())){e.next=29;break}return e.prev=14,e.next=17,kd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.bu.ue(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Eu.get(r);i&&e.Eu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Eu.get(t);if(r){e.Eu.set(t,r.withResumeToken(Xu.EMPTY_BYTE_STRING,r.snapshotVersion)),pv(e,t);var i=new xf(r.target,t,n,r.sequenceNumber);vv(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ro("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Tv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Sv.apply(this,arguments)}function Tv(e,t,n){return Iv.apply(this,arguments)}function Iv(){return(Iv=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jo(n)){e.next=2;break}throw n;case 2:return t.Au.add(1),e.next=5,lv(t);case 5:t.Pu.set("Offline"),r||(r=function(){return kd(t.localStore)}),t.asyncQueue.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ro("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Au.delete(1),e.next=6,sv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cv(e,t){return t().catch((function(n){return Tv(e,n,t)}))}function Dv(e){return Nv.apply(this,arguments)}function Nv(){return(Nv=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=co(t),r=Wv(n),i=n.Tu.length>0?n.Tu[n.Tu.length-1].batchId:-1;case 2:if(!Av(n)){e.next=19;break}return e.prev=3,e.next=6,_d(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.Tu.length&&r.Qo(),e.abrupt("break",19);case 10:i=o.batchId,Rv(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Tv(n,e.t0);case 17:e.next=2;break;case 19:Ov(n)&&Pv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Av(e){return gv(e)&&e.Tu.length<10}function Rv(e,t){e.Tu.push(t);var n=Wv(e);n.Uo()&&n.ru&&n.ou(t.mutations)}function Ov(e){return gv(e)&&!Wv(e).qo()&&e.Tu.length>0}function Pv(e){Wv(e).start()}function Lv(e){return Fv.apply(this,arguments)}function Fv(){return(Fv=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wv(t).au();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mv(e){return Uv.apply(this,arguments)}function Uv(){return(Uv=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Wv(t),r=y(t.Tu);try{for(r.s();!(i=r.n()).done;)o=i.value,n.ou(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vv(e,t,n){return zv.apply(this,arguments)}function zv(){return(zv=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Tu.shift(),o=bl.from(i,n,r),e.next=3,Cv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,Dv(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bv(e,t){return jv.apply(this,arguments)}function jv(){return jv=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Wv(t).ru,!e.t0){e.next=4;break}return e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xl(i=n.code)||i===lo.ABORTED){e.next=7;break}return r=t.Tu.shift(),Wv(t).Go(),e.next=5,Cv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Dv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ov(t)&&Pv(t);case 5:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function qv(e,t){return Kv.apply(this,arguments)}function Kv(){return(Kv=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=co(t)).asyncQueue.verifyOperationInProgress(),ro("RemoteStore","RemoteStore received new credentials"),i=gv(r),r.Au.add(3),e.next=6,lv(r);case 6:return i&&r.Pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Au.delete(3),e.next=12,sv(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gv(e,t){return Qv.apply(this,arguments)}function Qv(){return(Qv=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),!n){e.next=7;break}return r.Au.delete(2),e.next=5,sv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Au.add(2),e.next=12,lv(r);case 12:r.Pu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hv(e){return e.Vu||(e.Vu=function(e,t,n){var r=co(e);return r.lu(),new rv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:bv.bind(null,e),co:_v.bind(null,e),eu:Ev.bind(null,e)}),e.Ru.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Vu.Go(),mv(e)?yv(e):e.Pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Vu.stop();case 6:kv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Vu}function Wv(e){return e.Su||(e.Su=function(e,t,n){var r=co(e);return r.lu(),new iv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:Lv.bind(null,e),co:Bv.bind(null,e),cu:Mv.bind(null,e),uu:Vv.bind(null,e)}),e.Ru.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Su.Go(),t.next=4,Dv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Su.stop();case 8:e.Tu.length>0&&(ro("RemoteStore","Stopping write stream with ".concat(e.Tu.length," pending writes")),e.Tu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}var Xv=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fo(lo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function $v(e,t){if(io("AsyncQueue","".concat(t,": ").concat(e)),Jo(e))return new fo(lo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Yv=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||Oo.comparator(e.key,n.key)}:function(e,t){return Oo.comparator(e.key,t.key)},this.keyedMap=Dc(),this.sortedSet=new Bu(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Jv=function(){function e(){d(this,e),this.Du=new Bu(Oo.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Du.get(t);n?0!==e.type&&3===n.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==n.type?this.Du=this.Du.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Du=this.Du.remove(t):1===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):uo():this.Du=this.Du.insert(t,e)}},{key:"Cu",value:function(){var e=[];return this.Du.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Zv=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Yv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),ep=p((function e(){d(this,e),this.xu=void 0,this.listeners=[]})),tp=p((function e(){d(this,e),this.queries=new Sc((function(e){return kc(e)}),gc),this.onlineState="Unknown",this.Nu=new Set}));function np(e,t){return rp.apply(this,arguments)}function rp(){return rp=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=n.query,o=!1,(u=r.queries.get(i))||(o=!0,u=new ep),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.xu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=$v(e.t0,"Initialization of query '".concat(bc(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.ku(r.onlineState),u.xu&&n.Mu(u.xu)&&sp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),rp.apply(this,arguments)}function ip(e,t){return ap.apply(this,arguments)}function ap(){return ap=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=n.query,o=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),o=0===u.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}function op(e,t){var n,r=co(e),i=!1,a=y(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=y(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Mu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.xu=o}}}catch(f){a.e(f)}finally{a.f()}i&&sp(r)}function up(e,t,n){var r=co(e),i=r.queries.get(t);if(i){var a,o=y(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function sp(e){e.Nu.forEach((function(e){e.next()}))}var cp=function(){function e(t,n,r){d(this,e),this.query=t,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"Mu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=y(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Zv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),a=!0):this.Lu(e,this.onlineState)&&(this.qu(e),a=!0),this.Fu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"ku",value:function(e){this.onlineState=e;var t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}},{key:"Lu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Uu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Bu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"qu",value:function(e){e=Zv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}]),e}(),lp=function(){function e(t,n){d(this,e),this.Ku=t,this.byteLength=n}return p(e,[{key:"Gu",value:function(){return"metadata"in this.Ku}}]),e}(),fp=function(){function e(t){d(this,e),this.serializer=t}return p(e,[{key:"ir",value:function(e){return ef(this.serializer,e)}},{key:"rr",value:function(e){return e.metadata.exists?uf(this.serializer,e.document,!1):Cs.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}},{key:"ur",value:function(e){return $l(e)}}]),e}(),hp=function(){function e(t,n,r){d(this,e),this.Qu=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dp(t)}return p(e,[{key:"ju",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;var n=No.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"zu",value:function(e){var t,n=new Map,r=new fp(this.serializer),i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.ir(a.metadata.name),s=y(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Fc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nd(this.localStore,new fp(this.serializer),this.documents,this.Qu.id);case 2:t=e.sent,n=this.zu(this.documents),r=y(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,Rd(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Wu:this.collectionGroups,Hu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function dp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var vp=p((function e(t){d(this,e),this.key=t})),pp=p((function e(t){d(this,e),this.key=t})),yp=function(){function e(t,n){d(this,e),this.query=t,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Fc(),this.mutatedKeys=Fc(),this.Zu=xc(t),this.tc=new Yv(this.Zu)}return p(e,[{key:"ec",get:function(){return this.Ju}},{key:"nc",value:function(e,t){var n=this,r=t?t.sc:new Jv,i=t?t.tc:this.tc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=wc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.ic(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Zu(f,s)>0||c&&n.Zu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{tc:o,sc:r,ji:u,mutatedKeys:a}}},{key:"ic",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;var a=e.sc.Cu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return uo()}};return n(e)-n(t)}(e.type,t.type)||r.Zu(e.doc,t.doc)})),this.rc(n);var o=t?this.oc():[],u=0===this.Xu.size&&this.current?1:0,s=u!==this.Yu;return this.Yu=u,0!==a.length||s?{snapshot:new Zv(this.query,e.tc,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}},{key:"ku",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Jv,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}},{key:"cc",value:function(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}},{key:"rc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ju=t.Ju.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ju=t.Ju.delete(e)})),this.current=e.current)}},{key:"oc",value:function(){var e=this;if(!this.current)return[];var t=this.Xu;this.Xu=Fc(),this.tc.forEach((function(t){e.cc(t.key)&&(e.Xu=e.Xu.add(t.key))}));var n=[];return t.forEach((function(t){e.Xu.has(t)||n.push(new pp(t))})),this.Xu.forEach((function(e){t.has(e)||n.push(new vp(e))})),n}},{key:"ac",value:function(e){this.Ju=e.sr,this.Xu=Fc();var t=this.nc(e.documents);return this.applyChanges(t,!0)}},{key:"hc",value:function(){return Zv.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}]),e}(),mp=p((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),gp=p((function e(t){d(this,e),this.key=t,this.lc=!1})),kp=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new Sc((function(e){return kc(e)}),gc),this._c=new Map,this.wc=new Set,this.mc=new Bu(Oo.comparator),this.gc=new Map,this.yc=new $h,this.Ic={},this.Tc=new Map,this.Ec=Sh.kn(),this.onlineState="Unknown",this.Ac=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ac}}]),e}();function bp(e,t){return wp.apply(this,arguments)}function wp(){return wp=u(a().mark((function e(t,n){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dy(t),!(u=r.dc.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),o=u.view.hc(),e.next=15;break;case 6:return e.next=8,xd(r.localStore,pc(n));case 8:return s=e.sent,c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,_p(r,n,i,"current"===c,s.resumeToken);case 13:o=e.sent,r.isPrimaryClient&&hv(r.remoteStore,s);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),wp.apply(this,arguments)}function _p(e,t,n,r,i){return xp.apply(this,arguments)}function xp(){return xp=u(a().mark((function e(t,n,r,i,o){var s,c,l,f,h,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.nc(r),e.t0=o.ji,!e.t0){e.next=6;break}return e.next=5,Td(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.nc(t,o)}));case 5:o=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,u),e.abrupt("return",(qp(t,n.targetId,s.uc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Td(t.localStore,n,!0);case 3:return s=e.sent,c=new yp(n,s.sr),l=c.nc(s.documents),f=Pl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,o),h=c.applyChanges(l,t.isPrimaryClient,f),qp(t,r,h.uc),d=new mp(n,r,c),e.abrupt("return",(t.dc.set(n,d),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Ep(e,t){return Sp.apply(this,arguments)}function Sp(){return(Sp=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=co(t),i=r.dc.get(n),!((o=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,o.filter((function(e){return!gc(e,n)}))),void r.dc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ed(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),dv(r.remoteStore,i.targetId),Bp(r,i.targetId)})).catch(Go);case 9:e.next=14;break;case 11:return Bp(r,i.targetId),e.next=14,Ed(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(e,t,n){return Ip.apply(this,arguments)}function Ip(){return Ip=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=co(e),a=Io.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Fc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ic(),s=Fc();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=y(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=sl(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new fl(c.key,l,Is(l.value.mapValue),nl.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Nc(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.Ic[e.currentUser.toKey()];r||(r=new Bu(Eo)),r=r.insert(t,n),e.Ic[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,Qp(i,o.changes);case 9:return e.next=11,Dv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=$v(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Ip.apply(this,arguments)}function Cp(e,t){return Dp.apply(this,arguments)}function Dp(){return(Dp=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.prev=1,e.next=4,bd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.gc.get(t);n&&(so(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.lc=!0:e.modifiedDocuments.size>0?so(n.lc):e.removedDocuments.size>0&&(so(n.lc),n.lc=!1))})),e.next=8,Qp(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Go(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Np(e,t,n){var r=co(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.dc.forEach((function(e,n){var r=n.view.ku(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=co(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=y(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ku(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&sp(n)}(r.eventManager,t),i.length&&r.fc.eu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ap(e,t,n){return Rp.apply(this,arguments)}function Rp(){return Rp=u(a().mark((function e(t,n,r){var i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=co(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.gc.get(n),!(u=o&&o.key)){e.next=14;break}return s=(s=new Bu(Oo.comparator)).insert(u,Cs.newNoDocument(u,Co.min())),c=Fc().add(u),l=new Ol(Co.min(),new Map,new Bu(Eo),s,c),e.next=9,Cp(i,l);case 9:i.mc=i.mc.remove(u),i.gc.delete(n),Gp(i),e.next=16;break;case 14:return e.next=16,Ed(i.localStore,n,!1).then((function(){return Bp(i,n,r)})).catch(Go);case 16:case"end":return e.stop()}}),e)}))),Rp.apply(this,arguments)}function Op(e,t){return Pp.apply(this,arguments)}function Pp(){return(Pp=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=n.batch.batchId,e.prev=1,e.next=4,gd(r.localStore,n);case 4:return o=e.sent,zp(r,i,null),Vp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Qp(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Go(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Lp(e,t,n){return Fp.apply(this,arguments)}function Fp(){return(Fp=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.prev=1,e.next=4,function(e,t){var n=co(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return so(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,zp(i,n,r),Vp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Qp(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Go(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Mp(e,t){return Up.apply(this,arguments)}function Up(){return(Up=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gv((r=co(t)).remoteStore)||ro("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=co(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.Tc.get(i)||[]).push(n),r.Tc.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=$v(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Vp(e,t){(e.Tc.get(t)||[]).forEach((function(e){e.resolve()})),e.Tc.delete(t)}function zp(e,t,n){var r=co(e),i=r.Ic[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ic[r.currentUser.toKey()]=i}}function Bp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=y(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.dc.delete(a),n&&e.fc.vc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.yc.ps(t).forEach((function(t){e.yc.containsKey(t)||jp(e,t)}))}function jp(e,t){e.wc.delete(t.path.canonicalString());var n=e.mc.get(t);null!==n&&(dv(e.remoteStore,n),e.mc=e.mc.remove(t),e.gc.delete(n),Gp(e))}function qp(e,t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof vp?(e.yc.addReference(a.key,t),Kp(e,a)):a instanceof pp?(ro("SyncEngine","Document no longer in limbo: "+a.key),e.yc.removeReference(a.key,t),e.yc.containsKey(a.key)||jp(e,a.key)):uo()}}catch(o){i.e(o)}finally{i.f()}}function Kp(e,t){var n=t.key,r=n.path.canonicalString();e.mc.get(n)||e.wc.has(r)||(ro("SyncEngine","New document in limbo: "+n),e.wc.add(r),Gp(e))}function Gp(e){for(;e.wc.size>0&&e.mc.size<e.maxConcurrentLimboResolutions;){var t=e.wc.values().next().value;e.wc.delete(t);var n=new Oo(No.fromString(t)),r=e.Ec.next();e.gc.set(r,new gp(n)),e.mc=e.mc.insert(n,r),hv(e.remoteStore,new xf(pc(cc(n.path)),r,"TargetPurposeLimboResolution",au.ct))}}function Qp(e,t,n){return Hp.apply(this,arguments)}function Hp(){return Hp=u(a().mark((function e(t,n,r){var i,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=co(t),o=[],s=[],c=[],e.t0=i.dc.isEmpty(),e.t0){e.next=9;break}return i.dc.forEach((function(e,t){c.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=hd.Bi(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.fc.eu(o),e.next=9,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ho.forEach(n,(function(t){return Ho.forEach(t.$i,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ho.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jo(e.t0)){e.next=10;break}throw e.t0;case 10:ro("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=y(n);try{for(i.s();!(o=i.n()).done;)u=o.value,s=u.targetId,u.fromCache||(c=r.Hi.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.Hi=r.Hi.insert(s,f))}catch(a){i.e(a)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t){return Xp.apply(this,arguments)}function Xp(){return(Xp=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=co(t)).currentUser.isEqual(n)){e.next=11;break}return ro("SyncEngine","User change. New user:",n.toKey()),e.next=5,yd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Tc.forEach((function(e){e.forEach((function(e){e.reject(new fo(lo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Tc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Qp(r,i.tr);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $p(e,t){var n=co(e),r=n.gc.get(t);if(r&&r.lc)return Fc().add(r.key);var i=Fc(),a=n._c.get(t);if(!a)return i;var o,u=y(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.dc.get(s);i=i.unionWith(c.view.ec)}}catch(l){u.e(l)}finally{u.f()}return i}function Yp(e,t){return Jp.apply(this,arguments)}function Jp(){return(Jp=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,Td(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.ac(i),e.abrupt("return",(r.isPrimaryClient&&qp(r,n.targetId,o.uc),o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zp(e,t){return ey.apply(this,arguments)}function ey(){return(ey=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.abrupt("return",Cd(r.localStore,n).then((function(e){return Qp(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ty(e,t,n,r){return ny.apply(this,arguments)}function ny(){return ny=u(a().mark((function e(t,n,r,i){var o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=co(t),e.next=3,function(e,t){var n=co(e),r=co(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ho.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Dv(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(zp(o,n,i||null),Vp(o,n),function(e,t){co(co(e).mutationQueue).Dn(t)}(o.localStore,n)):uo();case 11:return e.next=13,Qp(o,u);case 13:e.next=16;break;case 15:ro("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),ny.apply(this,arguments)}function ry(e,t){return iy.apply(this,arguments)}function iy(){return(iy=u(a().mark((function e(t,n){var r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dy(r=co(t)),vy(r),!0!==n||!0===r.Ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,ay(r,i.toArray());case 5:return o=e.sent,r.Ac=!0,e.next=9,Gv(r.remoteStore,!0);case 9:u=y(o);try{for(u.s();!(s=u.n()).done;)c=s.value,hv(r.remoteStore,c)}catch(a){u.e(a)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Ac){e.next=25;break}return l=[],f=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return Bp(r,t),Ed(r.localStore,t,!0)})),dv(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,ay(r,l);case 21:return function(e){var t=co(e);t.gc.forEach((function(e,n){dv(t.remoteStore,n)})),t.yc.Is(),t.gc=new Map,t.mc=new Bu(Oo.comparator)}(r),r.Ac=!1,e.next=25,Gv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ay(e,t,n){return oy.apply(this,arguments)}function oy(){return oy=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,f,h,d,v,p,m,g,k;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=co(t),o=[],u=[],s=y(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i._c.get(l))||0===h.length){e.next=34;break}return e.next=11,xd(i.localStore,pc(h[0]));case 11:f=e.sent,d=y(h),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return p=v.value,m=i.dc.get(p),e.next=20,Yp(i,m);case 20:(g=e.sent).snapshot&&u.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Id(i.localStore,l);case 36:return k=e.sent,e.next=39,xd(i.localStore,k);case 39:return f=e.sent,e.next=42,_p(i,uy(k),l,!1,f.resumeToken);case 42:o.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.fc.eu(u),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),oy.apply(this,arguments)}function uy(e){return sc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sy(e){var t=co(e);return co(co(t.localStore).persistence).Mi()}function cy(e,t,n,r){return ly.apply(this,arguments)}function ly(){return ly=u(a().mark((function e(t,n,r,i){var o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=co(t)).Ac){e.next=3;break}return e.abrupt("return",void ro("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=o._c.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Cd(o.localStore,_c(u[0]));case 10:return s=e.sent,c=Ol.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Xu.EMPTY_BYTE_STRING),e.next=14,Qp(o,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ed(o.localStore,n,!0);case 17:return Bp(o,n,i),e.abrupt("break",20);case 19:uo();case 20:case"end":return e.stop()}}),e)}))),ly.apply(this,arguments)}function fy(e,t,n){return hy.apply(this,arguments)}function hy(){return(hy=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,f,h,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=dy(t)).Ac){e.next=45;break}o=y(n),e.prev=3,o.s();case 5:if((u=o.n()).done){e.next=21;break}if(s=u.value,!i._c.has(s)){e.next=10;break}return ro("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Id(i.localStore,s);case 12:return c=e.sent,e.next=15,xd(i.localStore,c);case 15:return l=e.sent,e.next=18,_p(i,uy(c),l.targetId,!1,l.resumeToken);case 18:hv(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:f=y(r),e.prev=30,d=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Ed(i.localStore,t,!1).then((function(){dv(i.remoteStore,t),Bp(i,t)})).catch(Go);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function dy(e){var t=co(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$p.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ap.bind(null,t),t.fc.eu=op.bind(null,t.eventManager),t.fc.vc=up.bind(null,t.eventManager),t}function vy(e){var t=co(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Op.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lp.bind(null,t),t}function py(e,t,n){var r=co(e);(function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=co(e),r=$l(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ls.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(dp(i)),o=new hp(i,t.localStore,n.serializer),e.next=15,n.Pc();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,o.ju(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.Pc();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return c=e.sent,e.next=31,Qp(t,c.Hu,void 0);case 31:return e.next=33,function(e,t){var n=co(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ls.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Wu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ao("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var yy=function(){function e(){d(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=ev(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return pd(this.persistence,new dd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new nd(id.js,this.serializer)}},{key:"createSharedClientState",value:function(e){return new qd}},{key:"terminate",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),my=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).bc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.bc.initialize(this,t);case 4:return e.next=6,vy(this.bc.syncEngine);case 6:return e.next=8,Dv(this.bc.remoteStore);case 8:return e.next=10,this.persistence.pi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return pd(this.persistence,new dd,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Rh(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new iu(t,this.persistence);return new ru(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=fd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?mh.withCacheSize(this.cacheSizeBytes):mh.DEFAULT;return new sd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Jd(),Zd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new qd}}]),n}(yy),gy=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).bc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.bc.syncEngine,e.t0=this.sharedClientState instanceof jd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Qr:ty.bind(null,r),jr:cy.bind(null,r),zr:fy.bind(null,r),Mi:sy.bind(null,r),Gr:Zp.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.pi(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ry(i.bc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Jd();if(!jd.D(t))throw new fo(lo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(my),ky=function(){function e(){d(this,e)}return p(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Np(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Wp.bind(null,this.syncEngine),e.next=12,Gv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new tp}},{key:"createDatastore",value:function(e){var t,n=ev(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Yd(t));return function(e,t,n,r){return new av(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Np(o.syncEngine,e,0)},a=Gd.D()?new Gd:new Kd,new uv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new kp(e,t,n,r,i,a);return o&&(u.Ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=co(t),ro("RemoteStore","RemoteStore shutting down."),n.Au.add(5),e.next=5,lv(n);case 5:n.vu.shutdown(),n.Pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function by(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return u(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var wy=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.Vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Vc(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString())}},{key:"Sc",value:function(){this.muted=!0}},{key:"Vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),_y=function(){function e(t,n){var r=this;d(this,e),this.Dc=t,this.serializer=n,this.metadata=new ho,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then((function(e){e&&e.Gu()?r.metadata.resolve(e.Ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Ku))))}),(function(e){return r.metadata.reject(e)}))}return p(e,[{key:"close",value:function(){return this.Dc.cancel()}},{key:"getMetadata",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pc",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){var e=u(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Nc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Cc.decode(t),r=Number(n),isNaN(r)&&this.kc("length string (".concat(n,") is not valid number")),e.next=9,this.Mc(r);case 9:return i=e.sent,e.abrupt("return",new lp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Nc",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.kc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mc",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.kc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Cc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kc",value:function(e){throw this.Dc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Dc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),xy=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(){var e=u(a().mark((function e(t){var n,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fo(lo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=rf(r.serializer)+"/documents",o={documents:n.map((function(e){return Zl(r.serializer,e)}))},e.next=5,r.Ao("BatchGetDocuments",i,o,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=sf(r.serializer,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());so(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=u(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Oo.fromPath(t);n.mutations.push(new gl(r,n.precondition(r)))})),e.next=7,function(){var e=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),i=rf(r.serializer)+"/documents",o={writes:n.map((function(e){return cf(r.serializer,e)}))},e.next=3,r.po("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw uo();t=Co.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fo(lo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Co.min())?nl.exists(!1):nl.updateTime(t):nl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Co.min()))throw new fo(lo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nl.updateTime(t)}return nl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ey=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Fc=r.maxAttempts,this.Lo=new tv(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.Fc-=1,this.Bc()}},{key:"Bc",value:function(){var e=this;this.Lo.xo(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new xy(e.datastore),(r=e.Lc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.qc(t)}))}))})).catch((function(t){e.qc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Lc",value:function(e){try{var t=this.updateFunction(e);return!ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"qc",value:function(e){var t=this;this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Bc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Uc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xl(t)}return!1}}]),e}(),Sy=function(){function e(t,n,r,i){var o=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Za.UNAUTHENTICATED,this.clientId=xo.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ro("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ro("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return p(e,[{key:"getConfiguration",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fo(lo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=$v(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Ty(e,t){return Iy.apply(this,arguments)}function Iy(){return Iy=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ro("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,yd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Iy.apply(this,arguments)}function Cy(e,t){return Dy.apply(this,arguments)}function Dy(){return(Dy=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Ay(t);case 3:return r=e.sent,ro("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return qv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return qv(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ny(e){return"FirebaseError"===e.name?e.code===lo.FAILED_PRECONDITION||e.code===lo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Ay(e){return Ry.apply(this,arguments)}function Ry(){return(Ry=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return ro("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Ty(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Ny(n=e.t0)){e.next=13;break}throw n;case 13:return ao("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Ty(t,new yy);case 16:e.next=21;break;case 18:return ro("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Ty(t,new yy);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Oy(e){return Py.apply(this,arguments)}function Py(){return(Py=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return ro("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Cy(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return ro("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Cy(t,new ky);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ly(e){return Ay(e).then((function(e){return e.persistence}))}function Fy(e){return Ay(e).then((function(e){return e.localStore}))}function My(e){return Oy(e).then((function(e){return e.remoteStore}))}function Uy(e){return Oy(e).then((function(e){return e.syncEngine}))}function Vy(e){return Oy(e).then((function(e){return e.datastore}))}function zy(e){return By.apply(this,arguments)}function By(){return(By=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=bp.bind(null,n.syncEngine),r.onUnlisten=Ep.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ho;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wy({next:function(a){t.enqueueAndForget((function(){return ip(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new fo(lo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new fo(lo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new cp(cc(n.path),a,{includeMetadataChanges:!0,Uu:!0});return np(e,o)},i.next=3,zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function qy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ho;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wy({next:function(n){t.enqueueAndForget((function(){return ip(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fo(lo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new cp(n,a,{includeMetadataChanges:!0,Uu:!0});return np(e,o)},i.next=3,zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Ky=new Map;function Gy(e,t,n){if(!n)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Qy(e,t,n,r){if(!0===t&&!0===r)throw new fo(lo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Hy(e){if(!Oo.isDocumentKey(e))throw new fo(lo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wy(e){if(Oo.isDocumentKey(e))throw new fo(lo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":uo()}function $y(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fo(lo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Xy(e);throw new fo(lo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Yy(e,t){if(t<=0)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Jy=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fo(lo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fo(lo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Qy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling||void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Zy=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jy({}),this._settingsFrozen=!1}return p(e,[{key:"app",get:function(){if(!this._app)throw new fo(lo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fo(lo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new po;switch(e.type){case"firstParty":return new ko(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fo(lo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Ky.get(e);t&&(ro("ComponentProvider","Removing Datastore"),Ky.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function em(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=$y(e,Zy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ao("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Za.MOCK_USER;else{o=L(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new fo(lo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Za(s)}e._authCredentials=new yo(new vo(o,u))}}var tm=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new rm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),nm=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),rm=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,cc(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new tm(this.firestore,null,new Oo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(nm);function im(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=W(e),Gy("collection","path",t),e instanceof Zy){var a=No.fromString.apply(No,[t].concat(r));return Wy(a),new rm(e,null,a)}if(!(e instanceof tm||e instanceof rm))throw new fo(lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(No.fromString.apply(No,[t].concat(r)));return Wy(o),new rm(e.firestore,null,o)}function am(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=W(e),1===arguments.length&&(t=xo.A()),Gy("doc","path",t),e instanceof Zy){var a=No.fromString.apply(No,[t].concat(r));return Hy(a),new tm(e,null,new Oo(a))}if(!(e instanceof tm||e instanceof rm))throw new fo(lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(No.fromString.apply(No,[t].concat(r)));return Hy(o),new tm(e.firestore,e instanceof rm?e.converter:null,new Oo(o))}function om(e,t){return e=W(e),t=W(t),(e instanceof tm||e instanceof rm)&&(t instanceof tm||t instanceof rm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function um(e,t){return e=W(e),t=W(t),e instanceof nm&&t instanceof nm&&e.firestore===t.firestore&&gc(e._query,t._query)&&e.converter===t.converter}var sm=function(){function e(){var t=this;d(this,e),this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new tv(this,"async_queue_retry"),this.Yc=function(){var e=Zd();e&&ro("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Lo.ko()};var n=Zd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Yc)}return p(e,[{key:"isShuttingDown",get:function(){return this.Qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xc(),this.Zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;var t=Zd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xc(),this.Qc)return new Promise((function(){}));var n=new ho;return this.Zc((function(){return t.Qc&&t.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Gc.push(e),t.ta()}))}},{key:"ta",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Gc.length){e.next=14;break}return e.prev=1,e.next=4,this.Gc[0]();case 4:this.Gc.shift(),this.Lo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jo(e.t0)){e.next=12;break}throw e.t0;case 12:ro("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Gc.length>0&&this.Lo.xo((function(){return t.ta()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t=this,n=this.Kc.then((function(){return t.Wc=!0,e().catch((function(e){t.zc=e,t.Wc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw io("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Wc=!1,e}))}));return this.Kc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);var i=Xv.createAndSchedule(this,e,t,n,(function(e){return r.ea(e)}));return this.jc.push(i),i}},{key:"Xc",value:function(){this.zc&&uo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"na",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Kc,e.next=3,t;case 3:if(t!==this.Kc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sa",value:function(e){var t,n=y(this.jc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ia",value:function(e){var t=this;return this.na().then((function(){t.jc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=y(t.jc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.na()}))}},{key:"ra",value:function(e){this.Jc.push(e)}},{key:"ea",value:function(e){var t=this.jc.indexOf(e);this.jc.splice(t,1)}}]),e}();function cm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=y(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var lm=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new ho,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),fm=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new sm,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||dm(this),this._firestoreClient.terminate()}}]),n}(Zy);function hm(e){return e._firestoreClient||dm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dm(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new rs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Sy(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function vm(e,t,n){var r=new ho;return e.asyncQueue.enqueue(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ty(e,n);case 3:return i.next=5,Cy(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Ny(o=i.t0)){i.next=13;break}throw o;case 13:ao("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function pm(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ly(e);case 2:return n=t.sent,t.next=5,My(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=co(e);return t.Au.delete(0),sv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(hm(e=$y(e,fm)))}function ym(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ly(e);case 2:return n=t.sent,t.next=5,My(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=co(t)).Au.add(0),e.next=4,lv(n);case 4:n.Pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(hm(e=$y(e,fm)))}function mm(e,t){var n=hm(e=$y(e,fm)),r=new lm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new _y(e,t)}(function(e,t){if(e instanceof Uint8Array)return by(e,t);if(e instanceof ArrayBuffer)return by(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Il().encode(e):e),t)}(n,ev(t));e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=py,t.next=3,Uy(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function gm(e,t){return function(e,t){return e.asyncQueue.enqueue(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=co(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ls.getNamedQuery(e,t)}))},n.next=3,Fy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(hm(e=$y(e,fm)),t).then((function(t){return t?new nm(e,null,t.query):null}))}function km(e){if(e._initialized||e._terminated)throw new fo(lo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bm=function(){function e(t){d(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Xu.fromBase64String(t))}catch(t){throw new fo(lo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Xu.fromUint8Array(t))}}]),e}(),wm=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fo(lo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ro(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var _m=p((function e(t){d(this,e),this._methodName=t})),xm=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new fo(lo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fo(lo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Eo(this._lat,e._lat)||Eo(this._long,e._long)}}]),e}(),Em=/^__.*__$/,Sm=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new fl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}]),e}(),Tm=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new fl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Im(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw uo()}}var Cm=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.oa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"ua",get:function(){return this.settings.ua}},{key:"ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"aa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.la(e),r}},{key:"fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.oa(),r}},{key:"da",value:function(e){return this.ca({path:void 0,ha:!0})}},{key:"_a",value:function(e){return Wm(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"oa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.la(this.path.get(e))}},{key:"la",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Im(this.ua)&&Em.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),Dm=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ev(t)}return p(e,[{key:"ga",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Cm({ua:e,methodName:t,ma:n,path:Ro.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Nm(e){var t=e._freezeSettings(),n=ev(e._databaseId);return new Dm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Am(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ga(a.merge||a.mergeFields?2:0,t,n,i);Km("Data must be an object, but it was:",o,r);var u,s,c=jm(r,o);if(a.merge)u=new Hu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=y(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Gm(t,l.value,n);if(!o.contains(d))throw new fo(lo.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Xm(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new Hu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Sm(new Ts(c),u,s)}var Rm=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ua)throw 1===e.ua?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(_m);function Om(e,t,n){return new Cm({ua:3,ma:t.settings.ma,methodName:e._methodName,ha:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Pm=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new el(e.path,new Qc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(_m),Lm=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ya=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=Om(this,e,!0),n=this.ya.map((function(e){return Bm(e,t)})),r=new Hc(n);return new el(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_m),Fm=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).ya=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=Om(this,e,!0),n=this.ya.map((function(e){return Bm(e,t)})),r=new Xc(n);return new el(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_m),Mm=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new Yc(e.serializer,Bc(e.serializer,this.pa));return new el(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_m);function Um(e,t,n,r){var i=e.ga(1,t,n);Km("Data must be an object, but it was:",i,r);var a=[],o=Ts.empty();Vu(r,(function(e,r){var u=Hm(t,e,n);r=W(r);var s=i.fa(u);if(r instanceof Rm)a.push(u);else{var c=Bm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Hu(a);return new Tm(o,u,i.fieldTransforms)}function Vm(e,t,n,r,i,a){var o=e.ga(1,t,n),u=[Gm(t,r,n)],s=[i];if(a.length%2!=0)throw new fo(lo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Gm(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ts.empty(),h=u.length-1;h>=0;--h)if(!Xm(l,u[h])){var d=u[h],v=s[h];v=W(v);var p=o.fa(d);if(v instanceof Rm)l.push(d);else{var y=Bm(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new Hu(l);return new Tm(f,m,o.fieldTransforms)}function zm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Bm(n,e.ga(r?4:3,t))}function Bm(e,t){if(qm(e=W(e)))return Km("Unsupported field value:",t,e),jm(e,t);if(e instanceof _m)return function(e,t){if(!Im(t.ua))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ha&&4!==t.ua)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=y(e);try{for(a.s();!(n=a.n()).done;){var o=Bm(n.value,t.da(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=W(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Io.fromDate(e);return{timestampValue:Hl(t.serializer,n)}}if(e instanceof Io){var r=new Io(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Hl(t.serializer,r)}}if(e instanceof xm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bm)return{bytesValue:Wl(t.serializer,e._byteString)};if(e instanceof tm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Yl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Xy(e)))}(e,t)}function jm(e,t){var n={};return zu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vu(e,(function(e,r){var i=Bm(r,t.aa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function qm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Io||e instanceof xm||e instanceof bm||e instanceof tm||e instanceof _m)}function Km(e,t,n){if(!qm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Xy(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Gm(e,t,n){if((t=W(t))instanceof wm)return t._internalPath;if("string"==typeof t)return Hm(e,t);throw Wm("Field path arguments must be of type string or ",e,!1,void 0,n)}var Qm=new RegExp("[~\\*/\\[\\]]");function Hm(e,t,n){if(t.search(Qm)>=0)throw Wm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(wm,X(t.split(".")))._internalPath}catch(r){throw Wm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Wm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new fo(lo.INVALID_ARGUMENT,u+e+s)}function Xm(e,t){return e.some((function(e){return e.isEqual(t)}))}var $m=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new tm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Ym(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Jm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Ym=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return St(b(n.prototype),"data",this).call(this)}}]),n}($m);function Jm(e,t){return"string"==typeof t?Hm(e,t):t instanceof wm?t._internalPath:t._delegate._internalPath}function Zm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fo(lo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var eg=p((function e(){d(this,e)})),tg=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(eg);function ng(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof eg&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof ig})).length,n=e.filter((function(e){return e instanceof rg})).length;if(t>1||t>0&&n>0)throw new fo(lo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=y(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var rg=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=this._parse(e);return yg(e._query,t),new nm(e.firestore,e.converter,yc(e._query,t))}},{key:"_parse",value:function(e){var t=Nm(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fo(lo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){pg(o,a);var s,c=[],l=y(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(vg(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=vg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||pg(o,a),u=zm(n,"where",o,"in"===a||"not-in"===a);return Ls.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tg);var ig=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return p(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Fs.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=y(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;yg(r,a),r=yc(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new nm(e.firestore,e.converter,yc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(eg);var ag=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Rs(t,n);return function(e,t){if(null===fc(e)){var n=hc(e);null!==n&&mg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new nm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new uc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(tg);var og=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return p(n,[{key:"_apply",value:function(e){return new nm(e.firestore,e.converter,mc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tg);var ug=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=dg(e,this.type,this._docOrFields,this._inclusive);return new nm(e.firestore,e.converter,function(e,t){return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tg);function sg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ug._create("startAt",t,!0)}function cg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ug._create("startAfter",t,!1)}var lg=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=dg(e,this.type,this._docOrFields,this._inclusive);return new nm(e.firestore,e.converter,function(e,t){return new uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tg);function fg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lg._create("endBefore",t,!1)}function hg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lg._create("endAt",t,!0)}function dg(e,t,n,r){if(n[0]=W(n[0]),n[0]instanceof $m)return function(e,t,n,r,i){if(!r)throw new fo(lo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=y(vc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(vs(t,r.key));else{var c=r.data.field(s.field);if(es(c))throw new fo(lo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ds(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Nm(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fo(lo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!dc(e)&&-1!==c.indexOf("/"))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(No.fromString(c));if(!Oo.isDocumentKey(l))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Oo(l);u.push(vs(t,f))}else{var h=zm(n,r,c);u.push(h)}}return new Ds(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function vg(e,t,n){if("string"==typeof(n=W(n))){if(""===n)throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dc(t)&&-1!==n.indexOf("/"))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(No.fromString(n));if(!Oo.isDocumentKey(r))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vs(e,new Oo(r))}if(n instanceof tm)return vs(e,n._key);throw new fo(lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xy(n),"."))}function pg(e,t){if(!Array.isArray(e)||0===e.length)throw new fo(lo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function yg(e,t){if(t.isInequality()){var n=hc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=fc(e);null!==i&&mg(e,r,i)}var a=function(e,t){var n,r=y(e);try{for(r.s();!(n=r.n()).done;){var i,a=y(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new fo(lo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fo(lo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function mg(e,t,n){if(!n.isEqual(t))throw new fo(lo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var gg=function(){function e(){d(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ju(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw uo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Vu(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new xm(Ju(e.latitude),Ju(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ts(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ns(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Yu(e);return new Io(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=No.fromString(e);so(_f(n));var r=new is(n.get(1),n.get(3)),i=new Oo(n.popFirst(5));return r.isEqual(t)||io("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function kg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bg=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new bm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tm(this.firestore,null,t)}}]),n}(gg);var wg=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),_g=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return p(n,[{key:"exists",value:function(){return St(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Jm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}($m),xg=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return St(b(n.prototype),"data",this).call(this,e)}}]),n}(_g),Eg=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new wg(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xg(n._firestore,n._userDataWriter,r.key,r,new wg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fo(lo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new xg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Sg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Sg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return uo()}}function Tg(e,t){return e instanceof _g&&t instanceof _g?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Eg&&t instanceof Eg&&e._firestore===t._firestore&&um(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Ig=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new bm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tm(this.firestore,null,t)}}]),n}(gg);function Cg(e){e=$y(e,tm);var t=$y(e.firestore,fm),n=hm(t),r=new Ig(t);return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=co(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fo(lo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=$v(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new _g(t,r,e._key,n,new wg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Dg(e){e=$y(e,nm);var t=$y(e.firestore,fm),n=hm(t),r=new Ig(t);return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Td(t,n,!0);case 3:i=e.sent,o=new yp(n,i.sr),u=o.nc(i.documents),s=o.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=$v(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Eg(t,r,e,n)}))}function Ng(e,t,n){e=$y(e,tm);var r=$y(e.firestore,fm),i=kg(e.converter,t,n);return Pg(r,[Am(Nm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,nl.none())])}function Ag(e,t,n){e=$y(e,tm);for(var r=$y(e.firestore,fm),i=Nm(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Pg(r,[("string"==typeof(t=W(t))||t instanceof wm?Vm(i,"updateDoc",e._key,t,n,o):Um(i,"updateDoc",e._key,t)).toMutation(e._key,nl.exists(!0))])}function Rg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=W(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||cm(n[l])||(c=n[l],l++);var f,h,d,v={includeMetadataChanges:c.includeMetadataChanges};if(cm(n[l])){var p=n[l];n[l]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[l+1]=null===(o=p.error)||void 0===o?void 0:o.bind(p),n[l+2]=null===(s=p.complete)||void 0===s?void 0:s.bind(p)}if(e instanceof tm)h=$y(e.firestore,fm),d=cc(e._key.path),f={next:function(t){n[l]&&n[l](Lg(h,e,t))},error:n[l+1],complete:n[l+2]};else{var y=$y(e,nm);h=$y(y.firestore,fm),d=y._query;var m=new Ig(h);f={next:function(e){n[l]&&n[l](new Eg(h,m,y,e))},error:n[l+1],complete:n[l+2]},Zm(e._query)}return function(e,t,n,r){var i=new wy(r),o=new cp(t,i,n);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=np,t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Sc(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ip,t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(hm(h),d,v,f)}function Og(e,t){return function(e,t){var n=new wy(t);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){co(e).Nu.add(t),t.next()},t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Sc(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){co(e).Nu.delete(t)},t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(hm(e=$y(e,fm)),cm(t)?t:{next:t})}function Pg(e,t){return function(e,t){var n=new ho;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Tp,r.next=3,Uy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(hm(e),t)}function Lg(e,t,n){var r=n.docs.get(t._key),i=new Ig(e);return new _g(e,i,t._key,r,new wg(n.hasPendingWrites,n.fromCache),t.converter)}var Fg={maxAttempts:5},Mg=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nm(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Ug(e,this._firestore),i=kg(r.converter,t,n),a=Am(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,nl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Ug(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=W(t))||t instanceof wm?Vm(this._dataReader,"WriteBatch.update",i._key,t,n,o):Um(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,nl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Ug(e,this._firestore);return this._mutations=this._mutations.concat(new ml(t._key,nl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fo(lo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Ug(e,t){if((e=W(e)).firestore!==t)throw new fo(lo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Vg=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=Ug(e,this._firestore),i=new Ig(this._firestore);return St(b(n.prototype),"get",this).call(this,e).then((function(e){return new _g(t._firestore,i,r._key,e._document,new wg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=Nm(t)}return p(e,[{key:"get",value:function(e){var t=this,n=Ug(e,this._firestore),r=new bg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return uo();var i=e[0];if(i.isFoundDocument())return new $m(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new $m(t._firestore,r,n._key,null,n.converter);throw uo()}))}},{key:"set",value:function(e,t,n){var r=Ug(e,this._firestore),i=kg(r.converter,t,n),a=Am(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Ug(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=W(t))||t instanceof wm?Vm(this._dataReader,"Transaction.update",i._key,t,n,o):Um(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Ug(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Lm("arrayUnion",t)}function Bg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fm("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){eo=e}(Qe),Ve(new $("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new fm(new mo(e.getProvider("auth-internal")),new wo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fo(lo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new is(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Je(Ja,"3.11.0",e),Je(Ja,"3.11.0","esm2017")}();function jg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function qg(){if("undefined"===typeof Uint8Array)throw new fo("unimplemented","Uint8Arrays are not available in this environment.")}function Kg(){if("undefined"==typeof atob)throw new fo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Gg=function(){function e(t){d(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return Kg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return qg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Kg(),new e(bm.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return qg(),new e(bm.fromUint8Array(t))}}]),e}();function Qg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Hg=function(){function e(){d(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){km(e=$y(e,fm));var n=hm(e);if(n._uninitializedComponentsProvider)throw new fo(lo.FAILED_PRECONDITION,"SDK cache is already specified.");ao("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new ky;return vm(n,i,new my(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){km(e=$y(e,fm));var t=hm(e);if(t._uninitializedComponentsProvider)throw new fo(lo.FAILED_PRECONDITION,"SDK cache is already specified.");ao("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new ky;return vm(t,r,new gy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fo(lo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ho;return e._queue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xo.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Xo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(fd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Wg=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof is||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ao("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};em(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return pm(this._delegate)}},{key:"disableNetwork",value:function(){return ym(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Qy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new ho;return e.asyncQueue.enqueueAndForget(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Mp,n.next=3,Uy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(hm($y(this._delegate,fm)))}},{key:"onSnapshotsInSync",value:function(e){return Og(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new sk(this,im(this._delegate,e))}catch(t){throw ek(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Zg(this,am(this._delegate,e))}catch(t){throw ek(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new ak(this,function(e,t){if(e=$y(e,Zy),Gy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fo(lo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new nm(e,null,function(e){return new uc(No.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ek(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=$y(e,fm);var r=Object.assign(Object.assign({},Fg),n);return function(e){if(e.maxAttempts<1)throw new fo(lo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ho;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Vy(e);case 2:o=i.sent,new Ey(e.asyncQueue,o,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(hm(e),(function(n){return t(new Vg(e,n))}),r)}(this._delegate,(function(n){return e(new $g(t,n))}))}},{key:"batch",value:function(){var e=this;return hm(this._delegate),new Yg(new Mg(this._delegate,(function(t){return Pg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return mm(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return gm(this._delegate,e).then((function(e){return e?new ak(t,e):null}))}}]),e}(),Xg=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new Gg(new bm(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Zg.forKey(t,this.firestore,null)}}]),n}(gg);var $g=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Xg(t)}return p(e,[{key:"get",value:function(e){var t=this,n=ck(e);return this._delegate.get(n).then((function(e){return new rk(t._firestore,new _g(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=ck(e);return n?(jg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ck(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ck(e);return this._delegate.delete(t),this}}]),e}(),Yg=function(){function e(t){d(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=ck(e);return n?(jg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ck(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ck(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Jg=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new xg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ik(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Xg(t),n),i.set(n,a)),a}}]),e}();Jg.INSTANCES=new WeakMap;var Zg=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Xg(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new sk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new sk(this.firestore,im(this._delegate,e))}catch(t){throw ek(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=W(e))instanceof tm&&om(this._delegate,e)}},{key:"set",value:function(e,t){t=jg("DocumentReference.set",t);try{return t?Ng(this._delegate,e,t):Ng(this._delegate,e)}catch(n){throw ek(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Ag(this._delegate,e):Ag.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw ek(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Pg($y((e=this._delegate).firestore,fm),[new ml(e._key,nl.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tk(n),a=nk(n,(function(t){return new rk(e.firestore,new _g(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Rg(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Cg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$y(e,tm);var t=$y(e.firestore,fm);return jy(hm(t),e._key,{source:"server"}).then((function(n){return Lg(t,e,n)}))}(this._delegate):function(e){e=$y(e,tm);var t=$y(e.firestore,fm);return jy(hm(t),e._key).then((function(n){return Lg(t,e,n)}))}(this._delegate)).then((function(e){return new rk(t.firestore,new _g(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Jg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new tm(n._delegate,r,new Oo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new tm(n._delegate,r,t))}}]),e}();function ek(e,t,n){return e.message=e.message.replace(t,n),e}function tk(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Qg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function nk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Qg(e[0])?e[0]:Qg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new Zg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Tg(this._delegate,e._delegate)}}]),e}(),ik=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||uo(),t}}]),n}(rk),ak=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Xg(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,ng(this._delegate,function(e,t,n){var r=t,i=Jm("where",e);return rg._create(i,r,n)}(t,n,r)))}catch(i){throw ek(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,ng(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Jm("orderBy",e);return ag._create(n,t)}(t,n)))}catch(r){throw ek(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,ng(this._delegate,(Yy("limit",n=t),og._create("limit",n,"F"))))}catch(r){throw ek(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,ng(this._delegate,(Yy("limitToLast",n=t),og._create("limitToLast",n,"L"))))}catch(r){throw ek(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,ng(this._delegate,sg.apply(void 0,arguments)))}catch(t){throw ek(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,ng(this._delegate,cg.apply(void 0,arguments)))}catch(t){throw ek(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,ng(this._delegate,fg.apply(void 0,arguments)))}catch(t){throw ek(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,ng(this._delegate,hg.apply(void 0,arguments)))}catch(t){throw ek(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return um(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Dg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$y(e,nm);var t=$y(e.firestore,fm),n=hm(t),r=new Ig(t);return qy(n,e._query,{source:"server"}).then((function(n){return new Eg(t,r,e,n)}))}(this._delegate):function(e){e=$y(e,nm);var t=$y(e.firestore,fm),n=hm(t),r=new Ig(t);return Zm(e._query),qy(n,e._query).then((function(n){return new Eg(t,r,e,n)}))}(this._delegate)).then((function(e){return new uk(t.firestore,new Eg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tk(n),a=nk(n,(function(t){return new uk(e.firestore,new Eg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Rg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Jg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),ok=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ik(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),uk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new ak(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ik(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new ok(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ik(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Tg(this._delegate,e._delegate)}}]),e}(),sk=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Zg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Zg(this.firestore,void 0===e?am(this._delegate):am(this._delegate,e))}catch(t){throw ek(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=$y(e.firestore,fm),r=am(e),i=kg(e.converter,t);return Pg(n,[Am(Nm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,nl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Zg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return om(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Jg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(ak);function ck(e){return $y(e,tm)}var lk,fk=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(wm,n)}return p(e,[{key:"isEqual",value:function(e){return(e=W(e))instanceof wm&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ro.keyField().canonicalString())}}]),e}(),hk=function(){function e(t){d(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Pm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Rm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=zg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Bg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new Mm("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),dk={Firestore:Wg,GeoPoint:xm,Timestamp:Io,Blob:Gg,Transaction:$g,WriteBatch:Yg,DocumentReference:Zg,DocumentSnapshot:rk,Query:ak,QueryDocumentSnapshot:ik,QuerySnapshot:uk,CollectionReference:sk,FieldPath:fk,FieldValue:hk,setLogLevel:function(e){var t;t=e,to.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new $("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},dk)))})(lk=Et,(function(e,t){return new Wg(e,t,new Hg)})),lk.registerVersion("@firebase/firestore-compat","0.3.8");var vk,pk="firebasestorage.googleapis.com",yk="storageBucket",mk=function(e){k(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,gk(e),"Firebase Storage: ".concat(r," (").concat(gk(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(m(i),n.prototype),i}return p(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return gk(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(V);function gk(e){return"storage/"+e}function kk(){return new mk(vk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function bk(){return new mk(vk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wk(){return new mk(vk.CANCELED,"User canceled the upload/download.")}function _k(){return new mk(vk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xk(e){return new mk(vk.INVALID_ARGUMENT,e)}function Ek(){return new mk(vk.APP_DELETED,"The Firebase app was deleted.")}function Sk(e){return new mk(vk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tk(e,t){return new mk(vk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ik(e){throw new mk(vk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(vk||(vk={}));var Ck,Dk=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return p(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new mk(vk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===pk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new mk(vk.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Nk=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return p(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Ak(e){return"string"===typeof e||e instanceof String}function Rk(e){return Ok()&&e instanceof Blob}function Ok(){return"undefined"!==typeof Blob&&!M()}function Pk(e,t,n,r){if(r<t)throw xk("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw xk("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Lk(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Fk(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Mk(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ck||(Ck={}));var Uk=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,v=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return p(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=kk();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Ek():wk());else i(bk())}};this.canceled_?t(0,new Vk(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new Vk(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Ck.NO_ERROR,a=r.getStatus();if(!n||Mk(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Ck.ABORT;t(!1,new Vk(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new Vk(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Vk=p((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function zk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Bk(){for(var e=zk(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Ok())return new Blob(n);throw new mk(vk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function jk(e){if("undefined"===typeof atob)throw t="base-64",new mk(vk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var qk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Kk=p((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function Gk(e,t){switch(e){case qk.RAW:return new Kk(Qk(t));case qk.BASE64:case qk.BASE64URL:return new Kk(Hk(e,t));case qk.DATA_URL:return new Kk(function(e){var t=new Wk(e);return t.base64?Hk(qk.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Tk(qk.DATA_URL,"Malformed data URL.")}return Qk(t)}(t.rest)}(t),new Wk(t).contentType)}throw kk()}function Qk(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Hk(e,t){switch(e){case qk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Tk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qk.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Tk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=jk(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Tk(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Wk=p((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Tk(qk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var Xk=function(){function e(t,n){d(this,e);var r=0,i="";Rk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return p(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Rk(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Ok()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Bk.apply(null,i))}var a=n.map((function(e){return Ak(e)?Gk(qk.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function $k(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Yk(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Jk(e,t){return t}var Zk=p((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Jk})),eb=null;function tb(){if(eb)return eb;var e=[];e.push(new Zk("bucket")),e.push(new Zk("generation")),e.push(new Zk("metageneration")),e.push(new Zk("name","fullPath",!0));var t=new Zk("name");t.xform=function(e,t){return function(e){return!Ak(e)||e.length<2?e:Yk(e)}(t)},e.push(t);var n=new Zk("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Zk("timeCreated")),e.push(new Zk("updated")),e.push(new Zk("md5Hash",null,!0)),e.push(new Zk("cacheControl",null,!0)),e.push(new Zk("contentDisposition",null,!0)),e.push(new Zk("contentEncoding",null,!0)),e.push(new Zk("contentLanguage",null,!0)),e.push(new Zk("contentType",null,!0)),e.push(new Zk("metadata","customMetadata",!0)),eb=e}function nb(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Dk(n,r);return t._makeStorageReference(i)}})}(r,e),r}function rb(e,t,n){var r=$k(t);return null===r?null:nb(e,r,n)}function ib(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var ab="prefixes",ob="items";function ub(e,t,n){var r=$k(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ab]){var i,a=y(n[ab]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new Dk(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[ob]){var s,c=y(n[ob]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new Dk(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var sb=p((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function cb(e){if(!e)throw kk()}function lb(e,t){return function(n,r){var i=rb(e,r,t);return cb(null!==i),i}}function fb(e,t){return function(n,r){var i=rb(e,r,t);return cb(null!==i),function(e,t,n,r){var i=$k(t);if(null===i)return null;if(!Ak(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Lk("/b/"+o(i)+"/o/"+o(a),n,r)+Fk({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function hb(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new mk(vk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new mk(vk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new mk(vk.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new mk(vk.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function db(e){var t=hb(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new mk(vk.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function vb(e,t,n){var r=Lk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new sb(r,"GET",lb(e,n),i);return a.errorHandler=db(t),a}function pb(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Lk(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new sb(o,"GET",function(e,t){return function(n,r){var i=ub(e,t,r);return cb(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=hb(t),s}function yb(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function mb(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=yb(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ib(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Xk.getBlob(c,r,l);if(null===f)throw _k();var h={name:s.fullPath},d=Lk(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new sb(d,"POST",lb(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=hb(t),p}var gb=p((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function kb(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){cb(!1)}return cb(!!n&&-1!==(t||["active"]).indexOf(n)),n}var bb=262144;function wb(e,t,n,r,i,a,o,u){var s=new gb(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new mk(vk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw _k();var p=t.maxUploadRetryTime,y=new sb(n,"POST",(function(e,n){var i,o=kb(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?lb(t,a)(e,n):null,new gb(u,c,"final"===o,i)}),p);return y.headers=d,y.body=v.uploadData(),y.progressCallback=u||null,y.errorHandler=hb(e),y}var _b={STATE_CHANGED:"state_changed"},xb={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Eb(e){switch(e){case"running":case"pausing":case"canceling":return xb.RUNNING;case"paused":return xb.PAUSED;case"success":return xb.SUCCESS;case"canceled":return xb.CANCELED;default:return xb.ERROR}}var Sb=p((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Tb(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Ib=null,Cb=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ck.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Ck.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Ck.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return p(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Ik("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Ik("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Ik("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Ik("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Ik("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Db=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Cb);function Nb(){return Ib?Ib():new Db}var Ab=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=tb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(vk.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(Mk(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=bk()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(vk.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return p(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=yb(t,r,i),u={name:o.fullPath},s=Lk(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=ib(o,n),f=e.maxUploadRetryTime,h=new sb(s,"POST",(function(e){var t;kb(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){cb(!1)}return cb(Ak(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=hb(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Nb,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new sb(n,"POST",(function(e){var t=kb(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){cb(!1)}n||cb(!1);var i=Number(n);return cb(!isNaN(i)),new gb(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=hb(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Nb,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=bb*this._chunkMultiplier,n=new gb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=wb(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Nb,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(bb*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=vb(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Nb,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=mb(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Nb,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=wk(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Eb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Sb(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Eb(this._state)){case xb.SUCCESS:Tb(this._resolve.bind(null,this.snapshot))();break;case xb.CANCELED:case xb.ERROR:Tb(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Eb(this._state)){case xb.RUNNING:case xb.PAUSED:e.next&&Tb(e.next.bind(e,this.snapshot))();break;case xb.SUCCESS:e.complete&&Tb(e.complete.bind(e))();break;default:e.error&&Tb(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Rb=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof Dk?n:Dk.makeFromUrl(n,t.host)}return p(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Dk(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Yk(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Dk(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Sk(e)}}]),e}();function Ob(e,t,n){return Pb.apply(this,arguments)}function Pb(){return(Pb=u(a().mark((function e(t,n,r){var i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={pageToken:r},e.next=3,Lb(t,u);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,X(s.prefixes)),(o=n.items).push.apply(o,X(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,Ob(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lb(e,t){null!=t&&"number"===typeof t.maxResults&&Pk("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=pb(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Nb)}function Fb(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Lk(t.fullServerUrl(),e.host,e._protocol),a=ib(n,r),o=e.maxOperationRetryTime,u=new sb(i,"PATCH",lb(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=db(t),u}(e.storage,e._location,t,tb());return e.storage.makeRequestWithTokens(n,Nb)}function Mb(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Lk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new sb(r,"GET",fb(e,n),i);return a.errorHandler=db(t),a}(e.storage,e._location,tb());return e.storage.makeRequestWithTokens(t,Nb).then((function(e){if(null===e)throw new mk(vk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ub(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Lk(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new sb(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=db(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Nb)}function Vb(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Dk(e._location.bucket,n);return new Rb(e.storage,r)}function zb(e,t){if(e instanceof qb){var n=e;if(null==n._bucket)throw new mk(vk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yk+"' property when initializing the app?");var r=new Rb(n,n._bucket);return null!=t?zb(r,t):r}return void 0!==t?Vb(e,t):e}function Bb(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof qb)return new Rb(e,t);throw xk("To use ref(service, url), the first argument must be a Storage instance.")}return zb(e,t)}function jb(e,t){var n=null===t||void 0===t?void 0:t[yk];return null==n?null:Dk.makeFromBucketSpec(n,e)}var qb=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=pk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Dk.makeFromBucketSpec(i,this._host):jb(this._host,this.app.options)}return p(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Dk.makeFromBucketSpec(this._url,e):this._bucket=jb(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Pk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Pk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Rb(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Nk(Ek());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Fk(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Uk(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),o=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,o,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Kb="@firebase/storage",Gb="0.11.2",Qb="storage";function Hb(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Ab(e,new Xk(t),n)}(e=W(e),t,n)}function Wb(e){return function(e){e._throwIfRoot("getMetadata");var t=vb(e.storage,e._location,tb());return e.storage.makeRequestWithTokens(t,Nb)}(e=W(e))}function Xb(e){return function(e){var t={prefixes:[],items:[]};return Ob(e,t).then((function(){return t}))}(e=W(e))}function $b(e,t){return Bb(e=W(e),t)}function Yb(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:L(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Jb(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new qb(r,i,a,n,Qe)}Ve(new $(Qb,Jb,"PUBLIC").setMultipleInstances(!0)),Je(Kb,Gb,""),Je(Kb,Gb,"esm2017");var Zb=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return p(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),ew=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return p(e,[{key:"snapshot",get:function(){return new Zb(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Zb(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Zb(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Zb(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),tw=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return p(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new nw(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new nw(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),nw=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return p(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Vb(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new ew(Hb(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qk.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Gk(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new ew(new Ab(this._delegate,new Xk(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Xb(this._delegate).then((function(t){return new tw(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Lb(e=W(e),t)}(this._delegate,e||void 0).then((function(e){return new tw(e,t.storage)}))}},{key:"getMetadata",value:function(){return Wb(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Fb(e=W(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return Mb(W(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Ub(W(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Sk(e)}}]),e}(),rw=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return p(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(iw(e))throw xk("ref() expected a child path but got a URL, use refFromURL instead.");return new nw($b(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!iw(e))throw xk("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Dk.makeFromUrl(e,this._delegate.host)}catch(t){throw xk("refFromUrl() expected a valid full URL but got an invalid one.")}return new nw($b(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Yb(this._delegate,e,t,n)}}]),e}();function iw(e){return/^[A-Za-z]+:\/\//.test(e)}function aw(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new rw(r,i)}!function(e){var t={TaskState:xb,TaskEvent:_b,StringFormat:qk,Storage:rw,Reference:nw};e.INTERNAL.registerComponent(new $("storage-compat",aw,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Et);var ow=n(184);Et.initializeApp({apiKey:"AIzaSyBomr8NtsqAk-MUQIutAMra33Y_zd5U_8Y",authDomain:"hidden-paradis.firebaseapp.com",projectId:"hidden-paradis",storageBucket:"hidden-paradis.appspot.com"});var uw=Et.firestore(),sw=Et.storage();var cw=function(){var e=l((0,t.useState)(null),2),n=e[0],r=e[1],i=l((0,t.useState)(0),2),o=i[0],s=i[1],c=function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.target),r=Object.fromEntries(n.entries()),e.prev=3,e.next=6,uw.collection("landmarks").add(r);case 6:console.log("Data successfully added to Firestore!"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("Error adding data to Firestore: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,ow.jsxs)("form",{onSubmit:c,children:[(0,ow.jsx)("br",{}),(0,ow.jsxs)("div",{children:[(0,ow.jsx)("label",{htmlFor:"name",children:"Name  : "}),(0,ow.jsx)("input",{type:"text",id:"name",name:"name"})]}),(0,ow.jsx)("br",{}),(0,ow.jsxs)("div",{children:[(0,ow.jsx)("label",{htmlFor:"email",children:"Description of the POI: "}),(0,ow.jsx)("textarea",{rows:"2",cols:"50",type:"text",id:"description",name:"description"})]}),(0,ow.jsx)("br",{}),(0,ow.jsxs)("div",{children:[(0,ow.jsx)("label",{htmlFor:"name",children:"Name of the POI: "}),(0,ow.jsx)("input",{type:"text",id:"namePOI",name:"namePOI"})]}),(0,ow.jsx)("br",{}),(0,ow.jsxs)("div",{children:[(0,ow.jsx)("label",{htmlFor:"longitude",children:"Longitude : "}),(0,ow.jsx)("input",{type:"text",id:"longitude",name:"longitude"})]}),(0,ow.jsx)("br",{}),(0,ow.jsxs)("div",{children:[(0,ow.jsx)("label",{htmlFor:"latitude",children:"Altitude : "}),(0,ow.jsx)("input",{type:"text",id:"latitude",name:"latitude"})]}),(0,ow.jsx)("br",{}),(0,ow.jsxs)("div",{children:[(0,ow.jsx)("label",{htmlFor:"category",children:"Type of the POI : "}),(0,ow.jsxs)("select",{id:"category",name:"category",children:[(0,ow.jsx)("option",{value:"cascade",children:"Cascade"}),(0,ow.jsx)("option",{value:"plage",children:"Plage"}),(0,ow.jsx)("option",{value:"point-de-vue",children:"Point de vue"}),(0,ow.jsx)("option",{value:"halte-routiere",children:"Halte routi\xe9re"}),(0,ow.jsx)("option",{value:"batiment-historique",children:"Batiment historique"}),(0,ow.jsx)("option",{value:"sculpture",children:"Sculpture"})]})]}),(0,ow.jsx)("br",{}),(0,ow.jsx)("input",{type:"file",onChange:function(e){r(e.target.files[0])},accept:"image/*"}),(0,ow.jsx)("br",{}),(0,ow.jsx)("button",{type:"button",onClick:function(){if(n){var e=sw.ref(),t=document.getElementsByName("namePOI")[0].value,r=document.getElementsByName("name")[0].value,i=document.getElementById("category"),a=i.options[i.selectedIndex].value,o=e.child("".concat(a,"/").concat(t,"/").concat(r,"/").concat(n.name)).put(n);o.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){console.log(e)}),(function(){o.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e)}))}))}else console.log("No file selected")},children:"Upload to Firebase"}),(0,ow.jsxs)("p",{children:[o,"% done"]})]})},lw=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,ow.jsx)(t.StrictMode,{children:(0,ow.jsx)(cw,{})})),lw()}()}();
//# sourceMappingURL=main.6d981e3e.js.map